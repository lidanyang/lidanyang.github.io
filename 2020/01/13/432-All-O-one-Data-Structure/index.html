<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.0.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.0" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="分类">
<meta property="og:url" content="http://yoursite.com/categories/index.html">
<meta property="og:site_name" content="Just a blog">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-05-28T06:22:34.105Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="分类">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.0.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/categories/">





  <title>432. All O`one Data Structure | Just a blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Just a blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/13/432-All-O-one-Data-Structure/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">432. All O`one Data Structure</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-13T14:44:00+08:00">2020-01-13</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-01-13T16:06:39+08:00">2020-01-13</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="432-all-o-one-data-structure"><a class="header-anchor" href="#432-all-o-one-data-structure">¶</a>[432. All O`one Data Structure]</h3>
<p>(<a href="https://leetcode.com/problems/all-oone-data-structure/" target="_blank" rel="noopener">https://leetcode.com/problems/all-oone-data-structure/</a>)</p>
<p>Difficulty: <strong>Hard</strong></p>
<p>Implement a data structure supporting the following operations:</p>
<ol>
<li>Inc(Key) - Inserts a new key <key style="display: inline;">with value 1. Or increments an existing key by 1. Key is guaranteed to be a <strong>non-empty</strong> string.</key></li>
<li>Dec(Key) - If Key’s value is 1, remove it from the data structure. Otherwise decrements an existing key by 1. If the key does not exist, this function does nothing. Key is guaranteed to be a <strong>non-empty</strong> string.</li>
<li>GetMaxKey() - Returns one of the keys with maximal value. If no element exists, return an empty string <code>&quot;&quot;</code>.</li>
<li>GetMinKey() - Returns one of the keys with minimal value. If no element exists, return an empty string <code>&quot;&quot;</code>.</li>
</ol>
<p>Challenge: Perform all these in O(1) time complexity.</p>
<h4 id="solution"><a class="header-anchor" href="#solution">¶</a>Solution</h4>
<h5 id="法一-非o-1-解法"><a class="header-anchor" href="#法一-非o-1-解法">¶</a>法一 非O(1)解法</h5>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AllOne</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/** Initialize your data structure here. */</span></span><br><span class="line">    <span class="built_in">map</span>&lt;<span class="built_in">string</span>,<span class="keyword">int</span>&gt; hash;</span><br><span class="line">    AllOne() &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Inserts a new key &lt;Key&gt; with value 1. Or increments an existing key by 1. */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">inc</span><span class="params">(<span class="built_in">string</span> key)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">         <span class="keyword">if</span>(hash.find(key) == hash.end())</span><br><span class="line">         &#123;hash[key] = <span class="number">1</span>;&#125;</span><br><span class="line">         <span class="keyword">else</span></span><br><span class="line">         &#123;hash[key] += <span class="number">1</span>;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Decrements an existing key by 1. If Key's value is 1, remove it from the data structure. */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dec</span><span class="params">(<span class="built_in">string</span> key)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(hash.find(key) != hash.end())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(hash[key] == <span class="number">1</span>)</span><br><span class="line">            &#123;hash.erase(key);&#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;hash[key] -= <span class="number">1</span>;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Returns one of the keys with maximal value. */</span></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">getMaxKey</span><span class="params">()</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(hash.size() &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> max_util = <span class="number">0</span>;</span><br><span class="line">            <span class="built_in">string</span> key = <span class="string">""</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;i : hash)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(i.second &gt;= max_util)</span><br><span class="line">                &#123;</span><br><span class="line">                    max_util = i.second;</span><br><span class="line">                    key = i.first;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> key;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h5 id="法二-非o-1-解法"><a class="header-anchor" href="#法二-非o-1-解法">¶</a>法二 非O(1)解法</h5>
<p>  有点像O(1)，但是插入字符串的时候是O(logn)复杂度的，把<code>std::set&lt;std::string&gt; keys;</code>改成<code>std::unordered_set&lt;std::string&gt; keys;</code>就是O(1)了吧。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AllOne</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/** Initialize your data structure here. */</span></span><br><span class="line">    AllOne() &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Inserts a new key &lt;Key&gt; with value 1. Or increments an existing key by 1. */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">inc</span><span class="params">(<span class="built_in">string</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> it = _m.find(key);</span><br><span class="line">        inc((it == _m.end() ? _cache.end() : it-&gt;second), key);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Decrements an existing key by 1. If Key's value is 1, remove it from the data structure. */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dec</span><span class="params">(<span class="built_in">string</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> it = _m.find(key);</span><br><span class="line">        <span class="keyword">if</span> (it == _m.end()) <span class="keyword">return</span>;</span><br><span class="line">        dec(it-&gt;second, key);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Returns one of the keys with maximal value. */</span></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">getMaxKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (_m.empty())</span><br><span class="line">            <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">return</span> *_cache.back().keys.begin();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Returns one of the keys with Minimal value. */</span></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">getMinKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (_m.empty())</span><br><span class="line">            <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">return</span> *_cache.front().keys.begin();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">        <span class="keyword">int</span> val;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">set</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; keys;</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">inc</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">list</span>&lt;Node&gt;::iterator it, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (it == _cache.end()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (_cache.empty() || _cache.front().val != <span class="number">1</span>)</span><br><span class="line">                _cache.emplace_front(Node&#123;<span class="number">1</span>, &#123;key&#125;&#125;);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                _cache.front().keys.insert(key);</span><br><span class="line">            _m.emplace(key, _cache.begin());</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">auto</span> next = <span class="built_in">std</span>::next(it);</span><br><span class="line">        <span class="keyword">if</span> (next != _cache.end() &amp;&amp; next-&gt;val == it-&gt;val + <span class="number">1</span>) &#123;</span><br><span class="line">            next-&gt;keys.insert(key);</span><br><span class="line">            _m[key] = next;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            _cache.insert(next, Node&#123;it-&gt;val + <span class="number">1</span>,&#123;key&#125;&#125;);</span><br><span class="line">            _m[key] = <span class="built_in">std</span>::next(it);</span><br><span class="line">        &#125;</span><br><span class="line">        it-&gt;keys.erase(key);</span><br><span class="line">        <span class="keyword">if</span> (it-&gt;keys.empty()) _cache.erase(it);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dec</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">list</span>&lt;Node&gt;::iterator it, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;key)</span> </span>&#123;</span><br><span class="line">        it-&gt;keys.erase(key);</span><br><span class="line">        <span class="keyword">if</span> (it-&gt;val == <span class="number">1</span>) &#123;</span><br><span class="line">            _m.erase(key);</span><br><span class="line">            <span class="keyword">if</span> (it-&gt;keys.empty()) _cache.erase(it);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (it == _cache.begin()) &#123;</span><br><span class="line">            _cache.emplace_front(Node&#123;it-&gt;val - <span class="number">1</span>, &#123;key&#125;&#125;);</span><br><span class="line">            _m[key] = _cache.begin();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">auto</span> prev = <span class="built_in">std</span>::prev(it);</span><br><span class="line">            <span class="keyword">if</span> (prev-&gt;val == it-&gt;val - <span class="number">1</span>) &#123;</span><br><span class="line">                prev-&gt;keys.insert(key);</span><br><span class="line">                _m[key] = prev;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                _cache.emplace(it, Node&#123;it-&gt;val - <span class="number">1</span>, &#123;key&#125;&#125;);</span><br><span class="line">                _m[key] = <span class="built_in">std</span>::prev(it);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (it-&gt;keys.empty()) _cache.erase(it);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">unordered_map</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>, <span class="built_in">std</span>::<span class="built_in">list</span>&lt;Node&gt;::iterator&gt; _m;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">list</span>&lt;Node&gt; _cache;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="法三-o-1-解法"><a class="header-anchor" href="#法三-o-1-解法">¶</a>法三 O(1)解法</h5>
<p>  每个值维护一个桶，然后用一个unordered_map维护key到桶中位置的映射关系，为了O(1)能取到最大最小，需要用list存放所有值桶。我个人最喜欢这个解法，因为代码风格很好。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AllOne</span> &#123;</span></span><br><span class="line">  <span class="keyword">typedef</span> <span class="built_in">string</span> <span class="keyword">key_t</span>;</span><br><span class="line">  <span class="keyword">typedef</span> <span class="keyword">int</span> <span class="keyword">val_t</span>;</span><br><span class="line">  <span class="keyword">typedef</span> <span class="built_in">list</span>&lt;<span class="keyword">key_t</span>&gt; <span class="keyword">keylist_t</span>;</span><br><span class="line">  <span class="keyword">typedef</span> <span class="built_in">list</span>&lt;pair&lt;<span class="keyword">val_t</span>, <span class="keyword">keylist_t</span>&gt;&gt; <span class="keyword">vallist_t</span>;</span><br><span class="line">  <span class="keyword">typedef</span> <span class="keyword">keylist_t</span>::iterator <span class="keyword">keyiter_t</span>;</span><br><span class="line">  <span class="keyword">typedef</span> <span class="keyword">vallist_t</span>::iterator <span class="keyword">valiter_t</span>;</span><br><span class="line"> <span class="keyword">protected</span>:</span><br><span class="line">  <span class="keyword">vallist_t</span> vallist;</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">unordered_map</span>&lt;<span class="keyword">key_t</span>, pair&lt;<span class="keyword">valiter_t</span>, <span class="keyword">keyiter_t</span>&gt;&gt; keymap;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  AllOne() &#123; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">inc</span><span class="params">(<span class="built_in">string</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> it = keymap.find(key);</span><br><span class="line">    <span class="keyword">valiter_t</span> vit;</span><br><span class="line">    <span class="keyword">keyiter_t</span> eit;</span><br><span class="line">    <span class="keyword">if</span> (it == keymap.end()) &#123;</span><br><span class="line">      <span class="keyword">if</span> (vallist.empty() || vallist.front().first != <span class="number">1</span>)</span><br><span class="line">        vit = vallist.insert(vallist.begin(), make_pair(<span class="number">1</span>, <span class="keyword">keylist_t</span>()));</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        vit = vallist.begin();</span><br><span class="line">      eit = vit-&gt;second.insert(vit-&gt;second.begin(), key);</span><br><span class="line">      keymap[key] = make_pair(vit, eit);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      vit = it-&gt;second.first;</span><br><span class="line">      eit = it-&gt;second.second;</span><br><span class="line">      <span class="keyword">auto</span> val = vit-&gt;first + <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">auto</span> nvit = next(vit);</span><br><span class="line">      <span class="keyword">if</span> (nvit == vallist.end() || nvit-&gt;first != val)</span><br><span class="line">        nvit = vallist.insert(nvit, make_pair(val, <span class="keyword">keylist_t</span>()));</span><br><span class="line">      <span class="keyword">auto</span> neit = nvit-&gt;second.insert(nvit-&gt;second.begin(), *eit);</span><br><span class="line">      vit-&gt;second.erase(eit);</span><br><span class="line">      <span class="keyword">if</span> (vit-&gt;second.empty())</span><br><span class="line">        vallist.erase(vit);</span><br><span class="line">      it-&gt;second = make_pair(nvit, neit);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">dec</span><span class="params">(<span class="built_in">string</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">valiter_t</span> vit, pvit;</span><br><span class="line">    <span class="keyword">keyiter_t</span> eit, peit;</span><br><span class="line">    <span class="keyword">auto</span> it = keymap.find(key);</span><br><span class="line">    <span class="keyword">if</span> (it == keymap.end()) <span class="keyword">return</span>;</span><br><span class="line">    vit = it-&gt;second.first;</span><br><span class="line">    eit = it-&gt;second.second;</span><br><span class="line">    <span class="keyword">auto</span> val = vit-&gt;first - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (val) &#123;</span><br><span class="line">      <span class="keyword">if</span> (vit == vallist.begin() || prev(vit)-&gt;first != val)</span><br><span class="line">        pvit = vallist.insert(vit, make_pair(val, <span class="keyword">keylist_t</span>()));</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        pvit = prev(vit);</span><br><span class="line">      peit = pvit-&gt;second.insert(pvit-&gt;second.begin(), *eit);</span><br><span class="line">      it-&gt;second = make_pair(pvit, peit);</span><br><span class="line">    &#125; <span class="keyword">else</span></span><br><span class="line">      keymap.erase(it);</span><br><span class="line">    vit-&gt;second.erase(eit);</span><br><span class="line">    <span class="keyword">if</span> (vit-&gt;second.empty())</span><br><span class="line">      vallist.erase(vit);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="built_in">string</span> <span class="title">getMaxKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> vallist.empty() ? <span class="string">""</span> : vallist.back().second.front();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="built_in">string</span> <span class="title">getMinKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> vallist.empty() ? <span class="string">""</span> : vallist.front().second.front();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//作者：sinstar</span></span><br><span class="line"><span class="comment">//链接：https://leetcode-cn.com/problems/all-oone-data-structure/solution/shi-zi-lian-biao-ha-xi-biao-quan-o1-by-sinstar/</span></span><br><span class="line"><span class="comment">//来源：力扣（LeetCode）</span></span><br><span class="line"><span class="comment">//著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span></span><br></pre></td></tr></table></figure>
<h5 id="法四-o-1-解法"><a class="header-anchor" href="#法四-o-1-解法">¶</a>法四 O(1)解法</h5>
<p>&amp;esmp; 借鉴了https://leetcode.com/problems/insert-delete-getrandom-o1-duplicates-allowed/ 中的O(1)vector，实现key插入删除为O(1)复杂度的词频vector。代码里的DLList维护的是词频值的双向链表，是为了方便O(1)时间获取最大最小词频值。其实不要这个双向链表，也是可以进行正常的插入删除的，不过在获取最大最小词频对应的key时，需要遍历value_freq，因此为了O(1)获得最大最小需要这个双向链表。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">DLNode</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> freq;</span><br><span class="line">    DLNode* prev;</span><br><span class="line">    DLNode* next;</span><br><span class="line">    DLNode() : freq(<span class="number">0</span>), prev(<span class="literal">nullptr</span>), next(<span class="literal">nullptr</span>) &#123;&#125;</span><br><span class="line">    DLNode(<span class="keyword">int</span> f) : freq(f), prev(<span class="literal">nullptr</span>), next(<span class="literal">nullptr</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">DLList</span> &#123;</span></span><br><span class="line">    DLNode* head;</span><br><span class="line">    DLNode* tail;</span><br><span class="line">    DLList() &#123;</span><br><span class="line">        head = <span class="keyword">new</span> DLNode();</span><br><span class="line">        tail = <span class="keyword">new</span> DLNode();</span><br><span class="line">        head-&gt;next = tail;</span><br><span class="line">        tail-&gt;prev = head;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">erase</span><span class="params">(DLNode* node)</span> </span>&#123;</span><br><span class="line">        node-&gt;next-&gt;prev = node-&gt;prev;</span><br><span class="line">        node-&gt;prev-&gt;next = node-&gt;next;</span><br><span class="line">        <span class="keyword">delete</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(DLNode* left, DLNode* right, DLNode* node)</span> </span>&#123;</span><br><span class="line">        left-&gt;next = node;</span><br><span class="line">        right-&gt;prev = node;</span><br><span class="line">        node-&gt;prev = left;</span><br><span class="line">        node-&gt;next = right;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getMaxFreq</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> tail-&gt;prev-&gt;freq;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getMinFreq</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> head-&gt;next-&gt;freq;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AllOne</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    DLList* dl;</span><br><span class="line">    <span class="built_in">unordered_map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; value_freq;<span class="comment">//单词-&gt;词频</span></span><br><span class="line">    <span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &gt; freq_values;<span class="comment">//词频-&gt;该词频下的所有单词的vector数组</span></span><br><span class="line">    <span class="built_in">unordered_map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; value_index;<span class="comment">//单词-&gt;在词频数组中的下标</span></span><br><span class="line">    <span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, DLNode*&gt; freq_node;<span class="comment">//词频-&gt;在双链表中的节点地址</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">incrKey</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (value_freq.count(key) == <span class="number">0</span>) &#123;</span><br><span class="line">            value_freq[key] = <span class="number">1</span>;</span><br><span class="line">            freq_values[<span class="number">1</span>].push_back(key);</span><br><span class="line">            value_index[key] = freq_values[<span class="number">1</span>].size() - <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// remove old info</span></span><br><span class="line">            <span class="keyword">int</span> freq = value_freq[key];</span><br><span class="line">            <span class="keyword">int</span> ind = value_index[key];</span><br><span class="line">            <span class="built_in">string</span> tail_key = freq_values[freq].back();</span><br><span class="line">            <span class="keyword">if</span>(tail_key!=key)&#123;</span><br><span class="line">                freq_values[freq][ind] = tail_key;</span><br><span class="line">                value_index[tail_key] = ind;</span><br><span class="line">            &#125;</span><br><span class="line">            freq_values[freq].pop_back();</span><br><span class="line">            <span class="comment">// add new info</span></span><br><span class="line">            ++value_freq[key];</span><br><span class="line">            ++freq;</span><br><span class="line">            freq_values[freq].push_back(key);</span><br><span class="line">            value_index[key] = freq_values[freq].size() - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">decrKey</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (value_freq.count(key) == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> freq = value_freq[key];</span><br><span class="line">        <span class="keyword">int</span> ind = value_index[key];</span><br><span class="line">        <span class="built_in">string</span> tail_key = freq_values[freq].back();</span><br><span class="line">        <span class="keyword">if</span>(tail_key!=key)&#123;</span><br><span class="line">            freq_values[freq][ind] = tail_key;</span><br><span class="line">            value_index[tail_key] = ind;</span><br><span class="line">        &#125;</span><br><span class="line">        freq_values[freq].pop_back();</span><br><span class="line">        <span class="comment">// update info</span></span><br><span class="line">        --freq;</span><br><span class="line">        <span class="keyword">if</span> (freq == <span class="number">0</span>) &#123;</span><br><span class="line">            value_freq.erase(key);</span><br><span class="line">            value_index.erase(key);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            value_freq[key] = freq;</span><br><span class="line">            freq_values[freq].push_back(key);</span><br><span class="line">            value_index[key] = freq_values[freq].size() - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateFreq</span><span class="params">(<span class="keyword">int</span> old_freq, <span class="keyword">int</span> d)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> new_freq = old_freq + d;</span><br><span class="line">        <span class="keyword">auto</span> cur=freq_node[old_freq];</span><br><span class="line">        <span class="keyword">auto</span> right = d==<span class="number">1</span>?cur-&gt;next:cur;</span><br><span class="line">        <span class="keyword">auto</span> left = d==<span class="number">1</span>?cur:cur-&gt;prev;</span><br><span class="line">        <span class="keyword">if</span> (freq_node.count(new_freq) == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">auto</span> node = <span class="keyword">new</span> DLNode(new_freq);</span><br><span class="line">            freq_node[new_freq] = node;</span><br><span class="line">            dl-&gt;add(left, right, node);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (old_freq != <span class="number">0</span> &amp;&amp; freq_values[old_freq].empty()) &#123;</span><br><span class="line">            dl-&gt;erase(cur);</span><br><span class="line">            freq_node.erase(old_freq);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">getValueofFreq</span><span class="params">(<span class="keyword">int</span> freq)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (freq == <span class="number">0</span> || freq_values[freq].empty()) <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">return</span> freq_values[freq][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/** Initialize your data structure here. */</span></span><br><span class="line">    AllOne() &#123;</span><br><span class="line">        dl = <span class="keyword">new</span> DLList();</span><br><span class="line">        freq_node[<span class="number">0</span>] = dl-&gt;head;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/** Inserts a new key &lt;Key&gt; with value 1. Or increments an existing key by 1. */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">inc</span><span class="params">(<span class="built_in">string</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> old_freq = value_freq.count(key) ? value_freq[key] : <span class="number">0</span>;</span><br><span class="line">        incrKey(key);</span><br><span class="line">        updateFreq(old_freq, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Decrements an existing key by 1. If Key's value is 1, remove it from the data structure. */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dec</span><span class="params">(<span class="built_in">string</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (value_freq.count(key) == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> old_freq = value_freq[key];</span><br><span class="line">        decrKey(key);</span><br><span class="line">        updateFreq(old_freq,<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Returns one of the keys with maximal value. */</span></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">getMaxKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getValueofFreq(dl-&gt;getMaxFreq());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Returns one of the keys with Minimal value. */</span></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">getMinKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getValueofFreq(dl-&gt;getMinFreq());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/leetcode/" rel="tag"><i class="fa fa-tag"></i> leetcode</a>
          
            <a href="/tags/hashtable/" rel="tag"><i class="fa fa-tag"></i> hashtable</a>
          
            <a href="/tags/design/" rel="tag"><i class="fa fa-tag"></i> design</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/01/13/630-Course-Schedule-III/" rel="next" title="630. Course Schedule III">
                <i class="fa fa-chevron-left"></i> 630. Course Schedule III
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/01/13/1005-Maximize-Sum-Of-Array-After-K-Negations/" rel="prev" title="1005. Maximize Sum Of Array After K Negations">
                1005. Maximize Sum Of Array After K Negations <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">lidanyang</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">441</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">115</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/lidanyang" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:1261727840@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#432-all-o-one-data-structure"><span class="nav-number">1.</span> <span class="nav-text">¶[432. All O`one Data Structure]</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#solution"><span class="nav-number">1.1.</span> <span class="nav-text">¶Solution</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#法一-非o-1-解法"><span class="nav-number">1.1.1.</span> <span class="nav-text">¶法一 非O(1)解法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#法二-非o-1-解法"><span class="nav-number">1.1.2.</span> <span class="nav-text">¶法二 非O(1)解法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#法三-o-1-解法"><span class="nav-number">1.1.3.</span> <span class="nav-text">¶法三 O(1)解法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#法四-o-1-解法"><span class="nav-number">1.1.4.</span> <span class="nav-text">¶法四 O(1)解法</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lidanyang</span>

  

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Gemini</a> v6.0.0</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.0"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  


  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=6.0.0"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=6.0.0"></script>


  

</body>
</html>
