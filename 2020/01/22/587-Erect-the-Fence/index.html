<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.0.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.0" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="分类">
<meta property="og:url" content="http://yoursite.com/categories/index.html">
<meta property="og:site_name" content="Just a blog">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-05-28T06:22:34.105Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="分类">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.0.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/categories/">





  <title>587. Erect the Fence | Just a blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Just a blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/22/587-Erect-the-Fence/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">587. Erect the Fence</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-22T23:17:38+08:00">2020-01-22</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-01-23T00:56:06+08:00">2020-01-23</time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="587-erect-the-fence"><a class="header-anchor" href="#587-erect-the-fence">¶</a><a href="https://leetcode.com/problems/erect-the-fence/" target="_blank" rel="noopener">587. Erect the Fence</a></h3>
<p>Difficulty: <strong>Hard</strong></p>
<p>There are some trees, where each tree is represented by (x,y) coordinate in a two-dimensional garden. Your job is to fence the entire garden using the <strong>minimum length</strong> of rope as it is expensive. The garden is well fenced only if all the trees are enclosed. Your task is to help find the coordinates of trees which are exactly located on the fence perimeter.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: [[1,1],[2,2],[2,0],[2,4],[3,3],[4,2]]</span><br><span class="line">Output: [[1,1],[2,0],[4,2],[3,3],[2,4]]</span><br><span class="line">Explanation:</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Input: [[1,2],[2,2],[4,2]]</span><br><span class="line">Output: [[1,2],[2,2],[4,2]]</span><br><span class="line">Explanation:</span><br><span class="line"></span><br><span class="line">Even you only have trees in a line, you need to use rope to enclose them.</span><br></pre></td></tr></table></figure>
<p><strong>Note:</strong></p>
<ol>
<li>All trees should be enclosed together. You cannot cut the rope to enclose trees that will separate them in more than one group.</li>
<li>All input integers will range from 0 to 100.</li>
<li>The garden has at least one tree.</li>
<li>All coordinates are distinct.</li>
<li>Input points have <strong>NO</strong> order. No order required for output.</li>
<li>input types have been changed on April 15, 2019. Please reset to default code definition to get new method signature.</li>
</ol>
<h4 id="solution"><a class="header-anchor" href="#solution">¶</a>Solution</h4>
<h5 id="法一-graham-scan"><a class="header-anchor" href="#法一-graham-scan">¶</a>法一 Graham Scan</h5>
<p>  选一个最左下的点作为轴，其他每个点按照以该点为轴的弧度角从小到大的顺序，如果角相同，则按照距离从近到远的顺序。然后想象一把以该点为轴的扇子，那么扇子边缘上的点肯定在凸包上，从扇子的下边缘往上边缘一个一个点检查，符合叉积关系的就入栈，否则出栈直到满足叉积关系。最后记得扇子的上边缘上的点要倒过来，因为上边缘从近到远检查点时，远点会把近点弹出栈，所以需要把这些弹出的点在push回去。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;v1, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;v2, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;v3)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> x1=v1[<span class="number">0</span>]-v2[<span class="number">0</span>], y1=v1[<span class="number">1</span>]-v2[<span class="number">1</span>], x2=v3[<span class="number">0</span>]-v1[<span class="number">0</span>], y2=v3[<span class="number">1</span>]-v1[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">return</span> x1*y2-x2*y1&gt;=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; outerTrees(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; points) &#123;</span><br><span class="line">        sort(points.begin(), points.end());</span><br><span class="line">        <span class="keyword">int</span> x = points[<span class="number">0</span>][<span class="number">0</span>], y=points[<span class="number">0</span>][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(points.size() &lt;= <span class="number">3</span>) <span class="keyword">return</span> points;</span><br><span class="line">        sort(points.begin()+<span class="number">1</span>, points.end(), [&amp;](<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;v1, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;v2)&#123;</span><br><span class="line">            <span class="keyword">if</span>((v1[<span class="number">0</span>]-x)*(v2[<span class="number">1</span>]-y) &gt; (v1[<span class="number">1</span>]-y)*(v2[<span class="number">0</span>]-x)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>((v1[<span class="number">0</span>]-x)*(v2[<span class="number">1</span>]-y) == (v1[<span class="number">1</span>]-y)*(v2[<span class="number">0</span>]-x))</span><br><span class="line">                <span class="keyword">return</span> (v1[<span class="number">0</span>]-x)*(v1[<span class="number">0</span>]-x)+(v1[<span class="number">1</span>]-y)*(v1[<span class="number">1</span>]-y)&lt;(v2[<span class="number">0</span>]-x)*(v2[<span class="number">0</span>]-x)+(v2[<span class="number">1</span>]-y)*(v2[<span class="number">1</span>]-y);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; ans;</span><br><span class="line">        ans.push_back(&#123;x, y&#125;);<span class="comment">//扇子的轴</span></span><br><span class="line">        ans.push_back(&#123;points[<span class="number">1</span>][<span class="number">0</span>], points[<span class="number">1</span>][<span class="number">1</span>]&#125;);<span class="comment">//扇子下边缘最靠近轴的点</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;points.size();++i)&#123;</span><br><span class="line">            <span class="keyword">while</span>(ans.size() &gt;= <span class="number">2</span>&amp;&amp;!check(ans[ans.size()<span class="number">-1</span>], ans[ans.size()<span class="number">-2</span>], points[i]))  ans.pop_back();</span><br><span class="line">            ans.push_back(points[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//把上边缘被错误弹出的点加回来</span></span><br><span class="line">        x=ans.back()[<span class="number">0</span>],y=ans.back()[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=points.size()<span class="number">-2</span>;i&gt;=<span class="number">0</span>;--i)&#123;</span><br><span class="line">            <span class="keyword">if</span>((points[i][<span class="number">0</span>]-points[<span class="number">0</span>][<span class="number">0</span>])*(y-points[i][<span class="number">1</span>])==(x-points[i][<span class="number">0</span>])*(points[i][<span class="number">1</span>]-points[<span class="number">0</span>][<span class="number">1</span>]))&#123;</span><br><span class="line">                ans.push_back(points[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>官方java版:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">orientation</span><span class="params">(Point p, Point q, Point r)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">distance</span><span class="params">(Point p, Point q)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (p.x - q.x) * (p.x - q.x) + (p.y - q.y) * (p.y - q.y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Point <span class="title">bottomLeft</span><span class="params">(Point[] points)</span> </span>&#123;</span><br><span class="line">        Point bottomLeft = points[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (Point p: points)</span><br><span class="line">            <span class="keyword">if</span> (p.y &lt; bottomLeft.y)</span><br><span class="line">                bottomLeft = p;</span><br><span class="line">        <span class="keyword">return</span> bottomLeft;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> List &lt; Point &gt; outerTrees(Point[] points) &#123;</span><br><span class="line">        <span class="keyword">if</span> (points.length &lt;= <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> Arrays.asList(points);</span><br><span class="line">        Point bm = bottomLeft(points);</span><br><span class="line">        Arrays.sort(points, <span class="keyword">new</span> Comparator &lt; Point &gt; () &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Point p, Point q)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">double</span> diff = orientation(bm, p, q) - orientation(bm, q, p);</span><br><span class="line">                <span class="keyword">if</span> (diff == <span class="number">0</span>)</span><br><span class="line">                    <span class="keyword">return</span> distance(bm, p) - distance(bm, q);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="keyword">return</span> diff &gt; <span class="number">0</span> ? <span class="number">1</span> : -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">int</span> i = points.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &gt;= <span class="number">0</span> &amp;&amp; orientation(bm, points[points.length - <span class="number">1</span>], points[i]) == <span class="number">0</span>)</span><br><span class="line">            i--;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> l = i + <span class="number">1</span>, h = points.length - <span class="number">1</span>; l &lt; h; l++, h--) &#123;</span><br><span class="line">            Point temp = points[l];</span><br><span class="line">            points[l] = points[h];</span><br><span class="line">            points[h] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">        Stack &lt; Point &gt; stack = <span class="keyword">new</span> Stack &lt; &gt; ();</span><br><span class="line">        stack.push(points[<span class="number">0</span>]);</span><br><span class="line">        stack.push(points[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">2</span>; j &lt; points.length; j++) &#123;</span><br><span class="line">            Point top = stack.pop();</span><br><span class="line">            <span class="keyword">while</span> (orientation(stack.peek(), top, points[j]) &gt; <span class="number">0</span>)</span><br><span class="line">                top = stack.pop();</span><br><span class="line">            stack.push(top);</span><br><span class="line">            stack.push(points[j]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ArrayList &lt; &gt; (stack);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="法二-jarvis-algorithm"><a class="header-anchor" href="#法二-jarvis-algorithm">¶</a>法二 Jarvis Algorithm</h5>
<p>  每次以当前点为轴找逆时针方向最大角的点，然后再以该点做新轴。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">cross</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;p1, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;p2, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;p3)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (p3[<span class="number">0</span>]-p1[<span class="number">0</span>])*(p2[<span class="number">1</span>]-p1[<span class="number">1</span>])-(p3[<span class="number">1</span>]-p1[<span class="number">1</span>])*(p2[<span class="number">0</span>]-p1[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">onLine</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;p1, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;p2, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;p3)</span></span>&#123;</span><br><span class="line">        <span class="keyword">bool</span> a=(p2[<span class="number">0</span>]&gt;=p1[<span class="number">0</span>]&amp;&amp;p3[<span class="number">0</span>]&gt;=p2[<span class="number">0</span>])||(p2[<span class="number">0</span>]&lt;=p1[<span class="number">0</span>]&amp;&amp;p3[<span class="number">0</span>]&lt;=p2[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">bool</span> b=(p2[<span class="number">1</span>]&gt;=p1[<span class="number">1</span>]&amp;&amp;p3[<span class="number">1</span>]&gt;=p2[<span class="number">1</span>])||(p2[<span class="number">1</span>]&lt;=p1[<span class="number">1</span>]&amp;&amp;p3[<span class="number">1</span>]&lt;=p2[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">return</span> a&amp;&amp;b; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; outerTrees(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; points) &#123;</span><br><span class="line">        <span class="keyword">int</span> s=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;points.size();++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(points[i][<span class="number">0</span>]&lt;points[s][<span class="number">0</span>]||(points[i][<span class="number">0</span>]==points[s][<span class="number">0</span>]&amp;&amp;points[i][<span class="number">1</span>]&lt;points[s][<span class="number">1</span>])) </span><br><span class="line">                s = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; ans;</span><br><span class="line">        <span class="built_in">unordered_set</span>&lt;<span class="keyword">int</span>&gt; ss;</span><br><span class="line">        <span class="comment">// ans.push_back(points[s]);</span></span><br><span class="line">        <span class="keyword">int</span> p=s;</span><br><span class="line">        <span class="keyword">do</span>&#123;</span><br><span class="line">            <span class="keyword">int</span> q=(p+<span class="number">1</span>)%points.size();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;points.size();++i)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i==p||i==q) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">int</span> t=cross(points[p], points[i], points[q]);</span><br><span class="line">                <span class="keyword">if</span>(t&lt;<span class="number">0</span>||</span><br><span class="line">                  (t==<span class="number">0</span>&amp;&amp;onLine(points[p], points[q], points[i]))) </span><br><span class="line">                    q=i;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;points.size();++i)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i==p||i==q) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span>(cross(points[p], points[i], points[q])==<span class="number">0</span>&amp;&amp;onLine(points[p], points[i], points[q]))&#123;</span><br><span class="line">                    <span class="keyword">if</span>(ss.count(i)!=<span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                    ss.insert(i);</span><br><span class="line">                    ans.push_back(points[i]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            ans.push_back(points[q]);</span><br><span class="line">            ss.insert(q);</span><br><span class="line">            p=q;</span><br><span class="line">        &#125;<span class="keyword">while</span>(p!=s);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="法三-monotone-chain"><a class="header-anchor" href="#法三-monotone-chain">¶</a>法三 monotone chain</h5>
<p>  类似于法一，先排序，然后正着求一遍上凸包，然后反着求一遍下凸包，记得去重。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">cross</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;p1, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;p2, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;p3)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (p3[<span class="number">0</span>]-p2[<span class="number">0</span>])*(p2[<span class="number">1</span>]-p1[<span class="number">1</span>])-(p3[<span class="number">1</span>]-p2[<span class="number">1</span>])*(p2[<span class="number">0</span>]-p1[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; outerTrees(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; points) &#123;</span><br><span class="line">        sort(points.begin(), points.end());</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; st;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; points.size() ; ++i)&#123;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span>(st.size()&gt;=<span class="number">2</span>&amp;&amp;cross(points[st[st.size()<span class="number">-2</span>]], points[st[st.size()<span class="number">-1</span>]], points[i])&lt;<span class="number">0</span>) </span><br><span class="line">                st.pop_back();</span><br><span class="line">            </span><br><span class="line">            st.push_back(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = points.size() - <span class="number">1</span>; i &gt;= <span class="number">0</span> ; --i)&#123;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span>(st.size()&gt;=<span class="number">2</span>&amp;&amp;cross(points[st[st.size()<span class="number">-2</span>]], points[st[st.size()<span class="number">-1</span>]], points[i])&lt;<span class="number">0</span>) </span><br><span class="line">                st.pop_back();</span><br><span class="line">            </span><br><span class="line">            st.push_back(i);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">unordered_set</span>&lt;<span class="keyword">int</span>&gt; s;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:st) s.insert(x);</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; ans;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:s) ans.push_back(points[x]);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>自定义点类型C++</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">P</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    P(<span class="keyword">int</span> x, <span class="keyword">int</span> y) : x(x), y(y) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> P &amp;a, <span class="keyword">const</span> P &amp;b) &#123;</span><br><span class="line">    <span class="keyword">if</span> (a.x != b.x) <span class="keyword">return</span> a.x &lt; b.x;</span><br><span class="line">    <span class="keyword">return</span> a.y &lt; b.y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">P <span class="keyword">operator</span>-(<span class="keyword">const</span> P &amp;a, <span class="keyword">const</span> P &amp;b) &#123; <span class="keyword">return</span> P(a.x - b.x, a.y - b.y); &#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Cross</span><span class="params">(<span class="keyword">const</span> P &amp;a, <span class="keyword">const</span> P &amp;b)</span> </span>&#123; <span class="keyword">return</span> a.x * b.y - a.y * b.x; &#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">LeftTurn</span><span class="params">(<span class="keyword">const</span> P &amp;a, <span class="keyword">const</span> P &amp;b, <span class="keyword">const</span> P &amp;c)</span> </span>&#123; <span class="keyword">return</span> Cross(b - a, c - b) &gt; <span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; outerTrees(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; points) &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> n = points.size();</span><br><span class="line">        <span class="built_in">vector</span>&lt;P&gt; pts;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;p : points) pts.emplace_back(p[<span class="number">0</span>], p[<span class="number">1</span>]);</span><br><span class="line">        sort(pts.begin(), pts.end());</span><br><span class="line">        <span class="built_in">vector</span>&lt;P&gt; top, bot;</span><br><span class="line">        <span class="keyword">for</span> (P p : pts) &#123;</span><br><span class="line">            <span class="keyword">int</span> k;</span><br><span class="line">            <span class="keyword">while</span> ((k = top.size()) &gt; <span class="number">1</span> &amp;&amp; LeftTurn(top[k - <span class="number">2</span>], top[k - <span class="number">1</span>], p))</span><br><span class="line">                top.pop_back();</span><br><span class="line">            top.push_back(p);</span><br><span class="line">            <span class="keyword">while</span> ((k = bot.size()) &gt; <span class="number">1</span> &amp;&amp; LeftTurn(p, bot[k - <span class="number">1</span>], bot[k - <span class="number">2</span>]))</span><br><span class="line">                bot.pop_back();</span><br><span class="line">            bot.push_back(p);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">set</span>&lt;P&gt; ans;</span><br><span class="line">        <span class="keyword">for</span> (P p : top) ans.insert(p);</span><br><span class="line">        <span class="keyword">for</span> (P p : bot) ans.insert(p);</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; ans2;</span><br><span class="line">        <span class="keyword">for</span> (P p : ans) ans2.push_back(&#123;p.x, p.y&#125;);</span><br><span class="line">        <span class="keyword">return</span> ans2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/01/22/514-Freedom-Trail/" rel="next" title="514. Freedom Trail">
                <i class="fa fa-chevron-left"></i> 514. Freedom Trail
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/01/23/895-Maximum-Frequency-Stack/" rel="prev" title="895. Maximum Frequency Stack">
                895. Maximum Frequency Stack <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">lidanyang</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">442</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">115</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/lidanyang" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:1261727840@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#587-erect-the-fence"><span class="nav-number">1.</span> <span class="nav-text">¶587. Erect the Fence</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#solution"><span class="nav-number">1.1.</span> <span class="nav-text">¶Solution</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#法一-graham-scan"><span class="nav-number">1.1.1.</span> <span class="nav-text">¶法一 Graham Scan</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#法二-jarvis-algorithm"><span class="nav-number">1.1.2.</span> <span class="nav-text">¶法二 Jarvis Algorithm</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#法三-monotone-chain"><span class="nav-number">1.1.3.</span> <span class="nav-text">¶法三 monotone chain</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lidanyang</span>

  

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Gemini</a> v6.0.0</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.0"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  


  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=6.0.0"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=6.0.0"></script>


  

</body>
</html>
