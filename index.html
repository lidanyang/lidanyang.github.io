<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.0.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.0" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="分类">
<meta property="og:url" content="http://yoursite.com/categories/index.html">
<meta property="og:site_name" content="Just a blog">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-05-28T06:22:34.105Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="分类">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.0.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/categories/">





  <title>Just a blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Just a blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/07/06/TCP-IP的相关博客/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/06/TCP-IP的相关博客/" itemprop="url">TCP/IP的相关博客和文章</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-07-06T16:22:28+08:00">2020-07-06</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-07-06T22:28:11+08:00">2020-07-06</time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>关于SO_LINGER选项和RST攻击</li>
</ol>
<p><a href="https://segmentfault.com/a/1190000012345710" target="_blank" rel="noopener">https://segmentfault.com/a/1190000012345710</a></p>
<ol start="2">
<li>为什么TCP“不可靠”?</li>
</ol>
<p>在看陈硕的网络编程视频中看到的关于TCP使用时数据传输不完整的一个小问题，视频中给出了下面的文章参考：</p>
<p><a href="https://blog.netherlabs.nl/articles/2009/01/18/the-ultimate-so_linger-page-or-why-is-my-tcp-not-reliable" target="_blank" rel="noopener">https://blog.netherlabs.nl/articles/2009/01/18/the-ultimate-so_linger-page-or-why-is-my-tcp-not-reliable</a></p>
<p>回复rst报文的情况:</p>
<blockquote>
<p>“A host MAY implement a ‘half-duplex’ TCP close sequence, so that an application that has called CLOSE cannot continue to read data from the connection. If such a host issues a CLOSE call while received data is still pending in TCP, or if new data is received after CLOSE is called, its TCP SHOULD send a RST to show that data was lost.”</p>
</blockquote>
<ol start="3">
<li>关于shutdown调用</li>
</ol>
<p><a href="https://blog.csdn.net/cs1462155255/article/details/77991006" target="_blank" rel="noopener">https://blog.csdn.net/cs1462155255/article/details/77991006</a></p>
<p><strong>“默认情况下，close()/closesocket() 会立即向网络中发送FIN包，不管输出缓冲区中是否还有数据，而shutdown() 会等输出缓冲区中的数据传输完毕再发送FIN包。也就意味着，调用 close()/closesocket() 将丢失输出缓冲区中的数据，而调用 shutdown() 不会”</strong></p>
<ol start="4">
<li>关于SO_REUSEPORT和SO_REUSEADDR选项</li>
</ol>
<p><a href="https://blog.csdn.net/u010144805/article/details/78579528" target="_blank" rel="noopener">https://blog.csdn.net/u010144805/article/details/78579528</a></p>
<p><a href="https://www.cnblogs.com/Anker/p/7076537.html" target="_blank" rel="noopener">https://www.cnblogs.com/Anker/p/7076537.html</a></p>
<ol start="5">
<li>关于nagle算法和cork算法</li>
</ol>
<p><a href="https://baike.baidu.com/item/Nagle%E7%AE%97%E6%B3%95/5645172?fr=aladdin" target="_blank" rel="noopener">https://baike.baidu.com/item/Nagle算法/5645172?fr=aladdin</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/26/模拟退火/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/26/模拟退火/" itemprop="url">模拟退火</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-26T00:35:00+08:00">2020-03-26</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-03-26T00:44:35+08:00">2020-03-26</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/算法/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/算法/概率/" itemprop="url" rel="index">
                    <span itemprop="name">概率</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="博客"><a class="header-anchor" href="#博客">¶</a>博客</h4>
<p><a href="https://www.luogu.com.cn/blog/m-sea/qian-tan-SA" target="_blank" rel="noopener">https://www.luogu.com.cn/blog/m-sea/qian-tan-SA</a></p>
<p><a href="https://blog.csdn.net/xbb224007/article/details/82874690" target="_blank" rel="noopener">https://blog.csdn.net/xbb224007/article/details/82874690</a></p>
<h4 id="视频"><a class="header-anchor" href="#视频">¶</a>视频</h4>
<p><a href="https://www.bilibili.com/video/BV127411w7nu?from=search&amp;seid=2261047289504407274" target="_blank" rel="noopener">https://www.bilibili.com/video/BV127411w7nu?from=search&amp;seid=2261047289504407274</a></p>
<h4 id="例题"><a class="header-anchor" href="#例题">¶</a>例题</h4>
<p><a href="https://ac.nowcoder.com/acm/problem/19961" target="_blank" rel="noopener">均分数据</a></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">30</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">double</span> ans, now, f[maxn][<span class="number">8</span>], ave;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m, a[maxn],tot, sum[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">double</span> <span class="title">pow2</span><span class="params">(<span class="keyword">double</span> x)</span></span>&#123; <span class="keyword">return</span> x*x; &#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dp</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) sum[i] = sum[i<span class="number">-1</span>] + a[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; ++i) <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= n; ++j) f[i][j] = <span class="number">0x3f</span>;</span><br><span class="line">    f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i&lt;=n;++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= min(i, m); ++j)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; i; ++k)&#123;</span><br><span class="line">                f[i][j] = min(f[i][j], f[k][j<span class="number">-1</span>]+pow2(sum[i] - sum[k] - ave));</span><br><span class="line">            &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sqrt</span>((<span class="number">1.0</span>*f[n][m])/m);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sa</span><span class="params">(<span class="keyword">double</span> T)</span></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> eps = <span class="number">1e-6</span>;</span><br><span class="line">    <span class="keyword">while</span>(T &gt; eps)&#123;</span><br><span class="line">        <span class="keyword">int</span> x = rand()%n+<span class="number">1</span>, y = rand()%n+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(x == y) <span class="keyword">continue</span>;</span><br><span class="line">        swap(a[x], a[y]);</span><br><span class="line">        <span class="keyword">double</span> now = dp(), delta = now - ans;</span><br><span class="line">        <span class="keyword">if</span>(delta &lt; <span class="number">0</span> || <span class="built_in">exp</span>(-delta/T) * RAND_MAX &gt; rand())  ans = now;</span><br><span class="line">        <span class="keyword">else</span> swap(a[x], a[y]);</span><br><span class="line">        T *= <span class="number">0.997</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]), tot += a[i];</span><br><span class="line">    ave = (tot*<span class="number">1.0</span>)/m;</span><br><span class="line">    ans = dp(); </span><br><span class="line">    sa(<span class="number">2333</span>);<span class="comment">//simulate annel</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.2lf\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="核心逻辑"><a class="header-anchor" href="#核心逻辑">¶</a>核心逻辑</h4>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sa</span><span class="params">(<span class="keyword">double</span> T)</span></span>&#123;<span class="comment">//T为初始温度</span></span><br><span class="line">    <span class="keyword">double</span> eps = <span class="number">1e-6</span>;<span class="comment">//eps为终止温度</span></span><br><span class="line">    <span class="keyword">while</span>(T &gt; eps)&#123;</span><br><span class="line">        <span class="comment">//得到一个扰动的值</span></span><br><span class="line">        <span class="keyword">int</span> x = rand()%n+<span class="number">1</span>, y = rand()%n+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(x == y) <span class="keyword">continue</span>;</span><br><span class="line">        swap(a[x], a[y]);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">double</span> now = dp(), delta = now - ans;</span><br><span class="line">        <span class="comment">//if(!better() || exp(-delta/T) &gt; random(0~1))&#123;</span></span><br><span class="line">        <span class="comment">//	或为更优解或者以越来越低的概率exp(-delta/T)选择该差解</span></span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line">        <span class="comment">//else&#123;</span></span><br><span class="line">        <span class="comment">//	拒绝差解（如果改变了状态，还需要还原）</span></span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line">        <span class="keyword">if</span>(delta &lt; <span class="number">0</span> || <span class="built_in">exp</span>(-delta/T) * RAND_MAX &gt; rand())  ans = now;</span><br><span class="line">        <span class="keyword">else</span> swap(a[x], a[y]);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//降温</span></span><br><span class="line">        T *= <span class="number">0.997</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>调参时，调整降温系数很重要！！！</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/25/最小圆覆盖/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/25/最小圆覆盖/" itemprop="url">最小圆覆盖</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-25T17:13:00+08:00">2020-03-25</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-03-26T00:34:56+08:00">2020-03-26</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/算法/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/算法/模板/" itemprop="url" rel="index">
                    <span itemprop="name">模板</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>相关博客</p>
<p><a href="https://www.mina.moe/archives/10323" target="_blank" rel="noopener">https://www.mina.moe/archives/10323</a></p>
<p><a href="https://blog.csdn.net/wu_tongtong/article/details/79362339" target="_blank" rel="noopener">https://blog.csdn.net/wu_tongtong/article/details/79362339</a></p>
<p>模板</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">vec</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">double</span> x, y;</span><br><span class="line">    vec (<span class="keyword">const</span> <span class="keyword">double</span>&amp; x0 = <span class="number">0</span>, <span class="keyword">const</span> <span class="keyword">double</span>&amp; y0 = <span class="number">0</span>) : x(x0), y(y0) &#123;&#125;</span><br><span class="line">    vec <span class="keyword">operator</span> + (<span class="keyword">const</span> vec&amp; t) <span class="keyword">const</span> &#123;<span class="keyword">return</span> vec(x+t.x, y+t.y);&#125;</span><br><span class="line">    vec <span class="keyword">operator</span> - (<span class="keyword">const</span> vec&amp; t) <span class="keyword">const</span> &#123;<span class="keyword">return</span> vec(x-t.x, y-t.y);&#125;</span><br><span class="line">    vec <span class="keyword">operator</span> * (<span class="keyword">const</span> <span class="keyword">double</span>&amp; t) <span class="keyword">const</span> &#123;<span class="keyword">return</span> vec(x*t, y*t);&#125;</span><br><span class="line">    vec <span class="keyword">operator</span> / (<span class="keyword">const</span> <span class="keyword">double</span>&amp; t) <span class="keyword">const</span> &#123;<span class="keyword">return</span> vec(x/t, y/t);&#125;</span><br><span class="line">    <span class="function"><span class="keyword">const</span> <span class="keyword">double</span> <span class="title">len2</span> <span class="params">()</span> <span class="keyword">const</span> </span>&#123;<span class="keyword">return</span> x*x + y*y;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">const</span> <span class="keyword">double</span> <span class="title">len</span> <span class="params">()</span> <span class="keyword">const</span> </span>&#123;<span class="keyword">return</span> <span class="built_in">sqrt</span>(len2());&#125;</span><br><span class="line">    <span class="function">vec <span class="title">norm</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;<span class="keyword">return</span> *<span class="keyword">this</span>/len();&#125;</span><br><span class="line">    <span class="function">vec <span class="title">rotate_90_c</span> <span class="params">()</span> </span>&#123;<span class="keyword">return</span> vec(y, -x);&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dot</span><span class="params">(<span class="keyword">const</span> vec&amp; a, <span class="keyword">const</span> vec&amp; b)</span> </span>&#123;<span class="keyword">return</span> a.x*b.x + a.y*b.y;&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">crs</span><span class="params">(<span class="keyword">const</span> vec&amp; a, <span class="keyword">const</span> vec&amp; b)</span> </span>&#123;<span class="keyword">return</span> a.x*b.y - a.y*b.x;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">vec <span class="title">lin_lin_int</span><span class="params">(<span class="keyword">const</span> vec&amp; p0, <span class="keyword">const</span> vec&amp; v0, <span class="keyword">const</span> vec&amp; p1, <span class="keyword">const</span> vec&amp; v1)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> t = crs(p1-p0, v1) / crs(v0, v1);</span><br><span class="line">    <span class="keyword">return</span> p0 + v0 * t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">vec <span class="title">circle</span><span class="params">(<span class="keyword">const</span> vec&amp; a, <span class="keyword">const</span> vec&amp; b, <span class="keyword">const</span> vec&amp; c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> lin_lin_int((a+b)/<span class="number">2</span>, (b-a).rotate_90_c(), (a+c)/<span class="number">2</span>, (c-a).rotate_90_c());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line">vec pot[<span class="number">100005</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) <span class="built_in">scanf</span>(<span class="string">"%lf%lf"</span>, &amp;pot[i].x, &amp;pot[i].y);</span><br><span class="line">    random_shuffle(pot+<span class="number">1</span>, pot+n+<span class="number">1</span>);</span><br><span class="line">    vec o;</span><br><span class="line">    <span class="keyword">double</span> r2 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>((pot[i]-o).len2() &gt; r2)</span><br><span class="line">        &#123;</span><br><span class="line">            o = pot[i], r2 = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;i; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>((pot[j]-o).len2() &gt; r2)</span><br><span class="line">                &#123;</span><br><span class="line">                    o = (pot[i]+pot[j])/<span class="number">2</span>, r2 = (pot[j]-o).len2();</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>; k&lt;j; k++)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">if</span>((pot[k]-o).len2() &gt; r2)</span><br><span class="line">                        &#123;</span><br><span class="line">                            o = circle(pot[i], pot[j], pot[k]), r2 = (pot[k]-o).len2();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.10lf\n%.10lf %.10lf\n"</span>, <span class="built_in">sqrt</span>(r2), o.x, o.y);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>代码里的向量类/点类也可以通用于其他问题</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">vec</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">double</span> x, y;</span><br><span class="line">    vec (<span class="keyword">const</span> <span class="keyword">double</span>&amp; x0 = <span class="number">0</span>, <span class="keyword">const</span> <span class="keyword">double</span>&amp; y0 = <span class="number">0</span>) : x(x0), y(y0) &#123;&#125;</span><br><span class="line">    vec <span class="keyword">operator</span> + (<span class="keyword">const</span> vec&amp; t) <span class="keyword">const</span> &#123;<span class="keyword">return</span> vec(x+t.x, y+t.y);&#125;</span><br><span class="line">    vec <span class="keyword">operator</span> - (<span class="keyword">const</span> vec&amp; t) <span class="keyword">const</span> &#123;<span class="keyword">return</span> vec(x-t.x, y-t.y);&#125;</span><br><span class="line">    vec <span class="keyword">operator</span> * (<span class="keyword">const</span> <span class="keyword">double</span>&amp; t) <span class="keyword">const</span> &#123;<span class="keyword">return</span> vec(x*t, y*t);&#125;</span><br><span class="line">    vec <span class="keyword">operator</span> / (<span class="keyword">const</span> <span class="keyword">double</span>&amp; t) <span class="keyword">const</span> &#123;<span class="keyword">return</span> vec(x/t, y/t);&#125;</span><br><span class="line">    <span class="function"><span class="keyword">const</span> <span class="keyword">double</span> <span class="title">len2</span> <span class="params">()</span> <span class="keyword">const</span> </span>&#123;<span class="keyword">return</span> x*x + y*y;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">const</span> <span class="keyword">double</span> <span class="title">len</span> <span class="params">()</span> <span class="keyword">const</span> </span>&#123;<span class="keyword">return</span> <span class="built_in">sqrt</span>(len2());&#125;</span><br><span class="line">    <span class="function">vec <span class="title">norm</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;<span class="keyword">return</span> *<span class="keyword">this</span>/len();&#125;</span><br><span class="line">    <span class="function">vec <span class="title">rotate_90_c</span> <span class="params">()</span> </span>&#123;<span class="keyword">return</span> vec(y, -x);&#125;</span><br><span class="line">&#125;;<span class="comment">//可以看做点（其实是从(0,0)开始的向量，也可以看做向量</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dot</span><span class="params">(<span class="keyword">const</span> vec&amp; a, <span class="keyword">const</span> vec&amp; b)</span> </span>&#123;<span class="keyword">return</span> a.x*b.x + a.y*b.y;&#125;<span class="comment">//点积</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">crs</span><span class="params">(<span class="keyword">const</span> vec&amp; a, <span class="keyword">const</span> vec&amp; b)</span> </span>&#123;<span class="keyword">return</span> a.x*b.y - a.y*b.x;&#125;<span class="comment">//叉积</span></span><br><span class="line"></span><br><span class="line"><span class="function">vec <span class="title">lin_lin_int</span><span class="params">(<span class="keyword">const</span> vec&amp; p0, <span class="keyword">const</span> vec&amp; v0, <span class="keyword">const</span> vec&amp; p1, <span class="keyword">const</span> vec&amp; v1)</span><span class="comment">//p0为起点，方向为v0的线和p1为起点，方向为v1的线的交点</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> t = crs(p1-p0, v1) / crs(v0, v1);</span><br><span class="line">    <span class="keyword">return</span> p0 + v0 * t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">vec <span class="title">circle</span><span class="params">(<span class="keyword">const</span> vec&amp; a, <span class="keyword">const</span> vec&amp; b, <span class="keyword">const</span> vec&amp; c)</span><span class="comment">//外切圆</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> lin_lin_int((a+b)/<span class="number">2</span>, (b-a).rotate_90_c(), (a+c)/<span class="number">2</span>, (c-a).rotate_90_c());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/24/1172-Dinner-Plate-Stacks/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/24/1172-Dinner-Plate-Stacks/" itemprop="url">1172. Dinner Plate Stacks</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-24T16:28:00+08:00">2020-03-24</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-03-24T17:50:32+08:00">2020-03-24</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1172-dinner-plate-stacks"><a class="header-anchor" href="#1172-dinner-plate-stacks">¶</a><a href="https://leetcode.com/problems/dinner-plate-stacks/" target="_blank" rel="noopener">1172. Dinner Plate Stacks</a></h3>
<p>Difficulty: <strong>Hard</strong></p>
<p>You have an infinite number of stacks arranged in a row and numbered (left to right) from 0, each of the stacks has the same maximum <code>capacity</code>.</p>
<p>Implement the <code>DinnerPlates</code> class:</p>
<ul>
<li><code>DinnerPlates(int capacity)</code> Initializes the object with the maximum <code>capacity</code> of the stacks.</li>
<li><code>void push(int val)</code> pushes the given positive integer <code>val</code> into the leftmost stack with size less than <code>capacity</code>.</li>
<li><code>int pop()</code> returns the value at the top of the rightmost non-empty stack and removes it from that stack, and returns <code>-1</code> if all stacks are empty.</li>
<li><code>int popAtStack(int index)</code> returns the value at the top of the stack with the given <code>index</code> and removes it from that stack, and returns -1 if the stack with that given <code>index</code> is empty.</li>
</ul>
<p><strong>Example:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">Input: </span><br><span class="line">[&quot;DinnerPlates&quot;,&quot;push&quot;,&quot;push&quot;,&quot;push&quot;,&quot;push&quot;,&quot;push&quot;,&quot;popAtStack&quot;,&quot;push&quot;,&quot;push&quot;,&quot;popAtStack&quot;,&quot;popAtStack&quot;,&quot;pop&quot;,&quot;pop&quot;,&quot;pop&quot;,&quot;pop&quot;,&quot;pop&quot;]</span><br><span class="line">[[2],[1],[2],[3],[4],[5],[0],[20],[21],[0],[2],[],[],[],[],[]]</span><br><span class="line">Output: </span><br><span class="line">[null,null,null,null,null,null,2,null,null,20,21,5,4,3,1,-1]</span><br><span class="line"></span><br><span class="line">Explanation: </span><br><span class="line">DinnerPlates D = DinnerPlates(2);  // Initialize with capacity = 2</span><br><span class="line">D.push(1);</span><br><span class="line">D.push(2);</span><br><span class="line">D.push(3);</span><br><span class="line">D.push(4);</span><br><span class="line">D.push(5);         // The stacks are now:  2  4</span><br><span class="line">                                           1  3  5</span><br><span class="line">                                           ﹈ ﹈ ﹈</span><br><span class="line">D.popAtStack(0);   // Returns 2\.  The stacks are now:     4</span><br><span class="line">                                                       1  3  5</span><br><span class="line">                                                       ﹈ ﹈ ﹈</span><br><span class="line">D.push(20);        // The stacks are now: 20  4</span><br><span class="line">                                           1  3  5</span><br><span class="line">                                           ﹈ ﹈ ﹈</span><br><span class="line">D.push(21);        // The stacks are now: 20  4 21</span><br><span class="line">                                           1  3  5</span><br><span class="line">                                           ﹈ ﹈ ﹈</span><br><span class="line">D.popAtStack(0);   // Returns 20\.  The stacks are now:     4 21</span><br><span class="line">                                                        1  3  5</span><br><span class="line">                                                        ﹈ ﹈ ﹈</span><br><span class="line">D.popAtStack(2);   // Returns 21\.  The stacks are now:     4</span><br><span class="line">                                                        1  3  5</span><br><span class="line">                                                        ﹈ ﹈ ﹈ </span><br><span class="line">D.pop()            // Returns 5\.  The stacks are now:      4</span><br><span class="line">                                                        1  3 </span><br><span class="line">                                                        ﹈ ﹈  </span><br><span class="line">D.pop()            // Returns 4\.  The stacks are now:   1  3 </span><br><span class="line">                                                        ﹈ ﹈   </span><br><span class="line">D.pop()            // Returns 3\.  The stacks are now:   1 </span><br><span class="line">                                                        ﹈   </span><br><span class="line">D.pop()            // Returns 1\.  There are no stacks.</span><br><span class="line">D.pop()            // Returns -1\.  There are still no stacks.</span><br></pre></td></tr></table></figure>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= capacity &lt;= 20000</code></li>
<li><code>1 &lt;= val &lt;= 20000</code></li>
<li><code>0 &lt;= index &lt;= 100000</code></li>
<li>At most <code>200000</code> calls will be made to <code>push</code>, <code>pop</code>, and <code>popAtStack</code>.</li>
</ul>
<h4 id="solution"><a class="header-anchor" href="#solution">¶</a>Solution</h4>
<h6 id="法一-多栈"><a class="header-anchor" href="#法一-多栈">¶</a>法一 多栈</h6>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DinnerPlates</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt;&gt; stv;</span><br><span class="line">    <span class="keyword">int</span> c, l, r;</span><br><span class="line">    DinnerPlates(<span class="keyword">int</span> capacity) &#123;</span><br><span class="line">        stv.reserve(<span class="number">200000</span>);</span><br><span class="line">        stv.resize(<span class="number">100</span>);</span><br><span class="line">        l = <span class="number">0</span>;<span class="comment">//最左非满栈的下标</span></span><br><span class="line">        r = <span class="number">0</span>;<span class="comment">//最右非空栈的下标</span></span><br><span class="line">        c = capacity;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> t = l;</span><br><span class="line">        stv[l].push(val);</span><br><span class="line">        <span class="keyword">while</span>(l &lt; stv.size() &amp;&amp; stv[l].size() == c) l++;</span><br><span class="line">        <span class="keyword">if</span>(l == stv.size()) stv.resize(<span class="number">2</span>*stv.size());</span><br><span class="line">        <span class="keyword">if</span>(t &gt; r) r = t;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(stv[r].empty()) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">int</span> ret = stv[r].top();</span><br><span class="line">        stv[r].pop();</span><br><span class="line">        <span class="keyword">while</span>(r &gt; <span class="number">0</span> &amp;&amp; stv[r].empty()) --r;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">popAtStack</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(stv[index].empty()) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">if</span>(index == r) <span class="keyword">return</span> pop();</span><br><span class="line">        <span class="keyword">int</span> ret = stv[index].top(); stv[index].pop();</span><br><span class="line">        <span class="keyword">if</span>(index &lt; l) l = index;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">​</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your DinnerPlates object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * DinnerPlates* obj = new DinnerPlates(capacity);</span></span><br><span class="line"><span class="comment"> * obj-&gt;push(val);</span></span><br><span class="line"><span class="comment"> * int param_2 = obj-&gt;pop();</span></span><br><span class="line"><span class="comment"> * int param_3 = obj-&gt;popAtStack(index);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<h6 id="法二-单栈"><a class="header-anchor" href="#法二-单栈">¶</a>法二 单栈</h6>
<p>  用单栈来模拟，当调用popAtStack时，找到对应栈的位置范围，弹出这个栈的第一个非0元素，然后将该非0元素置为0，最后把对应的位置记录在<code>idx_</code>这个set中。push时只要<code>idx_</code>这个set非空，就放在set的第一个值对应的位置（因为popAtStack会使栈出现空&quot;洞&quot;，这些&quot;洞&quot;中的最小正是下一个值需要放的位置；其实即使popAtStack对应的是最后一个栈，从而没有出现&quot;洞&quot;，也不影响逻辑的正确性）。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DinnerPlates</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  DinnerPlates(<span class="keyword">int</span> capacity) : capacity_(capacity) &#123;</span><br><span class="line">    stacks_.reserve(capacity);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    ++size_;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!idx_.empty()) &#123;</span><br><span class="line">      stacks_[*idx_.begin()] = val;   </span><br><span class="line">      idx_.erase(idx_.begin());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      stacks_.push_back(val);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (size_ == <span class="number">0</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(!stacks_.empty() &amp;&amp; stacks_.back() == <span class="number">0</span>)&#123;</span><br><span class="line">      <span class="keyword">if</span>(!idx_.empty() &amp;&amp; stacks_.size() - <span class="number">1</span> == *idx_.rbegin()) idx_.erase(--idx_.end());</span><br><span class="line">      stacks_.pop_back();  </span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (stacks_.empty())</span><br><span class="line">      <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> result = stacks_.back();</span><br><span class="line">    stacks_.pop_back();</span><br><span class="line"></span><br><span class="line">    decrementSize();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">popAtStack</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> offset = index * capacity_ + capacity_ - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (stacks_.size() &lt; offset)</span><br><span class="line">      <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = offset; i &gt; offset - capacity_; --i) &#123;</span><br><span class="line">      <span class="keyword">if</span> (stacks_[i] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        idx_.insert(i);</span><br><span class="line">        decrementSize();</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">std</span>::exchange(stacks_[i], <span class="number">0</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">decrementSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    --size_;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (size_ == <span class="number">0</span>)</span><br><span class="line">      idx_ = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> capacity_;</span><br><span class="line">  <span class="keyword">int</span> size_ = <span class="number">0</span>;</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; stacks_;</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; idx_;<span class="comment">//维护栈中的空洞</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h6 id="法三-多栈-优先队列"><a class="header-anchor" href="#法三-多栈-优先队列">¶</a>法三 多栈+优先队列</h6>
<p>  用小顶堆维护所有非满栈的下标，用<code>vector&lt;stack&gt;</code>模拟餐盘栈。注意：非满队列保证所有非满的栈的下标肯定在队列中，但是不保证队列中所有下标对应的栈都是非满的，所以在找最左非满栈时要判断合法性。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> ui;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ull;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span> ,<span class="keyword">int</span>&gt; pii;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;ll, ll&gt; pll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> rl;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> xx first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> yy second</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dbg(x) cout &lt;&lt; #x &lt;&lt; <span class="meta-string">": "</span> &lt;&lt; (x) &lt;&lt; endl;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> dbg(x)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//typedef stack&lt;int&gt; MyStack;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MyStack</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; A;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> A.size(); &#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123; A.pb(a); &#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">top</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> A.back(); &#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123; A.pop_back(); &#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">empty</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> A.empty(); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DinnerPlates</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> C;</span><br><span class="line">    <span class="built_in">vector</span>&lt;MyStack&gt; V;</span><br><span class="line">    priority_queue&lt;<span class="keyword">int</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;, greater&lt;<span class="keyword">int</span>&gt;&gt; not_full_Q;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    DinnerPlates(<span class="keyword">int</span> capacity) : C(capacity)</span><br><span class="line">    &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">make_empty_stack_in_the_back</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> idx=V.size();</span><br><span class="line">        V.pb(&#123;&#125;);</span><br><span class="line">        not_full_Q.push(idx);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">get_leftmost_nonfull</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(!not_full_Q.empty())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> idx=not_full_Q.top();</span><br><span class="line">            <span class="keyword">if</span>(idx &lt; V.size() &amp;&amp; V[idx].size() &lt; C)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> idx;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> not_full_Q.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        make_empty_stack_in_the_back();</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>)V.size()<span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> idx=get_leftmost_nonfull();</span><br><span class="line">        V[idx].push(val);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(V.empty()) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">return</span> popAtStack((<span class="keyword">int</span>)V.size()<span class="number">-1</span>);  </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">popAtStack</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(index&gt;=V.size()) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">auto</span>&amp; v=V[index];</span><br><span class="line">        <span class="keyword">if</span>(v.empty()) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> res=v.top(); v.pop();</span><br><span class="line">        <span class="keyword">if</span>(v.size()==C<span class="number">-1</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            not_full_Q.push(index);</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">while</span>(!V.empty() &amp;&amp; V.back().empty())</span><br><span class="line">        &#123;</span><br><span class="line">            V.pop_back();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/17/MP模板/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/17/MP模板/" itemprop="url">KMP模板</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-17T17:06:56+08:00">2020-03-17</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-03-17T17:36:36+08:00">2020-03-17</time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>求是否包含模式串，第一次出现的位置，出现次数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">char</span> mo[maxn], str[maxn];<span class="comment">///mo为模式串、str为主串</span></span><br><span class="line"><span class="keyword">int</span> next[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">GetNext</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">-1</span>, len = mo.size();</span><br><span class="line">  next[i] = j;</span><br><span class="line">  <span class="keyword">while</span>(i &lt; len)&#123;</span><br><span class="line">      <span class="keyword">while</span>(j != <span class="number">-1</span> &amp;&amp; mo[i] != mo[j]) j = next[j];</span><br><span class="line">      ++i, ++j;</span><br><span class="line">      <span class="keyword">if</span>(s[i] == s[j]) next[i] = next[j];</span><br><span class="line">      <span class="keyword">else</span> next[i] = j;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">KmpIndex</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    GetNext();</span><br><span class="line">    <span class="keyword">int</span> i =<span class="number">0</span>, j = <span class="number">0</span>, strL = <span class="built_in">strlen</span>(str), moL = <span class="built_in">strlen</span>(mo);</span><br><span class="line">    <span class="keyword">while</span>(i &lt; strL &amp;&amp; j &lt; moL)&#123;</span><br><span class="line">        <span class="keyword">while</span>( j != <span class="number">-1</span> &amp;&amp; str[i] != mo[j]) j = next[j];</span><br><span class="line">        i++, j++;</span><br><span class="line">        <span class="keyword">if</span>(j == moL) ans++;<span class="comment">//出现次数</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(j == moL) <span class="keyword">return</span> i - moL;<span class="comment">///返回模式串在主串中首次出现的位置</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s %s"</span>, str, mo);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, KmpIndex());</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/16/NC-善变的同伴（最大m字段和）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/16/NC-善变的同伴（最大m字段和）/" itemprop="url">NC:善变的同伴（最大m字段和）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-16T20:37:00+08:00">2020-03-16</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-03-16T21:06:20+08:00">2020-03-16</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/nowcoder/" itemprop="url" rel="index">
                    <span itemprop="name">nowcoder</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>又到了吃午饭的时间，你和你的同伴刚刚研发出了最新的GSS-483型自动打饭机器人，现在你们正在对机器人进行功能测试。<br>
为了简化问题，我们假设午饭一共有N个菜，对于第i个菜，你和你的同伴对其定义了一个好吃程度（或难吃程度，如果是负数的话……）A[i]，<br>
由于一些技（经）术（费）限制，机器人一次只能接受一个指令：两个数L, R——表示机器人将会去打第L~R一共R-L+1个菜。<br>
本着不浪费的原则，你们决定机器人打上来的菜，含着泪也要都吃完，于是你们希望机器人打的菜的好吃程度之和最大<br>
然而，你善变的同伴希望对机器人进行多次测试（实际上可能是为了多吃到好吃的菜），他想知道机器人打M次菜能达到的最大的好吃程度之和<br>
当然，打过一次的菜是不能再打的，而且你也可以对机器人输入-1, -1，表示一个菜也不打</p>
<p><a href="https://www.nowcoder.com/practice/824af5cb05794606b56657bb3fa91f49?tpId=98&amp;tqId=32843&amp;tPage=1&amp;rp=1&amp;ru=/ta/2019test&amp;qru=/ta/2019test/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/824af5cb05794606b56657bb3fa91f49?tpId=98&amp;tqId=32843&amp;tPage=1&amp;rp=1&amp;ru=/ta/2019test&amp;qru=/ta/2019test/question-ranking</a></p>
<h3 id="题解"><a class="header-anchor" href="#题解">¶</a>题解</h3>
<p>最大m字段和</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> now[maxn], pre[maxn], A[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N, M;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;N, &amp;M);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>, sum = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>, t = <span class="number">0</span>; i &lt; N; ++i)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;t); </span><br><span class="line">        <span class="keyword">if</span>(t == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(end != <span class="number">0</span>&amp;&amp;((A[end<span class="number">-1</span>] &lt; <span class="number">0</span> &amp;&amp; t &lt; <span class="number">0</span> )||(A[end<span class="number">-1</span>] &gt; <span class="number">0</span> &amp;&amp; t &gt; <span class="number">0</span>))) A[end<span class="number">-1</span>]+=t;</span><br><span class="line">        <span class="keyword">else</span> A[end++] = t;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    N = end, cnt = <span class="number">0</span>, sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>, cur = <span class="number">0</span>; i &lt; N; ++i) <span class="keyword">if</span>(A[i]&gt;<span class="number">0</span>) cnt++ , sum += A[i];</span><br><span class="line">    <span class="keyword">if</span>(cnt &lt;= M) <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sum);</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">memset</span>(now, <span class="number">0</span>, N&lt;&lt;<span class="number">2</span>);</span><br><span class="line">        <span class="built_in">memset</span>(pre, <span class="number">0</span>, N&lt;&lt;<span class="number">2</span>);</span><br><span class="line">        <span class="keyword">int</span> maxx;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; M; ++i)&#123;</span><br><span class="line">            maxx = INT_MIN;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &lt; N; ++j)&#123;</span><br><span class="line">                now[j+<span class="number">1</span>] = max(now[j], pre[j]) + A[j];</span><br><span class="line">                pre[j] = maxx;</span><br><span class="line">                maxx = max(maxx, now[j+<span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, maxx);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最大m字段和模板</p>
<p><a href="https://blog.csdn.net/winter2121/article/details/72848482" target="_blank" rel="noopener">https://blog.csdn.net/winter2121/article/details/72848482</a></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义二维数组dp， dp[ i ][ j ]，表示前 j 项所构成 i 子段的最大和，且必须包含着第j项，即以第j项结尾</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_SIZE 1000000</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">using</span> LL = <span class="keyword">long</span> <span class="keyword">long</span>;</span><br><span class="line"><span class="keyword">const</span> LL inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"> </span><br><span class="line">LL a[MAX_SIZE];</span><br><span class="line">LL dp[<span class="number">2</span>][MAX_SIZE];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">for</span> (LL n, m, pre; EOF != <span class="built_in">std</span>::<span class="built_in">scanf</span>(<span class="string">"%lld%lld"</span>, &amp;n, &amp;m); ) &#123;</span><br><span class="line">        <span class="comment">//std::vector&lt;LL&gt; a(n);</span></span><br><span class="line">        <span class="comment">//std::vector&lt; std::vector&lt;LL&gt; &gt; dp(2, std::vector&lt;LL&gt;(n + 1, 0));</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; <span class="built_in">std</span>::<span class="built_in">scanf</span>(<span class="string">"%lld"</span>, &amp;a[i++])) &#123;&#125;<span class="comment">//数组下标从1开始</span></span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">            pre = -inf;<span class="comment">//上一行的值</span></span><br><span class="line">            dp[i &amp; <span class="number">1</span>][i - <span class="number">1</span>] = -inf;<span class="comment">//防止刚开始取dp[i &amp; 1][i - 1]来更新dp[i &amp; 1][i]，因为分i段必须要从第i个元素开始分，dp[i &amp; 1][i - 1]是无意义的，因为它不可能分成i段</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt;= n - m + i; ++j) &#123;</span><br><span class="line">                pre = <span class="built_in">std</span>::max(pre, dp[(i - <span class="number">1</span>) &amp; <span class="number">1</span>][j - <span class="number">1</span>]);</span><br><span class="line">                dp[i &amp; <span class="number">1</span>][j] = <span class="built_in">std</span>::max(dp[i &amp; <span class="number">1</span>][j - <span class="number">1</span>], pre) + a[j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        LL ans = -inf;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="built_in">std</span>::min(m, n); i &lt;= n; ans = <span class="built_in">std</span>::max(ans, dp[<span class="built_in">std</span>::min(n, m) % <span class="number">2</span>][i++])) &#123;&#125;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//原文链接：https://blog.csdn.net/FlushHip/article/details/83822873</span></span><br></pre></td></tr></table></figure>
<p>其他解法（贪心）:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">链接：https:<span class="comment">//www.nowcoder.com/questionTerminal/824af5cb05794606b56657bb3fa91f49</span></span><br><span class="line">来源：牛客网</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    参考(抄袭、借鉴、学了)胡船长的代码  做了注释</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">    最大m段和</span></span><br><span class="line"><span class="comment">    1.通过合并连续正数、负数，得到正负交错的序列</span></span><br><span class="line"><span class="comment">    2.如果M大于正数数目，答案就是其和</span></span><br><span class="line"><span class="comment">    3.否则可将正数们视为一个段，得到超过M的段数</span></span><br><span class="line"><span class="comment">    4.开始对正数进行合并、舍弃，直到剩余M个正数段结束</span></span><br><span class="line"><span class="comment">        合并、舍弃过程：</span></span><br><span class="line"><span class="comment">            将所有值按绝对值大小全</span></span><br><span class="line"><span class="comment">            每次取最小值出来，如果是正数，则舍弃它，将它与两边负数合并，段数减1</span></span><br><span class="line"><span class="comment">                           如果是负数，则将它视为链接左右两边比它大的正数段的枢纽，合并两边正数</span></span><br><span class="line"><span class="comment">                            </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> max_N = <span class="number">100005</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> val;<span class="comment">//子段值</span></span><br><span class="line">    <span class="keyword">int</span> flag;<span class="comment">//是否已被删除</span></span><br><span class="line">    <span class="keyword">int</span> l,r;<span class="comment">//左边、右边节点的位置</span></span><br><span class="line">    Node()&#123;&#125;</span><br><span class="line">    Node(<span class="keyword">int</span> l_,<span class="keyword">int</span> r_,<span class="keyword">int</span> val_):l(l_),r(r_),val(val_),flag(<span class="number">0</span>)&#123;&#125;</span><br><span class="line">    <span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; out,<span class="keyword">const</span> Node &amp;n)&#123;</span><br><span class="line">        out&lt;&lt;<span class="string">"["</span>&lt;&lt;n.l&lt;&lt;<span class="string">" "</span>&lt;&lt;n.val&lt;&lt;<span class="string">" "</span>&lt;&lt;n.r&lt;&lt;<span class="string">" "</span>&lt;&lt;<span class="string">":"</span>&lt;&lt;n.flag&lt;&lt;<span class="string">"]"</span>&lt;&lt;<span class="string">","</span>;</span><br><span class="line">        <span class="keyword">return</span> out;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt; A(max_N);</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">del</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(p==<span class="number">0</span>) <span class="keyword">return</span> ;</span><br><span class="line">    A[p].flag = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//将其左右连接，有点像链表的删除</span></span><br><span class="line">    A[A[p].l].r = A[p].r;</span><br><span class="line">    A[A[p].r].l = A[p].l;</span><br><span class="line">    A[p].l=<span class="number">0</span>;</span><br><span class="line">    A[p].r=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//freopen("temp.in","r",stdin);</span></span><br><span class="line">    <span class="keyword">int</span> N,M;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;N&gt;&gt;M;</span><br><span class="line">    A[<span class="number">0</span>]=Node(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;i++)&#123;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;a;</span><br><span class="line">        A[i]=Node(i<span class="number">-1</span>,i+<span class="number">1</span>,a);</span><br><span class="line">    &#125;</span><br><span class="line">    A[N+<span class="number">1</span>]=Node(N,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">set</span>&lt;pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; &gt;S; <span class="comment">//不用map是因为map按key排序唯一，用pair能保证存在多个val值的node</span></span><br><span class="line">     </span><br><span class="line">    <span class="comment">//合并连续正数、负数</span></span><br><span class="line">    <span class="keyword">int</span> p = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> cnt=<span class="number">0</span>,sum=<span class="number">0</span>;<span class="comment">//合并后正数的个数、总和</span></span><br><span class="line">    <span class="keyword">while</span>(p!=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">while</span>(A[p].r <span class="keyword">and</span> A[p].val*A[A[p].r].val&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">            A[p].val+=A[A[p].r].val;</span><br><span class="line">            del(A[p].r);<span class="comment">//数组内不好删除，仅仅作标记，并将其左右相邻点互相链接</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(A[p].val&gt;<span class="number">0</span>) cnt++,sum+=A[p].val;</span><br><span class="line">        S.insert(make_pair(<span class="built_in">abs</span>(A[p].val),p));<span class="comment">//将所有数按绝对值入堆</span></span><br><span class="line">        p = A[p].r;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//可看做现在有cnt段正数，超过M，所以要进行合并或舍弃()，以达到M段</span></span><br><span class="line">    <span class="keyword">while</span>(cnt&gt;M)&#123;</span><br><span class="line">        <span class="keyword">auto</span> a = S.begin();<span class="comment">//取出正数、负数绝对值中最小的一个(map内部是排序的)</span></span><br><span class="line">        S.erase(a);</span><br><span class="line">        p = a-&gt;second;</span><br><span class="line">        <span class="keyword">if</span>(A[p].flag) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="comment">//最小数是正数时考虑舍弃掉，跟左右两边的负数合并成一个更大的负数，</span></span><br><span class="line">        <span class="comment">//最小数如果是负数则用来串联左右两边比它大的正数，作为周围两个正数的枢纽  </span></span><br><span class="line">         </span><br><span class="line">        <span class="keyword">if</span>((A[p].l==<span class="number">0</span>||A[p].r==<span class="number">0</span>) <span class="keyword">and</span> A[p].val&lt;<span class="number">0</span>) del(p);<span class="comment">//最小值是边缘且是负数，直接删除</span></span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            cnt--;</span><br><span class="line">             </span><br><span class="line">            sum-=<span class="built_in">abs</span>(A[p].val);<span class="comment">//加上负数相当于减绝对值，正数也可以直接减</span></span><br><span class="line">            <span class="comment">//串联上左右两边</span></span><br><span class="line">            A[p].val+=A[A[p].r].val;</span><br><span class="line">            A[p].val+=A[A[p].l].val;</span><br><span class="line">            <span class="comment">//删除左右两边</span></span><br><span class="line">            del(A[p].r);</span><br><span class="line">            del(A[p].l);</span><br><span class="line">            <span class="comment">//重新入堆，因为有可能作为枢纽</span></span><br><span class="line">            S.insert(make_pair(<span class="built_in">abs</span>(A[p].val),p));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,sum);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/15/找工作系列1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/15/找工作系列1/" itemprop="url">找工作系列1</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-15T22:07:00+08:00">2020-03-15</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-03-15T22:12:18+08:00">2020-03-15</time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>IO设计</li>
</ol>
<p><a href="https://blog.csdn.net/bluehawksky/article/details/91383077" target="_blank" rel="noopener">https://blog.csdn.net/bluehawksky/article/details/91383077</a></p>
<p><a href="https://blog.csdn.net/ZWE7616175/article/details/80591587" target="_blank" rel="noopener">https://blog.csdn.net/ZWE7616175/article/details/80591587</a></p>
<ol start="2">
<li>分布式事务</li>
</ol>
<p><a href="https://segmentfault.com/q/1010000014386545" target="_blank" rel="noopener">https://segmentfault.com/q/1010000014386545</a></p>
<p><a href="https://cloud.tencent.com/developer/article/1546743" target="_blank" rel="noopener">https://cloud.tencent.com/developer/article/1546743</a></p>
<p><a href="https://www.cnblogs.com/luxiaoxun/p/8832915.html" target="_blank" rel="noopener">https://www.cnblogs.com/luxiaoxun/p/8832915.html</a></p>
<ol start="3">
<li>分区容错性的解释</li>
</ol>
<p><a href="https://www.zhihu.com/question/54105974" target="_blank" rel="noopener">https://www.zhihu.com/question/54105974</a></p>
<ol start="4">
<li>https请求</li>
</ol>
<ol>
<li>
<p>客户端向服务器发起HTTPS请求，连接到服务器的443端口；</p>
</li>
<li>
<p>服务器端有一个密钥对，即公钥（即数字证书）和私钥，是用来进行非对称加密使用的，服务器端保存着私钥，不能将其泄露，公钥可以发送给任何人；</p>
</li>
<li>
<p>服务器将自己的公钥发送给客户端；</p>
</li>
<li>
<p>客户端收到服务器端的公钥之后，检查其合法性，如果发现发现公钥有问题，那么HTTPS传输就无法继续，如果公钥合格，则客户端会生成一个客户端密钥，然后用服务器的公钥对客户端密钥进行非对称加密成密文，至此，HTTPS中的第一次HTTP请求结束；</p>
</li>
<li>
<p>客户端发起HTTPS中的第二个HTTP请求，将加密之后的客户端密钥发送给服务器；</p>
</li>
<li>
<p>服务器接收到客户端发来的密文之后，会用自己的私钥对其进行非对称解密，解密之后的明文就是客户端密钥，然后用客户端密钥对数据进行对称加密，这样数据就变成了密文；</p>
</li>
<li>
<p>然后服务器将加密后的密文发送给客户端；</p>
</li>
<li>
<p>客户端收到服务器发送来的密文，用客户端密钥对其进行对称解密，得到服务器发送的数据。这样HTTPS中的第二个HTTP请求结束，整个HTTPS传输完成。</p>
</li>
</ol>
<ol start="5">
<li>mysql</li>
</ol>
<p>读《MySQL必知必会》我学到了什么？<br>
<a href="https://www.cnblogs.com/keatsCoder/p/11878203.html" target="_blank" rel="noopener">https://www.cnblogs.com/keatsCoder/p/11878203.html</a></p>
<p>mysql知识体系以及学习经验</p>
<p><a href="http://www.notedeep.com/note/38/page/327" target="_blank" rel="noopener">http://www.notedeep.com/note/38/page/327</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/14/莫比乌斯反演/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/14/莫比乌斯反演/" itemprop="url">莫比乌斯反演</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-14T22:25:00+08:00">2020-03-14</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-03-15T21:35:03+08:00">2020-03-15</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/算法/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/算法/数论/" itemprop="url" rel="index">
                    <span itemprop="name">数论</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>数学证明:</p>
<p><a href="https://blog.csdn.net/u013534123/article/details/81260330" target="_blank" rel="noopener">https://blog.csdn.net/u013534123/article/details/81260330</a></p>
<p>应用:</p>
<p><a href="https://www.nowcoder.com/practice/99062f0877e047bb8c7374d241268a8b?tpId=110&amp;tqId=33461&amp;tPage=2&amp;rp=2&amp;ru=/ta/job-code&amp;qru=/ta/job-code/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/99062f0877e047bb8c7374d241268a8b?tpId=110&amp;tqId=33461&amp;tPage=2&amp;rp=2&amp;ru=/ta/job-code&amp;qru=/ta/job-code/question-ranking</a></p>
<p><a href="https://www.cnblogs.com/linyujun/p/5210772.html" target="_blank" rel="noopener">https://www.cnblogs.com/linyujun/p/5210772.html</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/14/NC-算法交流群/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/14/NC-算法交流群/" itemprop="url">NC:算法交流群</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-14T17:25:00+08:00">2020-03-14</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-03-14T22:25:09+08:00">2020-03-14</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/nowcoder/" itemprop="url" rel="index">
                    <span itemprop="name">nowcoder</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>牛牛有一个算法交流群，它是这个群的群主，也是这个群实力最强的人。</p>
<p>算法交流群里一共有n个人，每个人都有一个等级a_ia<br>
i<br>
​	<br>
表示它能解决难度小于等于a_ia<br>
i<br>
​	<br>
的算法问题。</p>
<p>除了牛牛以外，群里的每个编号为i的人都在群里有一个等级比他高的朋友编号为p_ip<br>
i<br>
​	<br>
。群友 i 会解决那些他产生和接收的等级小于等于a_ia<br>
i<br>
​	<br>
的问题，并把解决不了的问题全部交给p_ip<br>
i<br>
​	<br>
。</p>
<p>保证牛牛的编号为1。保证牛牛的等级全场唯一且全场最高。如果牛牛解决不了他接收的问题，他将不管这些问题。</p>
<p>这天群里的每个人都产生了一个问题，牛牛知道了每个人产生问题等级k_ik<br>
i<br>
​	<br>
，他想知道群里的每个人在这天解决了多少问题。</p>
<p><a href="https://www.nowcoder.com/practice/397cf1012db14edebe6e91479d536171?tpId=110&amp;tqId=33447&amp;tPage=2&amp;rp=2&amp;ru=/ta/job-code&amp;qru=/ta/job-code/question-ranking" target="_blank" rel="noopener">https://www.nowcoder.com/practice/397cf1012db14edebe6e91479d536171?tpId=110&amp;tqId=33447&amp;tPage=2&amp;rp=2&amp;ru=/ta/job-code&amp;qru=/ta/job-code/question-ranking</a></p>
<p>树上倍增解法:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 算法交流群</span></span><br><span class="line"><span class="comment">     * @param n int整型 群员个数</span></span><br><span class="line"><span class="comment">     * @param a int整型vector 群员的等级</span></span><br><span class="line"><span class="comment">     * @param p int整型vector 群友寻求帮助的人</span></span><br><span class="line"><span class="comment">     * @param k int整型vector 群友产生的问题等级</span></span><br><span class="line"><span class="comment">     * @return int整型vector</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; solve(<span class="keyword">int</span> n, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; a, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; p, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; k) &#123;</span><br><span class="line">        <span class="comment">// write code here</span></span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans(n);</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; G(n+<span class="number">1</span>), f(n+<span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(<span class="number">18</span>));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; p.size(); ++i)&#123;</span><br><span class="line">            f[i+<span class="number">2</span>][<span class="number">0</span>] = p[i];</span><br><span class="line">            G[p[i]].push_back(i+<span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(G, f, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(k[<span class="number">0</span>] &lt;= a[<span class="number">0</span>]) ans[<span class="number">0</span>]++;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>, t; i &lt; k.size(); ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(k[i] &lt;= a[i]) &#123;ans[i]++;<span class="keyword">continue</span>;&#125;</span><br><span class="line">            t = i+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">17</span>; j &gt;= <span class="number">0</span>; --j)&#123;</span><br><span class="line">                <span class="keyword">if</span>(!f[t][j] || a[f[t][j] - <span class="number">1</span>] &gt;= k[i]) <span class="keyword">continue</span>;</span><br><span class="line">                t = f[t][j];</span><br><span class="line">            &#125;</span><br><span class="line">            t = f[t][<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">if</span>(t == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">else</span> ans[t<span class="number">-1</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; &amp;G,<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; &amp;f, <span class="keyword">int</span> u)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">17</span>; ++i) f[u][i+<span class="number">1</span>] = f[f[u][i]][i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x : G[u]) dfs(G, f, x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>非递归解法:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span> <span class="comment">//time O(N log N) space O(N log N)</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; solve(<span class="keyword">int</span> n, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; a, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; p, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; k) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; depth(n, <span class="number">-1</span>);</span><br><span class="line">        depth[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) FindDepth(i, p, depth);</span><br><span class="line">        <span class="keyword">int</span> maxdepth = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) maxdepth = max(maxdepth, depth[i]);</span><br><span class="line">        <span class="keyword">int</span> pow2 = <span class="number">1</span>, sz = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(pow2 &lt; maxdepth)&#123;</span><br><span class="line">            pow2 *= <span class="number">2</span>;</span><br><span class="line">            sz++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; higherlevel(sz, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) higherlevel[<span class="number">0</span>][i] = p[i - <span class="number">1</span>] - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> l = <span class="number">1</span>; l &lt; sz; l++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">                higherlevel[l][i] = higherlevel[l - <span class="number">1</span>][higherlevel[l - <span class="number">1</span>][i]];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; count(n);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i] &gt;= k[i])&#123;</span><br><span class="line">                count[i]++;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> holder = i;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> l = sz - <span class="number">2</span>; l &gt;= <span class="number">0</span>; l--)&#123;</span><br><span class="line">                <span class="keyword">if</span>(a[higherlevel[l][holder]] &lt; k[i]) holder = higherlevel[l][holder];</span><br><span class="line">            &#125;</span><br><span class="line">            holder = higherlevel[<span class="number">0</span>][holder];</span><br><span class="line">            <span class="keyword">if</span>(a[holder] &gt;= k[i]) count[holder]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">FindDepth</span><span class="params">(<span class="keyword">int</span> i, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; p, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; depth)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(depth[i] != <span class="number">-1</span>) <span class="keyword">return</span> depth[i];</span><br><span class="line">        <span class="keyword">return</span> depth[i] = FindDepth(p[i - <span class="number">1</span>] - <span class="number">1</span>, p, depth) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/13/NC-MagicString/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/13/NC-MagicString/" itemprop="url">NC:MagicString</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-13T00:55:11+08:00">2020-03-13</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-03-13T01:13:21+08:00">2020-03-13</time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>牛妹有有两个字符串S1与S2，她想知道S2在S1中的哪一个循环同构串中的出现次数最多，如果有多个，请输出字典序最小的一个。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//链接：https://www.nowcoder.com/questionTerminal/7c76ecb05da44b0aa696a9f4d23a3730?answerType=1&amp;f=discussion</span></span><br><span class="line"><span class="comment">//来源：牛客网</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ull;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">200010</span>;</span><br><span class="line"><span class="keyword">const</span> ull sed = <span class="number">233</span>;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line">ull h[N],ha[N];<span class="comment">//h数组存储sed的次方，ha存储的是前缀hash值</span></span><br><span class="line"><span class="keyword">char</span> s[N],t[N];</span><br><span class="line"><span class="function">ull <span class="title">get</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span> </span>&#123;<span class="comment">//获取[l,r]的hash值</span></span><br><span class="line">    <span class="keyword">return</span> ha[r]-ha[l<span class="number">-1</span>]*h[r-l+<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">pd</span><span class="params">(<span class="keyword">int</span> st1,<span class="keyword">int</span> st2,<span class="keyword">int</span> len)</span> </span>&#123;<span class="comment">//判断从st1与st2开始的长度为len的hash值是否相同</span></span><br><span class="line">    <span class="keyword">if</span>(ha[st1+len<span class="number">-1</span>]-ha[st1<span class="number">-1</span>]*h[len]==ha[st2+len<span class="number">-1</span>]-ha[st2<span class="number">-1</span>]*h[len]) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> st1,<span class="keyword">int</span> st2)</span> </span>&#123;<span class="comment">//比较st1与st2开始的长度为n的串的字典序大小</span></span><br><span class="line">    <span class="keyword">if</span>(s[st1]!=s[st2]) <span class="keyword">return</span> s[st1]&lt;s[st2];</span><br><span class="line">    <span class="keyword">int</span> l=<span class="number">1</span>,r=n;</span><br><span class="line">    <span class="keyword">while</span>(l&lt;r) &#123;<span class="comment">//二分最长相同长度</span></span><br><span class="line">        <span class="keyword">int</span> mid=l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(pd(st1,st2,mid)) l=mid+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> r=mid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!pd(st1,st2,l)) l--;</span><br><span class="line">    <span class="keyword">if</span>(l==n) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> s[st1+l]&lt;s[st2+l];<span class="comment">//比较第一个不同的字典序大小</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> sum[N],add[N];</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param S1 string字符串 S1</span></span><br><span class="line"><span class="comment">     * @param S2 string字符串 S2</span></span><br><span class="line"><span class="comment">     * @return string字符串</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">CycleString</span><span class="params">(<span class="built_in">string</span> S1, <span class="built_in">string</span> S2)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// write code here</span></span><br><span class="line">        h[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;N;i++) h[i]=h[i<span class="number">-1</span>]*sed;</span><br><span class="line">        <span class="built_in">strcpy</span>(s+<span class="number">1</span>,S1.c_str());</span><br><span class="line">        n=<span class="built_in">strlen</span>(s+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) s[i+n]=s[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n*<span class="number">2</span>;i++) ha[i]=ha[i<span class="number">-1</span>]*sed+s[i];</span><br><span class="line">        s[<span class="number">2</span>*n+<span class="number">1</span>]=<span class="string">'\0'</span>;</span><br><span class="line">        <span class="built_in">strcpy</span>(t+<span class="number">1</span>,S2.c_str());</span><br><span class="line">        m=<span class="built_in">strlen</span>(t+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(m&gt;n) <span class="keyword">return</span> <span class="string">"IMPOSSIBLE"</span>;</span><br><span class="line">        ull val=<span class="number">0</span>;<span class="comment">//S2的hash值</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) val=val*sed+t[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i+m<span class="number">-1</span>&lt;=n*<span class="number">2</span>;i++)<span class="comment">//前缀和统计匹配次数</span></span><br><span class="line">            <span class="keyword">if</span>(get(i,i+m<span class="number">-1</span>)==val) sum[i]=sum[i<span class="number">-1</span>]+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> sum[i]=sum[i<span class="number">-1</span>];</span><br><span class="line">        <span class="keyword">int</span> mxcnt=<span class="number">0</span>;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;v;<span class="comment">//匹配次数最大的起点集合</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="comment">//最大匹配次数</span></span><br><span class="line">            mxcnt=max(mxcnt,sum[i+n-m+<span class="number">1</span>]-sum[i<span class="number">-1</span>]);</span><br><span class="line">        <span class="keyword">if</span>(mxcnt==<span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"IMPOSSIBLE"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;<span class="comment">//记录次数最大的起点集合</span></span><br><span class="line">            <span class="keyword">if</span>(sum[i+n-m+<span class="number">1</span>]-sum[i<span class="number">-1</span>]==mxcnt) &#123;</span><br><span class="line">                v.push_back(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> mn=v[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> i:v) &#123;<span class="comment">//获取字典序最小的串</span></span><br><span class="line">            <span class="keyword">if</span>(!cmp(mn,i)) mn=i;</span><br><span class="line">        &#125;</span><br><span class="line">        s[mn+n]=<span class="string">'\0'</span>;</span><br><span class="line">        <span class="built_in">string</span> ss=s+mn;</span><br><span class="line">        <span class="keyword">return</span> ss;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>此题还有另外一种解法，利用后缀数组的height数组，下面是官方题解的解释：<br>
链接：<a href="https://www.nowcoder.com/questionTerminal/7c76ecb05da44b0aa696a9f4d23a3730?answerType=1&amp;f=discussion" target="_blank" rel="noopener">https://www.nowcoder.com/questionTerminal/7c76ecb05da44b0aa696a9f4d23a3730?answerType=1&amp;f=discussion</a><br>
来源：牛客网</p>
<p>解法3：其实这题还可以后缀数组做，只需要把第二个串拼接在第一个串后面，然后在height数组中找到第二个串的出现位置pos，并对之后所有与pos的最长公共前缀的长度等于|S2|的位置进行标记，从而统计最多的出现次数cnt。最后再去height数组从前往后找第一个出现次数为cnt的位置就可以输出答案了。时间复杂度O(|S1|+|S2|),空间复杂度O(|S1|+|S2|)。</p>
<h3 id="总结"><a class="header-anchor" href="#总结">¶</a>总结</h3>
<ol>
<li>字符串hash的用法</li>
</ol>
<p>  可以预先处理处所有前缀hash值，然后调用下面的get获取区间hash，这样更简洁，比滑动窗口的代码也更好写。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ull h[N],ha[N];<span class="comment">//h数组存储sed的次方，ha存储的是前缀hash值</span></span><br><span class="line"></span><br><span class="line"><span class="function">ull <span class="title">get</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span> </span>&#123;<span class="comment">//获取[l,r]的hash值</span></span><br><span class="line">    <span class="keyword">return</span> ha[r]-ha[l<span class="number">-1</span>]*h[r-l+<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">pd</span><span class="params">(<span class="keyword">int</span> st1,<span class="keyword">int</span> st2,<span class="keyword">int</span> len)</span> </span>&#123;<span class="comment">//判断从st1与st2开始的长度为len的hash值是否相同</span></span><br><span class="line">    <span class="keyword">if</span>(ha[st1+len<span class="number">-1</span>]-ha[st1<span class="number">-1</span>]*h[len]==ha[st2+len<span class="number">-1</span>]-ha[st2<span class="number">-1</span>]*h[len]) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//--------------------------------------------</span></span><br><span class="line">h[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;N;i++) h[i]=h[i<span class="number">-1</span>]*sed;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n*<span class="number">2</span>;i++) ha[i]=ha[i<span class="number">-1</span>]*sed+s[i];</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>二分判断字典序大小</li>
</ol>
<p>  对于特别长的字符串之间的字典序比较，可以用二分的方式来做。先找出最长的公共前缀，然后比较公共前缀的后一个字符即可。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> st1,<span class="keyword">int</span> st2)</span> </span>&#123;<span class="comment">//比较st1与st2开始的长度为n的串的字典序大小</span></span><br><span class="line">    <span class="keyword">if</span>(s[st1]!=s[st2]) <span class="keyword">return</span> s[st1]&lt;s[st2];</span><br><span class="line">    <span class="keyword">int</span> l=<span class="number">1</span>,r=n;</span><br><span class="line">    <span class="keyword">while</span>(l&lt;r) &#123;<span class="comment">//二分最长相同长度</span></span><br><span class="line">        <span class="keyword">int</span> mid=l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(pd(st1,st2,mid)) l=mid+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> r=mid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!pd(st1,st2,l)) l--;</span><br><span class="line">    <span class="keyword">if</span>(l==n) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> s[st1+l]&lt;s[st2+l];<span class="comment">//比较第一个不同的字典序大小</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/45/">45</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">lidanyang</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">445</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">119</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/lidanyang" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:1261727840@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lidanyang</span>

  

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Gemini</a> v6.0.0</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.0"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=6.0.0"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=6.0.0"></script>


  

</body>
</html>
