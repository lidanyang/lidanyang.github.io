<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.0.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.0" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="标签">
<meta property="og:url" content="http://yoursite.com/tags/index.html">
<meta property="og:site_name" content="Just a blog">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-05-28T06:22:30.696Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="标签">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.0.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/tags/">





  <title>Just a blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Just a blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/11/python面向对象学习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/11/python面向对象学习/" itemprop="url">python学习20190711</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-11T09:56:00+08:00">2019-07-11</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-07-11T22:35:13+08:00">2019-07-11</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li><a href="https://www.cnblogs.com/weihengblog/p/8528967.html" target="_blank" rel="noopener">python抽象类和接口类</a></li>
<li><a href="https://www.cnblogs.com/yutongzhu/p/5615764.html" target="_blank" rel="noopener">python装饰器</a></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">myDecorator</span><span class="params">(...)</span>:</span>　　　　<span class="comment">#定义装饰器，可能带参数</span></span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">decorator</span><span class="params">(func)</span>:</span>    <span class="comment">#装饰器核心，以被装饰的函数对象为参数，返回装饰后的函数对象</span></span><br><span class="line">         <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kvargs)</span>:</span>    <span class="comment">#装饰的过程，参数列表适应不同参数的函数</span></span><br><span class="line">             ...    <span class="comment">#修改函数调用前的行为</span></span><br><span class="line">             func(*args, **kvargs)    <span class="comment">#调用函数</span></span><br><span class="line">             ...    <span class="comment">#修改函数调用后的行为</span></span><br><span class="line">         <span class="keyword">return</span> wrapper</span><br><span class="line">     <span class="keyword">return</span> decorator</span><br><span class="line"> </span><br><span class="line"><span class="meta">@myDecorator(...):　　　　#给函数加上装饰器</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">myFunc</span><span class="params">(...)</span>:</span>　　　　  <span class="comment">#自己定义的功能函数</span></span><br><span class="line">    	...</span><br></pre></td></tr></table></figure>
<ol start="3">
<li><a href="https://blog.csdn.net/orangleliu/article/details/45843813" target="_blank" rel="noopener">装饰器传参数</a></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-*- encoding=utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">task_logging</span><span class="params">(taskname)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func_wrapper</span><span class="params">(func)</span>:</span></span><br><span class="line"><span class="meta">        @wraps(func)</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">return_wrapper</span><span class="params">(*args, **wkargs)</span>:</span></span><br><span class="line">            <span class="comment"># 函数通过装饰起参数给装饰器传送参数</span></span><br><span class="line">            <span class="keyword">print</span> <span class="string">'before task'</span>,taskname</span><br><span class="line">            <span class="comment"># 装饰器传变量给函数</span></span><br><span class="line">            taskid = <span class="number">1</span></span><br><span class="line">            summer, funcres = func(taskid, *args, **wkargs)</span><br><span class="line">            <span class="keyword">print</span> <span class="string">'after task'</span>, taskid, summer </span><br><span class="line">            <span class="keyword">return</span> funcres</span><br><span class="line">        <span class="keyword">return</span> return_wrapper</span><br><span class="line">    <span class="keyword">return</span> func_wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@task_logging("test")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">testd</span><span class="params">(taskid)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"testd runing"</span>,taskid</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"task summer success eg"</span>, []</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> testd()</span><br></pre></td></tr></table></figure>
<ol start="4">
<li><a href="https://www.cnblogs.com/zhangzhuozheng/p/8053045.html" target="_blank" rel="noopener">*arg和**kwargs的含义</a></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/09/树状数组/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/09/树状数组/" itemprop="url">树状数组</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-09T16:18:00+08:00">2019-07-09</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-11-03T00:10:03+08:00">2019-11-03</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/算法/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-基本用法"><a class="header-anchor" href="#1-基本用法">¶</a>1. 基本用法</h3>
<ol>
<li>单点修改，区间查询</li>
<li>区间修改，单点查询</li>
<li>区间修改，区间查询</li>
</ol>
<h3 id="2-模板代码"><a class="header-anchor" href="#2-模板代码">¶</a>2.模板代码</h3>
<ol>
<li>结构体版</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinTree</span>:</span><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">BinTree</span><span class="params">(<span class="keyword">int</span> k=<span class="number">0</span>)</span><span class="comment">//默认初始化一个能保存k个元素的空树状数组</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            assign(k+<span class="number">1</span>,<span class="number">0</span>);<span class="comment">//有效下标从1开始，0仅作逻辑用处</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> k&amp;-k;</span><br><span class="line">            <span class="comment">//也可写作x&amp;(x^(x–1))</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> k)</span><span class="comment">//求第1个元素到第n个元素的和</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> k&gt;<span class="number">0</span>?sum(k-lowbit(k))+(*<span class="keyword">this</span>)[k]:<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">int</span> <span class="title">last</span><span class="params">()</span><span class="comment">//返回最后一个元素下标</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> size()<span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> k,<span class="keyword">int</span> w)</span><span class="comment">//为节点k加上w</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(k&gt;last())<span class="keyword">return</span>;</span><br><span class="line">            (*<span class="keyword">this</span>)[k]+=w;</span><br><span class="line">            add(k+lowbit(k),w);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>函数版</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> n,m,i,num[<span class="number">100001</span>],t[<span class="number">200001</span>],l,r;<span class="comment">//num:原数组；t：树状数组 </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x&amp;(-x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">change</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> p)</span><span class="comment">//将第x个数加p </span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(x&lt;=n)</span><br><span class="line">    &#123;</span><br><span class="line">        t[x]+=p;</span><br><span class="line">        x+=lowbit(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> k)</span><span class="comment">//前k个数的和 </span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(k&gt;<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        ans+=t[k];</span><br><span class="line">        k-=lowbit(k);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ask</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span><span class="comment">//求l-r区间和 </span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> sum(r)-sum(l<span class="number">-1</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>注意事项</li>
</ol>
<p>  树状数组下标从1开始，不要忘了初始化数组，原数组和树状数组的关系要分清楚；</p>
<h3 id="3-扩展"><a class="header-anchor" href="#3-扩展">¶</a>3. 扩展</h3>
<ol>
<li>二维树状数组</li>
<li>求逆序对</li>
<li>树形树状数组</li>
<li>求指定长度单调子序列</li>
<li>树状数组求区间最值</li>
</ol>
<h3 id="4-参考"><a class="header-anchor" href="#4-参考">¶</a>4. 参考</h3>
<ol>
<li><a href="https://blog.csdn.net/qq_39553725/article/details/76696168" target="_blank" rel="noopener">https://blog.csdn.net/qq_39553725/article/details/76696168</a></li>
<li><a href="https://blog.csdn.net/u010598215/article/details/48206959" target="_blank" rel="noopener">https://blog.csdn.net/u010598215/article/details/48206959</a></li>
<li><a href="https://baike.baidu.com/item/%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84" target="_blank" rel="noopener">https://baike.baidu.com/item/树状数组</a></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/07/OI知识/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/07/OI知识/" itemprop="url">OI知识总结（来自洛谷）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-07T22:17:00+08:00">2019-07-07</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-11-04T16:50:54+08:00">2019-11-04</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/资料/" itemprop="url" rel="index">
                    <span itemprop="name">资料</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>
<p>线性结构</p>
<ul>
<li>
<p>莫队算法</p>
</li>
<li>
<p>前缀和</p>
</li>
<li>
<p>基本数组</p>
</li>
<li>
<p>向量</p>
</li>
<li>
<p>栈</p>
</li>
<li>
<p>队列</p>
</li>
<li>
<p>块状链表，块状数组，分块</p>
</li>
<li>
<p>st表，稀疏表</p>
</li>
<li>
<p>差分</p>
</li>
</ul>
</li>
<li>
<p>字符串</p>
<ul>
<li>
<p>后缀自动机，SAM</p>
</li>
<li>
<p>字典树，Trie树</p>
</li>
<li>
<p>AC自动机</p>
</li>
<li>
<p>KMP</p>
</li>
<li>
<p>后缀数组，SA</p>
</li>
<li>
<p>后缀树</p>
</li>
<li>
<p>有限状态自动机</p>
</li>
<li>
<p>哈夫曼，Huffman</p>
</li>
<li>
<p>简单密码学</p>
</li>
<li>
<p>回文自动机PAM</p>
</li>
<li>
<p>Manacher算法</p>
</li>
</ul>
</li>
<li>
<p>动态规划</p>
<ul>
<li>
<p>动态规划初步</p>
</li>
<li>
<p>背包</p>
</li>
<li>
<p>环型动态规划</p>
</li>
<li>
<p>数位动态规划</p>
</li>
<li>
<p>多维状态</p>
</li>
<li>
<p>区间动态规划</p>
</li>
<li>
<p>子母树</p>
</li>
<li>
<p>动态规划优化</p>
</li>
<li>
<p>树形动态规划</p>
</li>
<li>
<p>插头动态规划</p>
</li>
</ul>
</li>
<li>
<p>搜索</p>
<ul>
<li>
<p>BFS</p>
</li>
<li>
<p>DFS</p>
</li>
<li>
<p>剪枝</p>
</li>
<li>
<p>记忆化搜索</p>
</li>
<li>
<p>启发式搜索</p>
<ul>
<li>
<p>启发式迭代加深，IDA*</p>
</li>
<li>
<p>Dancing links</p>
</li>
<li>
<p>爬山法</p>
</li>
<li>
<p>模拟退火</p>
</li>
<li>
<p>遗传</p>
</li>
<li>
<p>A*算法</p>
</li>
</ul>
</li>
<li>
<p>迭代加深</p>
</li>
<li>
<p>随机调整</p>
</li>
</ul>
</li>
<li>
<p>数学，数论</p>
<ul>
<li>
<p>整数研究</p>
<ul>
<li>
<p>素数判断，质数，筛法</p>
</li>
<li>
<p>最大公约数，gcd</p>
</li>
<li>
<p>扩展欧几里得，扩欧</p>
</li>
<li>
<p>不定方程</p>
</li>
<li>
<p>进制</p>
</li>
<li>
<p>同余，中国剩余定理</p>
</li>
<li>
<p>莫比乌斯反演</p>
</li>
<li>
<p>逆元</p>
</li>
</ul>
</li>
<li>
<p>集合论</p>
</li>
<li>
<p>群论</p>
<ul>
<li>
<p>置换</p>
</li>
<li>
<p>Polya原理</p>
</li>
</ul>
</li>
<li>
<p>组合数学</p>
<ul>
<li>
<p>排列组合</p>
</li>
<li>
<p>二项式定理</p>
</li>
<li>
<p>康托展开</p>
</li>
<li>
<p>袋与球问题</p>
</li>
<li>
<p>鸽笼</p>
</li>
<li>
<p>容斥</p>
</li>
<li>
<p>Fibonacci</p>
</li>
<li>
<p>Catalan</p>
</li>
<li>
<p>Stirling</p>
</li>
<li>
<p>生成函数</p>
</li>
<li>
<p>Lucas</p>
</li>
</ul>
</li>
<li>
<p>线性规划</p>
</li>
<li>
<p>概率论，统计</p>
<ul>
<li>
<p>众数</p>
</li>
<li>
<p>简单概率</p>
</li>
<li>
<p>条件概率</p>
</li>
<li>
<p>Bayes</p>
</li>
<li>
<p>期望</p>
</li>
</ul>
</li>
<li>
<p>线性代数</p>
<ul>
<li>
<p>矩阵运算</p>
</li>
<li>
<p>矩阵乘法</p>
</li>
<li>
<p>线性递推，递推式</p>
</li>
<li>
<p>高斯消元</p>
</li>
<li>
<p>异或方程组</p>
</li>
<li>
<p>线性基</p>
</li>
</ul>
</li>
<li>
<p>微积分初步</p>
<ul>
<li>
<p>极限</p>
</li>
<li>
<p>导数</p>
</li>
<li>
<p>积分</p>
</li>
<li>
<p>定积分</p>
</li>
<li>
<p>立体解析几何</p>
</li>
<li>
<p>级数</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>图论</p>
<ul>
<li>
<p>图的建立，建图</p>
<ul>
<li>
<p>邻接矩阵</p>
</li>
<li>
<p>邻接表</p>
</li>
</ul>
</li>
<li>
<p>图的遍历</p>
</li>
<li>
<p>拓扑排序</p>
<ul>
<li>
<p>AOV</p>
</li>
<li>
<p>AOE</p>
</li>
</ul>
</li>
<li>
<p>最短路</p>
<ul>
<li>
<p>Floyd</p>
</li>
<li>
<p>Dijkstra</p>
</li>
<li>
<p>Bellman-Ford</p>
</li>
<li>
<p>SPFA</p>
</li>
<li>
<p>K短路</p>
</li>
<li>
<p>差分约束</p>
</li>
</ul>
</li>
<li>
<p>生成树</p>
<ul>
<li>
<p>Prim</p>
</li>
<li>
<p>Kruskal</p>
</li>
<li>
<p>生成树另类算法</p>
</li>
<li>
<p>次小生成树</p>
</li>
<li>
<p>特殊生成树</p>
</li>
</ul>
</li>
<li>
<p>圈和块</p>
<ul>
<li>
<p>最小环</p>
</li>
<li>
<p>负权环</p>
</li>
<li>
<p>连通块</p>
</li>
<li>
<p>2-SAT</p>
</li>
<li>
<p>欧拉公式</p>
</li>
<li>
<p>四色定理</p>
</li>
<li>
<p>欧拉回路</p>
</li>
</ul>
</li>
<li>
<p>强连通分量，缩点</p>
<ul>
<li>
<p>Tarjan</p>
</li>
<li>
<p>割点</p>
</li>
</ul>
</li>
<li>
<p>仙人掌</p>
</li>
</ul>
</li>
<li>
<p>计算几何</p>
<ul>
<li>
<p>凸包</p>
</li>
<li>
<p>叉积</p>
</li>
<li>
<p>线段相交</p>
</li>
<li>
<p>点积</p>
</li>
<li>
<p>半平面相交，半平面交</p>
</li>
<li>
<p>最近点对</p>
</li>
<li>
<p>凸多边形的交</p>
</li>
<li>
<p>离散化扫描</p>
</li>
<li>
<p>旋转卡壳</p>
</li>
</ul>
</li>
<li>
<p>树形结构</p>
<ul>
<li>
<p>线段树</p>
<ul>
<li>
<p>二维线段树</p>
</li>
<li>
<p>矩形树</p>
</li>
<li>
<p>zkw线段树</p>
</li>
<li>
<p>主席树</p>
</li>
</ul>
</li>
<li>
<p>点分治</p>
</li>
<li>
<p>平衡树</p>
<ul>
<li>
<p>AVL</p>
</li>
<li>
<p>Treap</p>
</li>
<li>
<p>SBT</p>
</li>
<li>
<p>Splay</p>
</li>
<li>
<p>静态排序树</p>
</li>
<li>
<p>替罪羊树</p>
</li>
</ul>
</li>
<li>
<p>二叉堆</p>
<ul>
<li>
<p>左偏树</p>
</li>
<li>
<p>斜堆</p>
</li>
<li>
<p>二项堆</p>
</li>
</ul>
</li>
<li>
<p>树状数组</p>
</li>
<li>
<p>cdq分治</p>
</li>
<li>
<p>树上距离</p>
<ul>
<li>
<p>节点到根的距离</p>
</li>
<li>
<p>最近公共祖先，LCA</p>
</li>
<li>
<p>节点间的距离</p>
</li>
<li>
<p>树的直径</p>
</li>
</ul>
</li>
<li>
<p>动态树</p>
<ul>
<li>
<p>树链剖分，树剖</p>
</li>
<li>
<p>Link-Cut Tree，LCT</p>
</li>
</ul>
</li>
<li>
<p>树的应用</p>
<ul>
<li>
<p>并查集</p>
</li>
<li>
<p>树的遍历</p>
</li>
<li>
<p>哈夫曼树</p>
</li>
<li>
<p>RMQ</p>
</li>
<li>
<p>树套树</p>
</li>
<li>
<p>可持久化</p>
</li>
<li>
<p>虚树</p>
</li>
</ul>
</li>
<li>
<p>整体二分</p>
</li>
<li>
<p>环套树</p>
</li>
<li>
<p>K-D Tree</p>
</li>
</ul>
</li>
<li>
<p>网络流</p>
<ul>
<li>
<p>最大流</p>
<ul>
<li>
<p>Dicnic</p>
</li>
<li>
<p>Sap</p>
</li>
<li>
<p>有上下界的最大流</p>
</li>
</ul>
</li>
<li>
<p>最小割</p>
<ul>
<li>
<p>闭合图</p>
</li>
<li>
<p>最小点权覆盖集</p>
</li>
<li>
<p>最大点权独立集</p>
</li>
<li>
<p>分数规划</p>
</li>
<li>
<p>最大密度子图</p>
</li>
</ul>
</li>
<li>
<p>费用流</p>
<ul>
<li>
<p>最短路增广费用流</p>
</li>
<li>
<p>zkw费用流</p>
</li>
<li>
<p>最小费用可行流</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>基础算法</p>
<ul>
<li>
<p>模拟</p>
</li>
<li>
<p>贪心</p>
</li>
<li>
<p>递推</p>
</li>
<li>
<p>递归</p>
</li>
<li>
<p>枚举，暴力</p>
</li>
<li>
<p>分治</p>
</li>
</ul>
</li>
<li>
<p>排序</p>
<ul>
<li>
<p>冒泡排序</p>
</li>
<li>
<p>选择排序</p>
</li>
<li>
<p>桶排序</p>
</li>
<li>
<p>插入排序</p>
</li>
<li>
<p>归并排序</p>
</li>
<li>
<p>快速排序，快排</p>
</li>
<li>
<p>堆排序</p>
</li>
<li>
<p>希尔排序</p>
</li>
<li>
<p>外部排序</p>
</li>
</ul>
</li>
<li>
<p>查找</p>
<ul>
<li>
<p>二分答案</p>
</li>
<li>
<p>顺序查找</p>
</li>
<li>
<p>二分查找</p>
</li>
</ul>
</li>
<li>
<p>二分图</p>
<ul>
<li>
<p>最大匹配</p>
<ul>
<li>
<p>匈牙利算法</p>
</li>
<li>
<p>一般图的最大匹配</p>
</li>
<li>
<p>Konig定理</p>
</li>
</ul>
</li>
<li>
<p>带权二分图匹配</p>
</li>
<li>
<p>稳定婚姻系统</p>
</li>
</ul>
</li>
<li>
<p>其他技巧</p>
<ul>
<li>
<p>暴力数据结构</p>
</li>
<li>
<p>高精</p>
</li>
<li>
<p>博弈论</p>
<ul>
<li>
<p>Nim游戏</p>
</li>
<li>
<p>博弈树</p>
</li>
<li>
<p>Shannon开关游戏</p>
</li>
</ul>
</li>
<li>
<p>倍增</p>
</li>
<li>
<p>离散化</p>
</li>
<li>
<p>哈希，HASH</p>
<ul>
<li>
<p>ELFhash</p>
</li>
<li>
<p>SDBM</p>
</li>
<li>
<p>BKDR</p>
</li>
</ul>
</li>
<li>
<p>随机贪心，随机化</p>
</li>
<li>
<p>快速傅里叶变换，DFT，FFT</p>
</li>
<li>
<p>位运算，按位</p>
</li>
<li>
<p>骗分</p>
</li>
<li>
<p>NP问题</p>
</li>
<li>
<p>构造</p>
</li>
<li>
<p>快速数论变换NTT</p>
</li>
<li>
<p>快速沃尔什变换FWT</p>
</li>
</ul>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/03/214-Shortest-Palindrome/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/03/214-Shortest-Palindrome/" itemprop="url">214. Shortest Palindrome</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-03T20:03:00+08:00">2019-07-03</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-07-03T22:29:19+08:00">2019-07-03</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1>题目描述</h1>
<p><a href="https://leetcode.com/problems/shortest-palindrome/" target="_blank" rel="noopener">214. Shortest Palindrome</a></p>
<p>Difficulty: <strong>Hard</strong></p>
<p>Given a string <em><strong>s</strong></em>, you are allowed to convert it to a palindrome by adding characters in front of it. Find and return the shortest palindrome you can find by performing this transformation.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;aacecaaa&quot;</span><br><span class="line">Output: &quot;aaacecaaa&quot;</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;abcd&quot;</span><br><span class="line">Output: &quot;dcbabcd&quot;</span><br></pre></td></tr></table></figure>
<h1>解法</h1>
<p>  这道题可以转化成求字符串以左侧边界为起点的“最大回文子串”。</p>
<h2 id="法一"><a class="header-anchor" href="#法一">¶</a>法一</h2>
<p>  暴力解法，先将整个字符串倒转成rev，比较<code>s[0:n-i]</code>和<code>rev[i:]</code>（i从0到n），第一次使<code>s[0:n-i]==rev[i:]</code>的<code>s[0:n-i]</code>就是题目所要求的“最大回文子串”。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">shortestPalindrome</span><span class="params">(<span class="built_in">string</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = s.size();</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">rev</span><span class="params">(s)</span></span>;</span><br><span class="line">    reverse(rev.begin(), rev.end());</span><br><span class="line">    <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s.substr(<span class="number">0</span>, n - i) == rev.substr(i))</span><br><span class="line">            <span class="keyword">return</span> rev.substr(<span class="number">0</span>, i) + s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="法二"><a class="header-anchor" href="#法二">¶</a>法二</h2>
<p>  这个解法利用双指针，两个指针分别从头和从尾遍历，尾指针每次左移一位，同时比较头指针和尾指针，如果指向相同的字符，则头指针加一；如果指向不同的字符，则头指针不动。如果头指针在过程的结尾刚好移动到尾部，说明整个字符串是回文串。**这个过程结束后能保证s[0:i]一定包含从字符串头开始的最长回文串。**利用这个结论不断缩小搜索范围，直到整个子串都是回文串。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">shortestPalindrome</span><span class="params">(<span class="built_in">string</span> s)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.size();</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = n - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[i] == s[j])</span><br><span class="line">                i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (i == n)</span><br><span class="line">            <span class="keyword">return</span> s;</span><br><span class="line">        <span class="built_in">string</span> remain_rev = s.substr(i);</span><br><span class="line">        reverse(remain_rev.begin(), remain_rev.end());</span><br><span class="line">        <span class="keyword">return</span> remain_rev + shortestPalindrome(s.substr(<span class="number">0</span>, i)) + s.substr(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="法三"><a class="header-anchor" href="#法三">¶</a>法三</h2>
<p>  背景知识:Knuth–Morris–Pratt算法。KMP算法的核心是求出失败索引查找表，也就是前缀数组next。假设<code>f(s)</code>代表在待匹配字符串的第s个字符失配时，下一个查找的起点，亦即下一次就从待匹配字符串的第<code>f(s)</code>个字符开始继续往后比较，也<strong>即是<code>b0b1b2b3b4...bs</code>的前缀也是其后缀的最长子串的长度</strong>。</p>
<p>  KMP求前缀数组的代码如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">f(<span class="number">0</span>) = <span class="number">0</span></span><br><span class="line"><span class="comment">//下面代码中的t要看成前缀长度，别看成坐标，因为坐标是从0开始的</span></span><br><span class="line"><span class="keyword">for</span>(i = <span class="number">1</span>; i &lt; n; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//假设b0~bi-1匹配，而bi失配，则取f(i-1)（b0~bi-1的最长前后缀长度）的下一个位置和bi继续匹配，如果此时b0~bf(i-1)-1匹配而bf(i-1)失配，则继续上述过程。</span></span><br><span class="line">    t = f(i<span class="number">-1</span>)</span><br><span class="line">    <span class="keyword">while</span>(t &gt; <span class="number">0</span> &amp;&amp; b[i] != b[t])</span><br><span class="line">        t = f(t<span class="number">-1</span>)</span><br><span class="line">    <span class="keyword">if</span>(b[i] == b[t])&#123;</span><br><span class="line">        ++t</span><br><span class="line">    f(i) = t</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  求最长前缀回文串等价于求s+&quot;#&quot;+reverse(s)的最后一个字符的KMP的f值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">shortestPalindrome</span><span class="params">(self, s: str)</span> -&gt; str:</span></span><br><span class="line">        S = <span class="string">''</span>.join([s, <span class="string">"#"</span>, s[::<span class="number">-1</span>]])</span><br><span class="line">        f = [<span class="number">0</span>]*len(S)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, len(S)):</span><br><span class="line">            t = f[i - <span class="number">1</span>]</span><br><span class="line">            <span class="keyword">while</span> t &gt; <span class="number">0</span> <span class="keyword">and</span> S[i] != S[t]:</span><br><span class="line">                t = f[t - <span class="number">1</span>]</span><br><span class="line">            <span class="keyword">if</span> S[i] == S[t]:</span><br><span class="line">                t += <span class="number">1</span></span><br><span class="line">            f[i] = t</span><br><span class="line">        <span class="keyword">return</span> s[f[len(S) - <span class="number">1</span>]:][::<span class="number">-1</span>]+s</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/01/212-Word-Search-II/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/01/212-Word-Search-II/" itemprop="url">212. Word Search II</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-01T20:13:00+08:00">2019-07-01</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-07-01T22:40:33+08:00">2019-07-01</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1>题目描述</h1>
<p><a href="https://leetcode.com/problems/word-search-ii/" target="_blank" rel="noopener">212. Word Search II</a></p>
<p>Difficulty: <strong>Hard</strong></p>
<p>Given a 2D board and a list of words from the dictionary, find all words in the board.</p>
<p>Each word must be constructed from letters of sequentially adjacent cell, where “adjacent” cells are those horizontally or vertically neighboring. The same letter cell may not be used more than once in a word.</p>
<p><strong>Example:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Input: </span><br><span class="line">board = [</span><br><span class="line">  [&apos;o&apos;,&apos;a&apos;,&apos;a&apos;,&apos;n&apos;],</span><br><span class="line">  [&apos;e&apos;,&apos;t&apos;,&apos;a&apos;,&apos;e&apos;],</span><br><span class="line">  [&apos;i&apos;,&apos;h&apos;,&apos;k&apos;,&apos;r&apos;],</span><br><span class="line">  [&apos;i&apos;,&apos;f&apos;,&apos;l&apos;,&apos;v&apos;]</span><br><span class="line">]</span><br><span class="line">words = [&quot;oath&quot;,&quot;pea&quot;,&quot;eat&quot;,&quot;rain&quot;]</span><br><span class="line"></span><br><span class="line">Output: [&quot;eat&quot;,&quot;oath&quot;]</span><br></pre></td></tr></table></figure>
<p><strong>Note:</strong></p>
<ol>
<li>All inputs are consist of lowercase letters <code>a-z</code>.</li>
<li>The values of <code>words</code> are distinct.</li>
</ol>
<h1>解法</h1>
<p>  这道题用DFS搜索，用字典树剪枝。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">class TrieNode:</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.dic = &#123;&#125;</span><br><span class="line">        self.word = &apos;&apos;</span><br><span class="line">​</span><br><span class="line">class Solution:</span><br><span class="line">    def findWords(self, board: List[List[str]], words: List[str]) -&gt; List[str]:</span><br><span class="line">        root = self.buildTrieTree(words)</span><br><span class="line">                </span><br><span class="line">        res = []</span><br><span class="line">        R = len(board)</span><br><span class="line">        C = len(board[0])</span><br><span class="line">        </span><br><span class="line">        cur_visited = [[False] * C for _ in range(R)]</span><br><span class="line">        </span><br><span class="line">        def dfs(i, j, node):</span><br><span class="line">            if i &lt; 0 or i &gt; R - 1 or j &lt; 0 or j &gt; C - 1 or cur_visited[i][j]:</span><br><span class="line">                return</span><br><span class="line">            </span><br><span class="line">            if board[i][j] not in node.dic:</span><br><span class="line">                return</span><br><span class="line">        </span><br><span class="line">            node = node.dic[board[i][j]]</span><br><span class="line">            </span><br><span class="line">            if node.word:</span><br><span class="line">                res.append(node.word)</span><br><span class="line">                node.word = &apos;&apos;</span><br><span class="line">            </span><br><span class="line">            for row, col in (i - 1, j),(i + 1, j),(i, j - 1),(i, j + 1):</span><br><span class="line">                cur_visited[i][j] = True</span><br><span class="line">                dfs(row, col, node)</span><br><span class="line">                cur_visited[i][j] = False</span><br><span class="line">            </span><br><span class="line">        for i in range(R):</span><br><span class="line">            for j in range(C):</span><br><span class="line">                dfs(i, j, root)</span><br><span class="line">                </span><br><span class="line">        return res   </span><br><span class="line">    </span><br><span class="line">    def buildTrieTree(self, words):</span><br><span class="line">        root = TrieNode()</span><br><span class="line">        for word in words:</span><br><span class="line">            p = root</span><br><span class="line">            for ch in word:</span><br><span class="line">                if ch not in p.dic:</span><br></pre></td></tr></table></figure>
<h1>扩展</h1>
<p>  来自大神StefanPochmann的代码，值得学习，特别是建立字典树的过程只用了短短的6行代码，简直太秀了！</p>
<p>  关键点：</p>
<ol>
<li>用复数表示board每个点，当前字符的四个方向上的相邻位置即<code>z + 1j**k,0 &lt;= k &lt;= 3</code>。</li>
<li>字典树节点用字典表示，并且用（None，True）键值对表示该节点是单词的情况，同时在遍历过一个节点后设置<code>board[i][j]=None</code>，每次递归调用DFS会把字典树节点中的None弹出字典后再判断当前字符是否在字典节点中，所以即使当前字符是None，也不用担心会因为搜到单词节点中有None（因为会在<code>if c in node</code>之前弹出None）而重复搜索之前搜索过的节点，这也是很巧妙的一点！</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findWords</span><span class="params">(self, board, words)</span>:</span></span><br><span class="line"></span><br><span class="line">			<span class="comment"># 字典树建立</span></span><br><span class="line">        root = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">            node = root</span><br><span class="line">            <span class="keyword">for</span> c <span class="keyword">in</span> word:</span><br><span class="line">                node = node.setdefault(c, &#123;&#125;)</span><br><span class="line">            node[<span class="literal">None</span>] = <span class="literal">True</span></span><br><span class="line">        <span class="comment"># 将坐标转化成复数</span></span><br><span class="line">        board = &#123;i + <span class="number">1j</span>*j: c</span><br><span class="line">                 <span class="keyword">for</span> i, row <span class="keyword">in</span> enumerate(board)</span><br><span class="line">                 <span class="keyword">for</span> j, c <span class="keyword">in</span> enumerate(row)&#125;</span><br><span class="line"></span><br><span class="line">        found = []</span><br><span class="line">        <span class="comment"># DFS搜索</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">search</span><span class="params">(node, z, word)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> node.pop(<span class="literal">None</span>, <span class="literal">None</span>):</span><br><span class="line">                found.append(word)</span><br><span class="line">            c = board.get(z)</span><br><span class="line">            <span class="keyword">if</span> c <span class="keyword">in</span> node:</span><br><span class="line">                board[z] = <span class="literal">None</span></span><br><span class="line">                <span class="keyword">for</span> k <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line">                    search(node[c], z + <span class="number">1j</span>**k, word + c)</span><br><span class="line">                board[z] = c</span><br><span class="line">        <span class="keyword">for</span> z <span class="keyword">in</span> board:</span><br><span class="line">            search(root, z, <span class="string">''</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> found</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/01/158-Read-N-Characters-Given-Read4-II/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/01/158-Read-N-Characters-Given-Read4-II/" itemprop="url">158. Read N Characters Given Read4 II</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-01T11:28:00+08:00">2019-07-01</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-07-01T11:41:00+08:00">2019-07-01</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1>题目描述</h1>
<p>The API: int read4(char *buf) reads 4 characters at a time from a file.</p>
<p>The return value is the actual number of characters read. For example, it returns 3 if there is only 3 characters left in the file.</p>
<p>By using the read4 API, implement the function int read(char *buf, int n) that reads n characters from the file.</p>
<p>The read function may be called multiple times.</p>
<p>Example 1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Input:</span><br><span class="line">&quot;filetestbuffer&quot;</span><br><span class="line">read(6)</span><br><span class="line">read(5)</span><br><span class="line">read(4)</span><br><span class="line">read(3)</span><br><span class="line">read(2)</span><br><span class="line">read(1)</span><br><span class="line">read(10)</span><br><span class="line">Output:</span><br><span class="line">6, buf = &quot;filete&quot;</span><br><span class="line">5, buf = &quot;stbuf&quot;</span><br><span class="line">3, buf = &quot;fer&quot;</span><br><span class="line">0, buf = &quot;&quot;</span><br><span class="line">0, buf = &quot;&quot;</span><br><span class="line">0, buf = &quot;&quot;</span><br><span class="line">0, buf = &quot;&quot;</span><br></pre></td></tr></table></figure>
<p>Example 2</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Input:</span><br><span class="line">&quot;abcdef&quot;</span><br><span class="line">read(1)</span><br><span class="line">read(5)</span><br><span class="line">Output:</span><br><span class="line">1, buf = &quot;a&quot;</span><br><span class="line">5, buf = &quot;bcdef&quot;</span><br></pre></td></tr></table></figure>
<h1>解法：</h1>
<p>  这道题的解法三把我看呆了，为什么别人的解法可以这么简洁明了？！</p>
<h2 id="法一"><a class="header-anchor" href="#法一">¶</a>法一</h2>
<p>  把所有字符都一次性读出来，然后用两个数记录当前读到的位置和剩余的未读的字符数，这是最暴力的解法了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">The read4 API is already defined for you.</span></span><br><span class="line"><span class="string">@param buf a list of characters</span></span><br><span class="line"><span class="string">@return an integer</span></span><br><span class="line"><span class="string">you can call Reader.read4(buf)</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.allchar = []</span><br><span class="line">        self.remainchar = <span class="number">0</span></span><br><span class="line">        self.cur = <span class="number">0</span></span><br><span class="line">        temp = [<span class="number">0</span>] * <span class="number">4</span></span><br><span class="line">        readed = <span class="number">4</span></span><br><span class="line">        <span class="keyword">while</span> readed == <span class="number">4</span>:</span><br><span class="line">            readed = Reader.read4(temp)</span><br><span class="line">            self.allchar.extend(temp[:readed])</span><br><span class="line">            self.remainchar += readed</span><br><span class="line">        <span class="comment"># print(self.allchar)</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment"># @param &#123;char[]&#125; buf destination buffer</span></span><br><span class="line">    <span class="comment"># @param &#123;int&#125; n maximum number of characters to read</span></span><br><span class="line">    <span class="comment"># @return &#123;int&#125; the number of characters read</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">read</span><span class="params">(self, buf, n)</span>:</span></span><br><span class="line">        <span class="comment"># Write your code here</span></span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> n &lt; self.remainchar:</span><br><span class="line">            buf[:n] = self.allchar[self.cur:self.cur+n]</span><br><span class="line">            self.cur += n</span><br><span class="line">            self.remainchar -= n</span><br><span class="line">            <span class="keyword">return</span> n</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            buf[:self.remainchar] = self.allchar[self.cur:self.cur+self.remainchar]    </span><br><span class="line">            tempv = self.remainchar</span><br><span class="line">            self.cur += self.remainchar</span><br><span class="line">            self.remainchar = <span class="number">0</span></span><br><span class="line">            <span class="keyword">return</span> tempv</span><br></pre></td></tr></table></figure>
<h2 id="法二"><a class="header-anchor" href="#法二">¶</a>法二</h2>
<p>  用self.remain保存上一次读取的4个字符中剩下来的字符。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">The read4 API is already defined for you.</span></span><br><span class="line"><span class="string">@param buf a list of characters</span></span><br><span class="line"><span class="string">@return an integer</span></span><br><span class="line"><span class="string">you can call Reader.read4(buf)</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.remain = [] <span class="comment"># record the unreaded characters of previous round of read</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment"># @param &#123;char[]&#125; buf destination buffer</span></span><br><span class="line">    <span class="comment"># @param &#123;int&#125; n maximum number of characters to read</span></span><br><span class="line">    <span class="comment"># @return &#123;int&#125; the number of characters read</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">read</span><span class="params">(self, buf, n)</span>:</span></span><br><span class="line">        <span class="comment"># Write your code here</span></span><br><span class="line">        readed = <span class="number">0</span> <span class="comment"># counter of characters already readed into buf</span></span><br><span class="line">        temp = [<span class="number">0</span>] * <span class="number">4</span> <span class="comment"># buf for read4</span></span><br><span class="line">        <span class="comment"># print(self.remain)</span></span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> n &gt; len(self.remain):</span><br><span class="line">            <span class="keyword">if</span> len(self.remain):</span><br><span class="line">                n -= len(self.remain)</span><br><span class="line">                buf[:len(self.remain)] = self.remain</span><br><span class="line">                readed += len(self.remain)</span><br><span class="line">                self.remain = []</span><br><span class="line">                <span class="comment"># print(buf)</span></span><br><span class="line">        </span><br><span class="line">            <span class="keyword">while</span> n &gt;= <span class="number">4</span>:</span><br><span class="line">                returnn = Reader.read4(temp)</span><br><span class="line">                buf[readed:readed+returnn] = temp</span><br><span class="line">                readed += returnn</span><br><span class="line">                <span class="keyword">if</span> returnn &lt; <span class="number">4</span>:</span><br><span class="line">                    <span class="keyword">return</span> readed</span><br><span class="line">                n -= <span class="number">4</span></span><br><span class="line">            <span class="keyword">if</span> n:</span><br><span class="line">                returnn = Reader.read4(temp)</span><br><span class="line">                <span class="keyword">if</span> n &gt;= returnn:</span><br><span class="line">                    buf[readed:readed+returnn] = temp</span><br><span class="line">                    readed += returnn</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    buf[readed:readed+n] = temp[:n]</span><br><span class="line">                    readed += n</span><br><span class="line">                    self.remain = temp[n:returnn]</span><br><span class="line">            <span class="keyword">return</span> readed</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            buf[:n] = self.remain[:n]</span><br><span class="line">            self.remain = self.remain[n:]</span><br><span class="line">            <span class="keyword">return</span> n</span><br></pre></td></tr></table></figure>
<h2 id="法三"><a class="header-anchor" href="#法三">¶</a>法三</h2>
<p>  这个解法才是最让我醍醐灌顶的解法。用大小为4的数组（记为buff）存放read4的返回结果，readpos和writepos记录当前读到的字符的位置和最后一个字符的位置。如果readpos和writepos相等，说明读到buff的结束了，就再调用read4，并将reapos放回buff的起点，writepos放在read4返回值对应的位置上（也是buff中来自刚刚这次read4调用的最后一个有效字符的位置）。每次调用read4之后检查writepos，如果为0，说明所有字符都读完了，就直接返回。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.buff = [<span class="number">0</span>] * <span class="number">4</span> <span class="comment"># record the unreaded characters of previous round of read</span></span><br><span class="line">        self.readpos = <span class="number">0</span></span><br><span class="line">        self.writepos = <span class="number">0</span></span><br><span class="line">    <span class="comment"># @param &#123;char[]&#125; buf destination buffer</span></span><br><span class="line">    <span class="comment"># @param &#123;int&#125; n maximum number of characters to read</span></span><br><span class="line">    <span class="comment"># @return &#123;int&#125; the number of characters read</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">read</span><span class="params">(self, buf, n)</span>:</span></span><br><span class="line">        <span class="comment"># Write your code here</span></span><br><span class="line">        i = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; n:</span><br><span class="line">            <span class="keyword">if</span> self.readpos == self.writepos:</span><br><span class="line">                self.writepos = Reader.read4(self.buff)</span><br><span class="line">                self.readpos = <span class="number">0</span></span><br><span class="line">                <span class="keyword">if</span> self.writepos == <span class="number">0</span>:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">            buf[i] = self.buff[self.readpos]</span><br><span class="line">            i, self.readpos = i + <span class="number">1</span>, self.readpos + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> i</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/30/179-Largest-Number/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/30/179-Largest-Number/" itemprop="url">179. Largest Number</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-30T20:02:00+08:00">2019-06-30</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-06-30T20:07:04+08:00">2019-06-30</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1>题目描述</h1>
<p><a href="https://leetcode.com/problems/largest-number/" target="_blank" rel="noopener">179. Largest Number</a></p>
<p>Difficulty: <strong>Medium</strong></p>
<p>Given a list of non negative integers, arrange them such that they form the largest number.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: [10,2]</span><br><span class="line">Output: &quot;210&quot;</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: [3,30,34,5,9]</span><br><span class="line">Output: &quot;9534330&quot;</span><br></pre></td></tr></table></figure>
<p><strong>Note:</strong> The result may be very large, so you need to return a string instead of an integer.</p>
<h1>解法</h1>
<p>自定义比较器</p>
<h2 id="法一"><a class="header-anchor" href="#法一">¶</a>法一</h2>
<p>Language: <strong>Python3</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import functools</span><br><span class="line">class Solution:</span><br><span class="line">    def largestNumber(self, nums: List[int]) -&gt; str:</span><br><span class="line">        strnums = [str(n) for n in nums]</span><br><span class="line">        def mycmp(a, b):</span><br><span class="line">            if a + b &gt; b + a:</span><br><span class="line">                return -1</span><br><span class="line">            else:</span><br><span class="line">                return 1</span><br><span class="line">        strnums.sort(key = functools.cmp_to_key(mycmp))</span><br><span class="line">        res = &apos;&apos;.join(strnums)</span><br><span class="line">        if int(res) == 0:</span><br><span class="line">            return &quot;0&quot;</span><br><span class="line">        else:</span><br><span class="line">            return res</span><br></pre></td></tr></table></figure>
<h2 id="法二"><a class="header-anchor" href="#法二">¶</a>法二</h2>
<p>自定义可比较类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Comparable</span>:</span></span><br><span class="line">    <span class="comment"># object that can be sorted thanks to magic methods.</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, num)</span>:</span></span><br><span class="line">        self.value = str(num)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__lt__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="comment"># '82' is before '824' because '82|824' is greater than '824|82'</span></span><br><span class="line">        <span class="keyword">return</span> self.value + other.value &gt; other.value + self.value</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__gt__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.value + other.value &lt; other.value + self.value</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__eq__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.value + other.value == other.value + self.value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">largestNumber</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: str</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        numStrings = [Comparable(n) <span class="keyword">for</span> n <span class="keyword">in</span> nums]</span><br><span class="line">        numStrings.sort()</span><br><span class="line">        output = <span class="string">''</span>.join((e.value <span class="keyword">for</span> e <span class="keyword">in</span> numStrings))</span><br><span class="line">        <span class="keyword">return</span> output.lstrip(<span class="string">'0'</span>) <span class="keyword">or</span> <span class="string">'0'</span></span><br></pre></td></tr></table></figure>
<h2 id="法三"><a class="header-anchor" href="#法三">¶</a>法三</h2>
<p>重载运算符</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LargerNumKey</span><span class="params">(str)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__lt__</span><span class="params">(x, y)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> x+y &gt; y+x</span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">largestNumber</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        largest_num = <span class="string">''</span>.join(sorted(map(str, nums), key=LargerNumKey))</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'0'</span> <span class="keyword">if</span> largest_num[<span class="number">0</span>] == <span class="string">'0'</span> <span class="keyword">else</span> largest_num</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/30/206-Reverse-Linked-List/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/30/206-Reverse-Linked-List/" itemprop="url">206. Reverse Linked List</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-30T18:36:36+08:00">2019-06-30</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-06-30T18:40:31+08:00">2019-06-30</time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1>题目描述</h1>
<p><a href="https://leetcode.com/problems/reverse-linked-list/" target="_blank" rel="noopener">206. Reverse Linked List</a></p>
<p>Difficulty: <strong>Easy</strong></p>
<p>Reverse a singly linked list.</p>
<p><strong>Example:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL</span><br><span class="line">Output: 5-&gt;4-&gt;3-&gt;2-&gt;1-&gt;NULL</span><br></pre></td></tr></table></figure>
<p><strong>Follow up:</strong></p>
<p>A linked list can be reversed either iteratively or recursively. Could you implement both?</p>
<h4 id="solution"><a class="header-anchor" href="#solution">¶</a>Solution</h4>
<p>Language: <strong>Ruby</strong></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"># class ListNode</span></span><br><span class="line"><span class="comment">#     attr_accessor :val, :next</span></span><br><span class="line"><span class="comment">#     def initialize(val)</span></span><br><span class="line"><span class="comment">#         <span class="doctag">@val</span> = val</span></span><br><span class="line"><span class="comment">#         <span class="doctag">@next</span> = nil</span></span><br><span class="line"><span class="comment">#     end</span></span><br><span class="line"><span class="comment"># end</span></span><br><span class="line">​</span><br><span class="line"><span class="comment"># <span class="doctag">@param</span> &#123;ListNode&#125; head</span></span><br><span class="line"><span class="comment"># <span class="doctag">@return</span> &#123;ListNode&#125;</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reverse_list</span><span class="params">(head)</span></span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h1>解法</h1>
<h2 id="解法一"><a class="header-anchor" href="#解法一">¶</a>解法一</h2>
<p>非递归解法</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">reverseList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    ListNode prev = null;</span><br><span class="line">    ListNode curr = head;</span><br><span class="line">    <span class="keyword">while</span> (curr != null) &#123;</span><br><span class="line">        ListNode nextTemp = curr.next;</span><br><span class="line">        curr.next = prev;</span><br><span class="line">        prev = curr;</span><br><span class="line">        curr = nextTemp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> prev;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="解法二"><a class="header-anchor" href="#解法二">¶</a>解法二</h2>
<p>非递归解法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"># class ListNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.next = None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">reverseList</span><span class="params">(self, head: ListNode)</span> -&gt; ListNode:</span></span><br><span class="line">        dummy = ListNode(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">while</span> head:</span><br><span class="line">            dummy.next, head.next, head = head, dummy.next, head.next            </span><br><span class="line">        <span class="keyword">return</span> dummy.next</span><br></pre></td></tr></table></figure>
<h2 id="解法三"><a class="header-anchor" href="#解法三">¶</a>解法三</h2>
<p>递归解法，<strong>重要！重要！重要！</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">reverseList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (head == null || head.next == null) <span class="keyword">return</span> head;</span><br><span class="line">    ListNode p = reverseList(head.next);</span><br><span class="line">    head.next.next = head;</span><br><span class="line">    head.next = null;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/28/201-Bitwise-AND-of-Numbers-Range/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/28/201-Bitwise-AND-of-Numbers-Range/" itemprop="url">201. Bitwise AND of Numbers Range</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-28T09:32:00+08:00">2019-06-28</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-06-28T10:25:35+08:00">2019-06-28</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1>题目描述</h1>
<p><a href="https://leetcode.com/problems/bitwise-and-of-numbers-range/" target="_blank" rel="noopener">201. Bitwise AND of Numbers Range</a></p>
<p>Difficulty: <strong>Medium</strong></p>
<p>Given a range [m, n] where 0 &lt;= m &lt;= n &lt;= 2147483647, return the bitwise AND of all numbers in this range, inclusive.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: [5,7]</span><br><span class="line">Output: 4</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: [0,1]</span><br><span class="line">Output: 0</span><br></pre></td></tr></table></figure>
<h1>解法</h1>
<h2 id="法一"><a class="header-anchor" href="#法一">¶</a>法一</h2>
<p>  我自己的解法是利用求数的二进制表示中1的个数的减一相与算法。例如:以100100为n，100100到100000之间的某数为m（100000&lt;=m&lt;100100），则m到n的所有数的与是100000，所以下一步可直接从100000开始计算，之前的数字都可以跳过。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">rangeBitwiseAnd</span><span class="params">(self, m: int, n: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">while</span> n != <span class="number">0</span> <span class="keyword">and</span> n &gt; m:</span><br><span class="line">            n = (n<span class="number">-1</span>) &amp; n</span><br><span class="line">        <span class="keyword">return</span> n</span><br></pre></td></tr></table></figure>
<h2 id="法二"><a class="header-anchor" href="#法二">¶</a>法二</h2>
<p>  法二源自https://leetcode-cn.com/problems/two-sum/solution/shu-zi-fan-wei-an-wei-yu-yun-suan-by-l03。 n的二进制位比m二进制最左边的1高时，&amp;的结果必然为0； 由这个思想启发，二进制最高位相同时，这个1会保存，然后比较右一位，相同也保留… 所以只需要m n 同时右移到相等时 m n的值就是&amp;后能保留的位数，然后左移回来就是最后的值。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">rangeBitwiseAnd</span><span class="params">(<span class="keyword">int</span> m, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>  count=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(m!=n)&#123;</span><br><span class="line">        m&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">        n&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> m&lt;&lt;count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>总结</h1>
<p>  n的二进制表示比m长，则结果为0（如1000到10100）；二者长度相等，则最高位的1保留。每次将二者的最高位1保留，然后之后的部分的二进制表示长度继续比较，重复直到二者长度不等为止。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/27/202-Happy-Number/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/27/202-Happy-Number/" itemprop="url">202. Happy Number</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-27T23:12:00+08:00">2019-06-27</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-06-27T23:15:19+08:00">2019-06-27</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1>题目描述</h1>
<p><a href="https://leetcode.com/problems/happy-number/" target="_blank" rel="noopener">202. Happy Number</a></p>
<p>Difficulty: <strong>Easy</strong></p>
<p>Write an algorithm to determine if a number is “happy”.</p>
<p>A happy number is a number defined by the following process: Starting with any positive integer, replace the number by the sum of the squares of its digits, and repeat the process until the number equals 1 (where it will stay), or it loops endlessly in a cycle which does not include 1. Those numbers for which this process ends in 1 are happy numbers.</p>
<p>**Example: **</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Input: 19</span><br><span class="line">Output: true</span><br><span class="line">Explanation: </span><br><span class="line">12 + 92 = 82</span><br><span class="line">82 + 22 = 68</span><br><span class="line">62 + 82 = 100</span><br><span class="line">12 + 02 + 02 = 1</span><br></pre></td></tr></table></figure>
<h1>解法</h1>
<h2 id="法一"><a class="header-anchor" href="#法一">¶</a>法一</h2>
<p>  用集合存放已经遍历过的值，每次遍历一个数之前看这个数在不在集合里。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class Solution:</span><br><span class="line">    def isHappy(self, n: int) -&gt; bool:</span><br><span class="line">        square = [i*i for i in range(1, 10)]</span><br><span class="line">        s = set()</span><br><span class="line">        while n not in s and n != 1:</span><br><span class="line">            s.add(n)</span><br><span class="line">            sums = 0</span><br><span class="line">            while n:</span><br><span class="line">                sums += (n%10)**2</span><br><span class="line">                n = n // 10</span><br><span class="line">            n = sums</span><br><span class="line">        if n == 1:</span><br><span class="line">            return True</span><br><span class="line">        else:</span><br><span class="line">            return False</span><br></pre></td></tr></table></figure>
<h2 id="法二"><a class="header-anchor" href="#法二">¶</a>法二</h2>
<p>  快慢指针的做法，超级巧的想法，把链表找环和这道题联系在一起了！</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">digitSquareSum</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>, tmp;</span><br><span class="line">    <span class="keyword">while</span> (n) &#123;</span><br><span class="line">        tmp = n % <span class="number">10</span>;</span><br><span class="line">        sum += tmp * tmp;</span><br><span class="line">        n /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isHappy</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> slow, fast;</span><br><span class="line">    slow = fast = n;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        slow = digitSquareSum(slow);</span><br><span class="line">        fast = digitSquareSum(fast);</span><br><span class="line">        fast = digitSquareSum(fast);</span><br><span class="line">    &#125; <span class="keyword">while</span>(slow != fast);</span><br><span class="line">    <span class="keyword">if</span> (slow == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/19/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><span class="page-number current">20</span><a class="page-number" href="/page/21/">21</a><span class="space">&hellip;</span><a class="page-number" href="/page/25/">25</a><a class="extend next" rel="next" href="/page/21/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">lidanyang</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">246</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">90</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/lidanyang" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:1261727840@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lidanyang</span>

  

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Gemini</a> v6.0.0</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.0"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=6.0.0"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=6.0.0"></script>


  

</body>
</html>
