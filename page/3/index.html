<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.0.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.0" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="分类">
<meta property="og:url" content="http://yoursite.com/categories/index.html">
<meta property="og:site_name" content="Just a blog">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-05-28T06:22:34.105Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="分类">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.0.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/categories/">





  <title>Just a blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Just a blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/06/1330-Reverse-Subarray-To-Maximize-Array-Value/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/06/1330-Reverse-Subarray-To-Maximize-Array-Value/" itemprop="url">1330. Reverse Subarray To Maximize Array Value</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-06T15:31:00+08:00">2020-03-06</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-03-07T00:27:14+08:00">2020-03-07</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1330-reverse-subarray-to-maximize-array-value"><a class="header-anchor" href="#1330-reverse-subarray-to-maximize-array-value">¶</a><a href="https://leetcode.com/problems/reverse-subarray-to-maximize-array-value/" target="_blank" rel="noopener">1330. Reverse Subarray To Maximize Array Value</a></h3>
<p>Difficulty: <strong>Hard</strong></p>
<p>You are given an integer array <code>nums</code>. The <em>value</em> of this array is defined as the sum of <code>|nums[i]-nums[i+1]|</code> for all <code>0 &lt;= i &lt; nums.length-1</code>.</p>
<p>You are allowed to select any subarray of the given array and reverse it. You can perform this operation <strong>only once</strong>.</p>
<p>Find maximum possible value of the final array.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [2,3,1,5,4]</span><br><span class="line">Output: 10</span><br><span class="line">Explanation: By reversing the subarray [3,1,5] the array becomes [2,5,1,3,4] whose value is 10.</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [2,4,9,24,2,1,10]</span><br><span class="line">Output: 68</span><br></pre></td></tr></table></figure>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 3*10^4</code></li>
<li><code>-10^5 &lt;= nums[i] &lt;= 10^5</code></li>
</ul>
<h4 id="solution"><a class="header-anchor" href="#solution">¶</a>Solution</h4>
<p>不要忘了翻转前缀或后缀数组的情况。。。。。。</p>
<h6 id="法一-曼哈顿距离"><a class="header-anchor" href="#法一-曼哈顿距离">¶</a>法一 曼哈顿距离</h6>
<p>假设要交换的数是<code>... a b ... c d ...</code>，那么交换前后的差值为<code>|a-c|+|b-d|-|a-b|-|c-d|</code>，根据绝对值的性质<code>|a| = max(a, -a)</code>，那么<code>|a-c|+|b-d|-|a-b|-|c-d|</code>可以转化为<code>max((a+b)-(c+d), (a-b)-(c-d), (-a+b)-(-c+d), (-a-b)-(-c-d))-|a-b|-|c-d|</code>，发现max中的每个式子有规律，前一个括号和后一括号中的子式的系数相同，所以可以拆分成<code>max((a+b-|a-b|)-(c+d+|c-d|), (a-b-|a-b|)-(c-d+|c-d|), (-a+b-|a-b|)-(-c+d+|c-d|), (-a-b-|a-b|)-(-c-d+|c-d|))</code>对每一项分别求最大值即可。比如<code>(a+b)-|a-b|-(c+d+|c-d|)</code>这一项可以维护一个<code>c+d+|c-d|</code>前缀最小值，用<code>(a+b)-|a-b|</code>减去该最小值即是对应的最大值。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxValueAfterReverse</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;nums.size()<span class="number">-1</span>; ++i) ans += <span class="built_in">abs</span>(nums[i+<span class="number">1</span>]-nums[i]);</span><br><span class="line">        <span class="keyword">int</span> mini[<span class="number">4</span>], a, b = INT_MIN;</span><br><span class="line">        <span class="built_in">memset</span>(mini, <span class="number">127</span>, <span class="keyword">sizeof</span> mini);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size()<span class="number">-1</span>; ++i)&#123;</span><br><span class="line">            a = <span class="built_in">abs</span>(nums[i+<span class="number">1</span>] - nums[i]);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; ++j)&#123; </span><br><span class="line">                <span class="keyword">int</span> t = j, s = <span class="number">0</span>; </span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">2</span>; ++k)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(t&amp;<span class="number">1</span>) s+=nums[i+k];</span><br><span class="line">                    <span class="keyword">else</span> s-=nums[i+k];</span><br><span class="line">                    t&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                b = max(s-a-mini[j], b);</span><br><span class="line">                mini[j] = min(mini[j], s+a);</span><br><span class="line">            &#125;   </span><br><span class="line">            b = max(<span class="built_in">abs</span>(nums[<span class="number">0</span>]-nums[i+<span class="number">1</span>]) - a,b);</span><br><span class="line">            b = max(<span class="built_in">abs</span>(nums[nums.size()<span class="number">-1</span>] - nums[i]) - a,b);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans + b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//a b c d</span></span><br><span class="line"><span class="comment">//a c b d</span></span><br><span class="line"><span class="comment">//|a-c| + |d-b| -|a-b| -|d-c|</span></span><br><span class="line"><span class="comment">//max(a-c,c-a)+max(d-b,b-d)-max(a-b,b-a)-max(d-c,c-d)</span></span><br><span class="line"><span class="comment">//max&#123;a+d-b-c, a+b-d-c, c+d-b-a, c+b-d-a&#125; - max&#123;a+d-b-c, a+c-d-b,d+b-a-c,b+c-d-a&#125;</span></span><br><span class="line"><span class="comment">//max&#123;|a+d-b-c|,|d+c-b-a|&#125;-max&#123;|(a-b)-(c-d)|,|(a-b)+(c-d)|&#125;</span></span><br><span class="line">​</span><br></pre></td></tr></table></figure>
<h6 id="法二"><a class="header-anchor" href="#法二">¶</a>法二</h6>
<p>可以验证所有<code>... a b ... c d ...</code>这样的情况交换后的差值都是<code>max(min(a, b),min(c,d)) - min(max(a,b),max(c,d))</code>，即<code>|a-b|+|c-d| - |a-c|-|b-d| = max(min(a, b),min(c,d)) - min(max(a,b),max(c,d))</code>。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">constexpr</span> <span class="keyword">static</span> <span class="keyword">int</span> inf = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxValueAfterReverse</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>, n = nums.size();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;nums.size()<span class="number">-1</span>; ++i) </span><br><span class="line">            sum += <span class="built_in">abs</span>(nums[i+<span class="number">1</span>]-nums[i]);</span><br><span class="line">        <span class="keyword">int</span> b = -inf, high_min = inf, low_max=-inf;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n<span class="number">-1</span>; ++i)&#123;  </span><br><span class="line">            b = max(<span class="built_in">abs</span>(nums[<span class="number">0</span>]-nums[i+<span class="number">1</span>]) - <span class="built_in">abs</span>(nums[i+<span class="number">1</span>]-nums[i]),b);</span><br><span class="line">            b = max(<span class="built_in">abs</span>(nums[n<span class="number">-1</span>] - nums[i]) - <span class="built_in">abs</span>(nums[i+<span class="number">1</span>]-nums[i]),b);</span><br><span class="line">            high_min = min(high_min, max(nums[i+<span class="number">1</span>], nums[i]));</span><br><span class="line">            low_max = max(low_max, min(nums[i+<span class="number">1</span>], nums[i]));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum + max(b, <span class="number">2</span>*(low_max - high_min));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/05/1298-Maximum-Candies-You-Can-Get-from-Boxes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/05/1298-Maximum-Candies-You-Can-Get-from-Boxes/" itemprop="url">1298. Maximum Candies You Can Get from Boxes</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-05T20:28:00+08:00">2020-03-05</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-03-05T21:55:30+08:00">2020-03-05</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1298-maximum-candies-you-can-get-from-boxes"><a class="header-anchor" href="#1298-maximum-candies-you-can-get-from-boxes">¶</a><a href="https://leetcode.com/problems/maximum-candies-you-can-get-from-boxes/" target="_blank" rel="noopener">1298. Maximum Candies You Can Get from Boxes</a></h3>
<p>Difficulty: <strong>Hard</strong></p>
<p>Given <code>n</code> boxes, each box is given in the format <code>[status, candies, keys, containedBoxes]</code> where:</p>
<ul>
<li><code>status[i]</code>: an integer which is <strong>1</strong> if <code>box[i]</code> is open and <strong>0</strong> if <code>box[i]</code> is closed.</li>
<li><code>candies[i]</code>: an integer representing the number of candies in <code>box[i]</code>.</li>
<li><code>keys[i]</code>: an array contains the indices of the boxes you can open with the key in <code>box[i]</code>.</li>
<li><code>containedBoxes[i]</code>: an array contains the indices of the boxes found in <code>box[i]</code>.</li>
</ul>
<p>You will start with some boxes given in <code>initialBoxes</code> array. You can take all the candies in any open box and you can use the keys in it to open new boxes and you also can use the boxes you find in it.</p>
<p>Return <em>the maximum number of candies</em> you can get following the rules above.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Input: status = [1,0,1,0], candies = [7,5,4,100], keys = [[],[],[1],[]], containedBoxes = [[1,2],[3],[],[]], initialBoxes = [0]</span><br><span class="line">Output: 16</span><br><span class="line">Explanation: You will be initially given box 0\. You will find 7 candies in it and boxes 1 and 2\. Box 1 is closed and you don&apos;t have a key for it so you will open box 2\. You will find 4 candies and a key to box 1 in box 2.</span><br><span class="line">In box 1, you will find 5 candies and box 3 but you will not find a key to box 3 so box 3 will remain closed.</span><br><span class="line">Total number of candies collected = 7 + 4 + 5 = 16 candy.</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: status = [1,0,0,0,0,0], candies = [1,1,1,1,1,1], keys = [[1,2,3,4,5],[],[],[],[],[]], containedBoxes = [[1,2,3,4,5],[],[],[],[],[]], initialBoxes = [0]</span><br><span class="line">Output: 6</span><br><span class="line">Explanation: You have initially box 0\. Opening it you can find boxes 1,2,3,4 and 5 and their keys. The total number of candies will be 6.</span><br></pre></td></tr></table></figure>
<p><strong>Example 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: status = [1,1,1], candies = [100,1,100], keys = [[],[0,2],[]], containedBoxes = [[],[],[]], initialBoxes = [1]</span><br><span class="line">Output: 1</span><br></pre></td></tr></table></figure>
<p><strong>Example 4:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: status = [1], candies = [100], keys = [[]], containedBoxes = [[]], initialBoxes = []</span><br><span class="line">Output: 0</span><br></pre></td></tr></table></figure>
<p><strong>Example 5:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: status = [1,1,1], candies = [2,3,2], keys = [[],[],[]], containedBoxes = [[],[],[]], initialBoxes = [2,1,0]</span><br><span class="line">Output: 7</span><br></pre></td></tr></table></figure>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= status.length &lt;= 1000</code></li>
<li><code>status.length == candies.length == keys.length == containedBoxes.length == n</code></li>
<li><code>status[i]</code> is <code>0</code> or <code>1</code>.</li>
<li><code>1 &lt;= candies[i] &lt;= 1000</code></li>
<li><code>&lt;font face=&quot;monospace&quot; style=&quot;display: inline;&quot;&gt;0 &lt;= keys[i].length &lt;= status.length&lt;/font&gt;</code></li>
<li><code>0 &lt;= keys[i][j] &lt; status.length</code></li>
<li>All values in <code>keys[i]</code> are unique.</li>
<li><code>&lt;font face=&quot;monospace&quot; style=&quot;display: inline;&quot;&gt;0 &lt;=&lt;/font&gt; containedBoxes&lt;font face=&quot;monospace&quot; style=&quot;display: inline;&quot;&gt;[i].length &lt;= status.length&lt;/font&gt;</code></li>
<li><code>0 &lt;= containedBoxes[i][j] &lt; status.length</code></li>
<li>All values in <code>containedBoxes[i]</code> are unique.</li>
<li>Each box is contained in one box at most.</li>
<li><code>0 &lt;= initialBoxes.length &lt;= status.length</code></li>
<li><code>&lt;font face=&quot;monospace&quot; style=&quot;display: inline;&quot;&gt;0 &lt;= initialBoxes[i] &lt; status.length&lt;/font&gt;</code></li>
</ul>
<h4 id="solution"><a class="header-anchor" href="#solution">¶</a>Solution</h4>
<h6 id="法一-bfs"><a class="header-anchor" href="#法一-bfs">¶</a>法一 bfs</h6>
<p>这个bfs是另类的bfs，终止条件不是队列为空，因为有可能存在永远也打不开的盒子，并且打不开的盒子还要推回队列中。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxCandies</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; status, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; candies, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; keys, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; containedBoxes, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; initialBoxes)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; state(status.size());</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;&amp; x : initialBoxes) q.push(x), state[x] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">bool</span> canopen;</span><br><span class="line">        <span class="keyword">do</span>&#123;</span><br><span class="line">            canopen=<span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">int</span> sz = q.size();</span><br><span class="line">            <span class="keyword">while</span>(sz--)&#123;</span><br><span class="line">                <span class="keyword">auto</span> n = q.front(); q.pop();</span><br><span class="line">                <span class="keyword">if</span>(status[n] || state[n]&gt;&gt;<span class="number">1</span>)&#123;<span class="comment">//箱子本来就开着或者可以用当前手上的钥匙打开箱子</span></span><br><span class="line">                    canopen = <span class="literal">true</span>;</span><br><span class="line">                    ans += candies[n];</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;&amp; b : containedBoxes[n])&#123;</span><br><span class="line">                        <span class="keyword">if</span>(state[b]&amp;<span class="number">1</span>) <span class="keyword">continue</span>;<span class="comment">//已经入过队的箱子</span></span><br><span class="line">                        state[b] |= <span class="number">1</span>;</span><br><span class="line">                        q.push(b);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;&amp; k : keys[n]) state[k] |= <span class="number">1</span>&lt;&lt;<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> q.push(n);<span class="comment">//打不开的箱子推回队列</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">while</span>(canopen);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h6 id="法二-不用bfs"><a class="header-anchor" href="#法二-不用bfs">¶</a>法二 不用bfs</h6>
<p>这是leetcode Runtime Distribution里最快的解法，新增了一个状态2，代表打开并且糖果已经被取走，这样就能巧妙地用status节省空间。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxCandies</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; status, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; candies, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; keys, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; containedBoxes, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; initialBoxes)</span> </span>&#123;</span><br><span class="line">      <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; bx(initialBoxes.begin(), initialBoxes.end());</span><br><span class="line">      <span class="keyword">bool</span> changed = <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">int</span> result = <span class="number">0</span>;  </span><br><span class="line">      <span class="keyword">do</span> &#123;</span><br><span class="line">        changed = <span class="literal">false</span>;  </span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; bm;<span class="comment">//存放这一轮过后未打开的已有盒子和新加的从已有能打开的盒子中取出来的盒子  </span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> b : bx) &#123;</span><br><span class="line">          <span class="keyword">if</span>( status[b] == <span class="number">1</span>) &#123;</span><br><span class="line">            status[b] = <span class="number">2</span>;<span class="comment">//盒子打开后设为2，防止再一次打开该盒子</span></span><br><span class="line">            result += candies[b];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k : keys[b]) &#123;</span><br><span class="line">              <span class="keyword">if</span>( status[k] == <span class="number">0</span> ) <span class="comment">//关闭的盒子设为打开状态 </span></span><br><span class="line">                status[k] = <span class="number">1</span>;  </span><br><span class="line">            &#125;</span><br><span class="line">            bm.insert(bm.end(), containedBoxes[b].cbegin(), containedBoxes[b].cend());</span><br><span class="line">            changed = <span class="literal">true</span>;  </span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span>( status[b] == <span class="number">0</span> )</span><br><span class="line">            bm.push_back(b);  </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">std</span>::sort(bm.begin(), bm.end());</span><br><span class="line">        bm.erase(<span class="built_in">std</span>::unique(bm.begin(), bm.end()), bm.end()); </span><br><span class="line">        <span class="built_in">std</span>::swap(bm, bx);  </span><br><span class="line">      &#125; <span class="keyword">while</span>(changed);</span><br><span class="line">      <span class="keyword">return</span> result;  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/05/1000-Minimum-Cost-to-Merge-Stones/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/05/1000-Minimum-Cost-to-Merge-Stones/" itemprop="url">1000. Minimum Cost to Merge Stones</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-05T16:29:00+08:00">2020-03-05</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-03-05T20:07:37+08:00">2020-03-05</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1000-minimum-cost-to-merge-stones"><a class="header-anchor" href="#1000-minimum-cost-to-merge-stones">¶</a><a href="https://leetcode.com/problems/minimum-cost-to-merge-stones/" target="_blank" rel="noopener">1000. Minimum Cost to Merge Stones</a></h3>
<p>Difficulty: <strong>Hard</strong></p>
<p>There are <code>N</code> piles of stones arranged in a row.  The <code>i</code>-th pile has <code>stones[i]</code> stones.</p>
<p>A <em>move</em> consists of merging <strong>exactly <code>K</code> consecutive</strong> piles into one pile, and the cost of this move is equal to the total number of stones in these <code>K</code> piles.</p>
<p>Find the minimum cost to merge all piles of stones into one pile.  If it is impossible, return <code>-1</code>.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Input: stones = [3,2,4,1], K = 2</span><br><span class="line">Output: 20</span><br><span class="line">Explanation: </span><br><span class="line">We start with [3, 2, 4, 1].</span><br><span class="line">We merge [3, 2] for a cost of 5, and we are left with [5, 4, 1].</span><br><span class="line">We merge [4, 1] for a cost of 5, and we are left with [5, 5].</span><br><span class="line">We merge [5, 5] for a cost of 10, and we are left with [10].</span><br><span class="line">The total cost was 20, and this is the minimum possible.</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: stones = [3,2,4,1], K = 3</span><br><span class="line">Output: -1</span><br><span class="line">Explanation: After any merge operation, there are 2 piles left, and we can&apos;t merge anymore.  So the task is impossible.</span><br></pre></td></tr></table></figure>
<p><strong>Example 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Input: stones = [3,5,1,2,6], K = 3</span><br><span class="line">Output: 25</span><br><span class="line">Explanation: </span><br><span class="line">We start with [3, 5, 1, 2, 6].</span><br><span class="line">We merge [5, 1, 2] for a cost of 8, and we are left with [3, 8, 6].</span><br><span class="line">We merge [3, 8, 6] for a cost of 17, and we are left with [17].</span><br><span class="line">The total cost was 25, and this is the minimum possible.</span><br></pre></td></tr></table></figure>
<p><strong><span style="display: inline;">Note:</span></strong></p>
<ul>
<li><code>&lt;span style=&quot;display: inline;&quot;&gt;1 &lt;= stones.length &lt;= 30&lt;/span&gt;</code></li>
<li><code>&lt;span style=&quot;display: inline;&quot;&gt;2 &lt;= K &lt;= 30&lt;/span&gt;</code></li>
<li><code>&lt;span style=&quot;display: inline;&quot;&gt;1 &lt;= stones[i] &lt;= 100&lt;/span&gt;</code></li>
</ul>
<h4 id="solution"><a class="header-anchor" href="#solution">¶</a>Solution</h4>
<p>Language: <strong>C++</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; pref;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; memo;</span><br><span class="line">    <span class="keyword">int</span> K;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">mergeStones</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; stones, <span class="keyword">int</span> K)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>((stones.size() - <span class="number">1</span>) % (K - <span class="number">1</span>) != <span class="number">0</span>) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">this</span>-&gt;K = K;</span><br><span class="line">        <span class="keyword">this</span>-&gt;pref = stones;</span><br><span class="line">        memo.resize(<span class="number">50</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(<span class="number">50</span>,INT_MAX));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; stones.size() - <span class="number">1</span>; ++i) pref[i+<span class="number">1</span>] += pref[i];</span><br><span class="line">        <span class="keyword">return</span> dp(stones, <span class="number">0</span>, stones.size() - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">dp</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;stones, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> b = (j-i)%(K<span class="number">-1</span>)?<span class="number">0</span>:pref[j] - (i&gt;<span class="number">0</span>?pref[i<span class="number">-1</span>]:<span class="number">0</span>);<span class="comment">//区间长度可以合成一个结点才加上这个区间的值</span></span><br><span class="line">        <span class="keyword">if</span>(i == j) <span class="keyword">return</span> memo[i][j] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(memo[i][j] != INT_MAX) <span class="keyword">return</span> memo[i][j];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k = i; k &lt; j; k += K - <span class="number">1</span>) memo[i][j] = min(memo[i][j],b+dp(stones,i,k)+dp(stones, k+<span class="number">1</span>, j));</span><br><span class="line">        <span class="keyword">return</span> memo[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/05/nowcoder-13230/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/05/nowcoder-13230/" itemprop="url">nowcoder:区间dp</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-05T02:38:00+08:00">2020-03-05</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-03-09T16:10:58+08:00">2020-03-09</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/nowcoder/" itemprop="url" rel="index">
                    <span itemprop="name">nowcoder</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/nowcoder/区间dp/" itemprop="url" rel="index">
                    <span itemprop="name">区间dp</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>合并回文子串</strong></p>
<p>链接：<a href="https://ac.nowcoder.com/acm/problem/13230" target="_blank" rel="noopener">https://ac.nowcoder.com/acm/problem/13230</a><br>
来源：牛客网</p>
<p>输入两个字符串A和B，合并成一个串C，属于A和B的字符在C中顺序保持不变。如&quot;abc&quot;和&quot;xyz&quot;可以被组合成&quot;axbycz&quot;或&quot;abxcyz&quot;等。<br>
我们定义字符串的价值为其最长回文子串的长度（回文串表示从正反两边看完全一致的字符串，如&quot;aba&quot;和&quot;xyyx&quot;）。<br>
需要求出所有可能的C中价值最大的字符串，输出这个最大价值即可</p>
<p>法一</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">60</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n ;</span><br><span class="line">    <span class="keyword">bool</span> dp[MAXN][MAXN][MAXN][MAXN];</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt;n ;++i)&#123;</span><br><span class="line">        <span class="built_in">string</span> A, B;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; A &gt;&gt; B;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="keyword">sizeof</span> dp);</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= A.size(); ++j)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt;= B.size(); ++k)&#123;</span><br><span class="line">                <span class="keyword">if</span>(j == <span class="number">0</span> &amp;&amp; k == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                dp[j][k][<span class="number">0</span>][<span class="number">0</span>] = dp[j][k][<span class="number">1</span>][<span class="number">0</span>] = dp[j][k][<span class="number">0</span>][<span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> a = <span class="number">0</span>; a &lt;= j<span class="number">-1</span>; ++a)<span class="comment">//ends with A[j-1]</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> b = <span class="number">0</span>; b &lt;= k; ++b)&#123;</span><br><span class="line">                        <span class="keyword">if</span>(!dp[j<span class="number">-1</span>][k][a][b]) <span class="keyword">continue</span>;</span><br><span class="line">                        <span class="keyword">if</span>(j<span class="number">-1</span>-a &gt; <span class="number">0</span> &amp;&amp; A[j<span class="number">-2</span>-a] == A[j<span class="number">-1</span>]) dp[j][k][a+<span class="number">2</span>][b] = <span class="literal">true</span>;</span><br><span class="line">                        <span class="keyword">if</span>(k-b&gt;<span class="number">0</span> &amp;&amp; B[k-b<span class="number">-1</span>] == A[j<span class="number">-1</span>]) dp[j][k][a+<span class="number">1</span>][b+<span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">                        <span class="keyword">if</span>(dp[j][k][a+<span class="number">1</span>][b+<span class="number">1</span>]||dp[j][k][a+<span class="number">2</span>][b]) ans = max(ans, a+b+<span class="number">2</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> a = <span class="number">0</span>; a &lt;= j; ++a)<span class="comment">//ends with B[k-1]</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> b = <span class="number">0</span>; b &lt;= k<span class="number">-1</span>; ++b)&#123;</span><br><span class="line">                        <span class="keyword">if</span>(!dp[j][k<span class="number">-1</span>][a][b]) <span class="keyword">continue</span>;</span><br><span class="line">                        <span class="keyword">if</span>(j-a&gt;<span class="number">0</span> &amp;&amp; A[j<span class="number">-1</span>-a] == B[k<span class="number">-1</span>]) dp[j][k][a+<span class="number">1</span>][b+<span class="number">1</span>] = <span class="literal">true</span>; </span><br><span class="line">                        <span class="keyword">if</span>(k-b<span class="number">-1</span>&gt; <span class="number">0</span> &amp;&amp; B[k-b<span class="number">-2</span>] == B[k<span class="number">-1</span>]) dp[j][k][a][b+<span class="number">2</span>] = <span class="literal">true</span>;</span><br><span class="line">                        <span class="keyword">if</span>(dp[j][k][a+<span class="number">1</span>][b+<span class="number">1</span>]||dp[j][k][a][b+<span class="number">2</span>]) ans = max(ans, a+b+<span class="number">2</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>法二</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">bool</span> dp[<span class="number">55</span>][<span class="number">55</span>][<span class="number">55</span>][<span class="number">55</span>];</span><br><span class="line"><span class="keyword">char</span> a[<span class="number">55</span>];</span><br><span class="line"><span class="keyword">char</span> b[<span class="number">55</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i,j,k,l,T;</span><br><span class="line">    <span class="keyword">int</span> len1,len2;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</span><br><span class="line">    <span class="keyword">while</span>(T--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s%s"</span>,a+<span class="number">1</span>,b+<span class="number">1</span>);</span><br><span class="line">        len1=<span class="built_in">strlen</span>(a+<span class="number">1</span>);len2=<span class="built_in">strlen</span>(b+<span class="number">1</span>);</span><br><span class="line">        <span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">        <span class="keyword">int</span> pp,tt;</span><br><span class="line">        <span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(pp=<span class="number">0</span>;pp&lt;=len1;pp++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(tt=<span class="number">0</span>;tt&lt;=len2;tt++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(i=<span class="number">1</span>,j=pp;j&lt;=len1;i++,j++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">for</span>(k=<span class="number">1</span>,l=tt;l&lt;=len2;k++,l++)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">if</span>(pp+tt&lt;=<span class="number">1</span>)dp[i][j][k][l]=<span class="number">1</span>;<span class="comment">//a的i~j和b的k~l能形成回文</span></span><br><span class="line">                        <span class="keyword">else</span></span><br><span class="line">                        &#123;</span><br><span class="line">                            <span class="keyword">if</span>(dp[i+<span class="number">1</span>][j<span class="number">-1</span>][k][l]==<span class="number">1</span>&amp;&amp;a[i]==a[j])dp[i][j][k][l]=<span class="number">1</span>;</span><br><span class="line">                            <span class="keyword">if</span>(dp[i+<span class="number">1</span>][j][k][l<span class="number">-1</span>]==<span class="number">1</span>&amp;&amp;a[i]==b[l])dp[i][j][k][l]=<span class="number">1</span>;</span><br><span class="line">                            <span class="keyword">if</span>(dp[i][j][k+<span class="number">1</span>][l<span class="number">-1</span>]==<span class="number">1</span>&amp;&amp;b[k]==b[l])dp[i][j][k][l]=<span class="number">1</span>;</span><br><span class="line">                            <span class="keyword">if</span>(dp[i][j<span class="number">-1</span>][k+<span class="number">1</span>][l]==<span class="number">1</span>&amp;&amp;a[j]==b[k])dp[i][j][k][l]=<span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span>(dp[i][j][k][l]==<span class="number">1</span>)</span><br><span class="line">                            ans=max(ans,pp+tt);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>玩具取名</strong></p>
<p>链接：<a href="https://ac.nowcoder.com/acm/problem/19973" target="_blank" rel="noopener">https://ac.nowcoder.com/acm/problem/19973</a><br>
来源：牛客网</p>
<p>某人有一套玩具，并想法给玩具命名。首先他选择WING四个字母中的任意一个字母作为玩具的基本名字。然后他会根据自己的喜好，将名字中任意一个字母用“WING”中任意两个字母代替，使得自己的名字能够扩充得很长。<br>
现在，他想请你猜猜某一个很长的名字，最初可能是由哪几个字母变形过来的。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,n) for (int i=a;i&lt;n;i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> per(i,a,n) for (int i=n-1;i&gt;=a;i--)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(x) ((int)(x).size())</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; VI;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int8_t</span> idx[<span class="number">128</span>];</span><br><span class="line"><span class="keyword">int</span> cnt[<span class="number">4</span>];</span><br><span class="line"><span class="keyword">bool</span> candi[<span class="number">4</span>][<span class="number">4</span>][<span class="number">4</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    idx[<span class="string">'W'</span>] = <span class="number">0</span>,idx[<span class="string">'I'</span>] = <span class="number">1</span>,idx[<span class="string">'N'</span>] = <span class="number">2</span>,idx[<span class="string">'G'</span>] = <span class="number">3</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i) <span class="built_in">cin</span>&gt;&gt;cnt[i];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">char</span> a, b;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; cnt[i]; ++j)&#123;</span><br><span class="line">            <span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b;</span><br><span class="line">            candi[i][idx[a]][idx[b]] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;s;</span><br><span class="line">    <span class="keyword">int</span> n = s.size();</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt;&gt;&gt; dp(s.size(), </span><br><span class="line">                                    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt;&gt;(s.size(), </span><br><span class="line">                                    <span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt;(<span class="number">4</span>)));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> l = <span class="number">0</span>; l &lt; n; ++l)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>, j = l; j &lt; n; ++i, ++j)&#123;</span><br><span class="line">            <span class="keyword">if</span>(l == <span class="number">0</span>) dp[i][j][idx[s[i]]] = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> t = <span class="number">0</span>; t &lt; <span class="number">4</span>; ++t)</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> e = i; e &lt; j&amp;&amp;!dp[i][j][t]; ++e)</span><br><span class="line">                        <span class="keyword">for</span>(<span class="keyword">int</span> q = <span class="number">0</span>; q &lt; <span class="number">4</span>&amp;&amp;!dp[i][j][t]; ++q)</span><br><span class="line">                            <span class="keyword">for</span>(<span class="keyword">int</span> w = <span class="number">0</span>; w &lt; <span class="number">4</span>&amp;&amp;!dp[i][j][t]; ++w)</span><br><span class="line">                                <span class="keyword">if</span>(dp[i][e][q]&amp;&amp;dp[e+<span class="number">1</span>][j][w]&amp;&amp;candi[t][q][w])</span><br><span class="line">                                    dp[i][j][t] = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">if</span>(dp[<span class="number">0</span>][n<span class="number">-1</span>][<span class="number">0</span>]) <span class="built_in">cout</span> &lt;&lt; <span class="string">'W'</span>;</span><br><span class="line">    <span class="keyword">if</span>(dp[<span class="number">0</span>][n<span class="number">-1</span>][<span class="number">1</span>]) <span class="built_in">cout</span> &lt;&lt; <span class="string">'I'</span>;</span><br><span class="line">    <span class="keyword">if</span>(dp[<span class="number">0</span>][n<span class="number">-1</span>][<span class="number">2</span>]) <span class="built_in">cout</span> &lt;&lt; <span class="string">'N'</span>;</span><br><span class="line">    <span class="keyword">if</span>(dp[<span class="number">0</span>][n<span class="number">-1</span>][<span class="number">3</span>]) <span class="built_in">cout</span> &lt;&lt; <span class="string">'G'</span>;</span><br><span class="line">    <span class="keyword">if</span>(!dp[<span class="number">0</span>][n<span class="number">-1</span>][<span class="number">0</span>]&amp;&amp;!dp[<span class="number">0</span>][n<span class="number">-1</span>][<span class="number">1</span>]&amp;&amp;!dp[<span class="number">0</span>][n<span class="number">-1</span>][<span class="number">2</span>]&amp;&amp;!dp[<span class="number">0</span>][n<span class="number">-1</span>][<span class="number">3</span>]) <span class="built_in">cout</span> &lt;&lt; <span class="string">"The name is wrong!"</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>涂色PAINT</strong></p>
<p>链接：<a href="https://ac.nowcoder.com/acm/problem/19909" target="_blank" rel="noopener">https://ac.nowcoder.com/acm/problem/19909</a><br>
来源：牛客网</p>
<p>假设你有一条长度为5的木版，初始时没有涂过任何颜色。你希望把它的5个单位长度分别涂上红、绿、蓝、绿、红色，用一个长度为5的字符串表示这个目标：RGBGR。 每次你可以把一段连续的木版涂成一个给定的颜色，后涂的颜色覆盖先涂的颜色。<br>
例如第一次把木版涂成RRRRR，第二次涂成RGGGR，第三次涂成RGBGR，达到目标。 用尽量少的涂色次数达到目标。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 0x3f3f3f3f</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">110</span>;</span><br><span class="line"><span class="keyword">int</span> n,K;</span><br><span class="line"><span class="keyword">char</span> c[N];</span><br><span class="line"><span class="keyword">int</span> dp[N][N],ans[N];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//scanf("%d%d",&amp;n,&amp;K);</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>,c);</span><br><span class="line">    n=<span class="built_in">strlen</span>(c);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> l=<span class="number">1</span>;l&lt;=n;l++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n-l+<span class="number">1</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> j=i+l<span class="number">-1</span>;</span><br><span class="line">            dp[i][j]=dp[i+<span class="number">1</span>][j]+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=i+<span class="number">1</span>;k&lt;=j;k++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(c[i]==c[k])</span><br><span class="line">                    dp[i][j]=min(dp[i][j],dp[i+<span class="number">1</span>][k]+dp[k+<span class="number">1</span>][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[<span class="number">0</span>][n<span class="number">-1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>小小粉刷匠</strong></p>
<p>链接：<a href="https://ac.nowcoder.com/acm/problem/16129" target="_blank" rel="noopener">https://ac.nowcoder.com/acm/problem/16129</a><br>
来源：牛客网</p>
<p>“lalala,我是一个快乐的粉刷匠”,小名一边快活地唱着歌,一边开心地刷着墙&quot;,兴致突然被打断,“小名,你今天如果刷不完这一栋楼的墙，那么你就等着被炒鱿鱼吧”,老板声嘶力竭的吼着。苦恼的小名因为不想被炒鱿鱼,所以希望尽量快地刷完墙,由于他本人的数学基础很差,他现在请你来帮助他计算最少完成每一堵墙需要刷多少次。每一面墙有n个段,对于每个段指定一个目标颜色ci。刚开始的时候所有的墙壁为白色,我们现在有一个刷子,刷子长度为k,刷子每次可以选择一种颜色,然后选择段数为(1～k)连续的墙段刷成选择的一种颜色。我们现在想要知道，为了把墙变成目标颜色，最少刷多少次(保证指定的目标颜色一定不为白色)。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//和涂色那道题一样，只不过多加了个长度最多为k的限制</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,n) for (int i=a;i&lt;n;i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> per(i,a,n) for (int i=n-1;i&gt;=a;i--)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(x) ((int)(x).size())</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; VI;</span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;VI&gt; VVI;</span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;VVI&gt; VVVI;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,k; <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;k;</span><br><span class="line">    <span class="function">VI <span class="title">color</span><span class="params">(n)</span></span>; rep(i, <span class="number">0</span>, n) <span class="built_in">cin</span>&gt;&gt;color[i];</span><br><span class="line">    <span class="function">VVI <span class="title">dp</span><span class="params">(n+<span class="number">2</span>, VI(n+<span class="number">2</span>))</span></span>;</span><br><span class="line">    rep(l, <span class="number">1</span>, n+<span class="number">1</span>) rep(i, <span class="number">0</span>, n-l+<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">int</span> j = i +l <span class="number">-1</span>;</span><br><span class="line">        dp[i][j] = <span class="number">1</span> + dp[i+<span class="number">1</span>][j];</span><br><span class="line">        rep(t,i+<span class="number">1</span>,min(j+<span class="number">1</span>,i+k)) <span class="keyword">if</span>(color[i] == color[t]) dp[i][j]=min(dp[i][j], dp[i][t<span class="number">-1</span>]+dp[t+<span class="number">1</span>][j]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>, dp[<span class="number">0</span>][n<span class="number">-1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>字符合并</strong></p>
<p>这道题很经典！！！</p>
<p>链接：<a href="https://ac.nowcoder.com/acm/problem/19997" target="_blank" rel="noopener">https://ac.nowcoder.com/acm/problem/19997</a><br>
来源：牛客网</p>
<p>有一个长度为 n 的 01 串，你可以每次将相邻的 k 个字符合并，得到一个新的字符并获得一定分数。得到的新字符和分数由这 k 个字符确定。你需要求出你能获得的最大分数。</p>
<p>题解：<a href="https://blog.csdn.net/clove_unique/article/details/52261939" target="_blank" rel="noopener">https://blog.csdn.net/clove_unique/article/details/52261939</a></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,n) for (int i=a;i&lt;n;i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> per(i,a,n) for (int i=n-1;i&gt;=a;i--)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(x) ((int)(x).size())</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; VI;</span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;VI&gt; VVI;</span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;VVI&gt; VVVI;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">300</span>;</span><br><span class="line">ll w[<span class="number">1</span>&lt;&lt;<span class="number">8</span>], dp[N][N][<span class="number">1</span>&lt;&lt;<span class="number">8</span>]&#123;&#125;, inf, ans = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> n, k, a[N], c[<span class="number">1</span>&lt;&lt;<span class="number">8</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;k);</span><br><span class="line">    getchar();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="keyword">if</span>(getchar() == <span class="string">'0'</span>) a[i] = <span class="number">0</span>; <span class="keyword">else</span> a[i] = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">memset</span>(dp, <span class="number">128</span>, <span class="keyword">sizeof</span> dp); inf = dp[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    rep(i, <span class="number">0</span>, <span class="number">1</span>&lt;&lt;k) <span class="built_in">scanf</span>(<span class="string">"%d%lld"</span>, c+i, w+i);</span><br><span class="line">    rep(i, <span class="number">0</span>, n) dp[i][i][a[i]]=<span class="number">0</span>;</span><br><span class="line">    rep(l, <span class="number">1</span>, n) rep(i, <span class="number">0</span>, n-l)&#123;</span><br><span class="line">        <span class="keyword">int</span> j = i+l, len = l;</span><br><span class="line">        <span class="keyword">while</span>(len &gt;= k) len-=k<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> m = j; m &gt;i; m-=k<span class="number">-1</span>)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> S = <span class="number">0</span>; S &lt; <span class="number">1</span>&lt;&lt;len; ++S)&#123;</span><br><span class="line">                <span class="keyword">if</span>(dp[i][m<span class="number">-1</span>][S] == inf) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span>(dp[m][j][<span class="number">0</span>] != inf) dp[i][j][S&lt;&lt;<span class="number">1</span>] = max(dp[i][j][S&lt;&lt;<span class="number">1</span>], dp[i][m<span class="number">-1</span>][S]+dp[m][j][<span class="number">0</span>]);</span><br><span class="line">                <span class="keyword">if</span>(dp[m][j][<span class="number">1</span>] != inf) dp[i][j][S&lt;&lt;<span class="number">1</span>|<span class="number">1</span>] = max(dp[i][j][S&lt;&lt;<span class="number">1</span>|<span class="number">1</span>], dp[i][m<span class="number">-1</span>][S]+dp[m][j][<span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">if</span>(len == k<span class="number">-1</span>)&#123;</span><br><span class="line">            ll g[<span class="number">2</span>] = &#123;inf, inf&#125;;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> S = <span class="number">0</span>; S &lt; <span class="number">1</span>&lt;&lt;k; ++S) <span class="keyword">if</span>(dp[i][j][S] != inf) g[c[S]] = max(g[c[S]], dp[i][j][S] + w[S]);</span><br><span class="line">            dp[i][j][<span class="number">0</span>] = g[<span class="number">0</span>], dp[i][j][<span class="number">1</span>] = g[<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    rep(i, <span class="number">0</span>, <span class="number">1</span>&lt;&lt;k) ans = max(ans, dp[<span class="number">0</span>][n<span class="number">-1</span>][i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>字符串折叠</strong></p>
<p>链接：<a href="https://ac.nowcoder.com/acm/problem/20238" target="_blank" rel="noopener">https://ac.nowcoder.com/acm/problem/20238</a><br>
来源：牛客网</p>
<p>折叠的定义如下：</p>
<p>一个字符串可以看成它自身的折叠。记作S = S<br>
X(S)是X(X&gt;1)个S连接在一起的串的折叠。记作X(S) = SSSS…S(X个S)。<br>
如果A = A’, B = B’，则AB = A’B’ 例如，因为3(A) = AAA, 2(B) = BB，所以3(A)C2(B) = AAACBB，而2(3(A)C)2(B) = AAACAAACBB</p>
<p>给一个字符串，求它的最短折叠。例如AAAAAAAAAABABABCCD的最短折叠为：9(A)3(AB)CCD。</p>
<p>我的解法:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,n) for (int i=a;i&lt;n;i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> per(i,a,n) for (int i=n-1;i&gt;=a;i--)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(x) ((int)(x).size())</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; VI;</span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;VI&gt; VVI;</span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;VVI&gt; VVVI;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">char</span> S[N];</span><br><span class="line"><span class="keyword">int</span> dp[N][N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x=<span class="number">0</span>,y=<span class="number">1</span>;<span class="keyword">char</span> c=getchar();</span><br><span class="line">    <span class="keyword">while</span>(c&gt;<span class="string">'9'</span>||c&lt;<span class="string">'0'</span>)&#123;<span class="keyword">if</span>(c==<span class="string">'0'</span>)y=<span class="number">-1</span>;c=getchar();&#125;</span><br><span class="line">    <span class="keyword">while</span>(c&gt;=<span class="string">'0'</span>&amp;&amp;c&lt;=<span class="string">'9'</span>)&#123;x=x*<span class="number">10</span>+c-<span class="string">'0'</span>;c=getchar();&#125;</span><br><span class="line">    <span class="keyword">return</span> x*y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span> l)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; l; ++k) <span class="keyword">if</span>(S[i+k] != S[j+k]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>, S);</span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">strlen</span>(S);</span><br><span class="line">    rep(i, <span class="number">0</span>, n) dp[i][i] = <span class="number">1</span>;</span><br><span class="line">    rep(l, <span class="number">1</span>, n) rep(i, <span class="number">0</span>, n-l)&#123;</span><br><span class="line">        <span class="keyword">int</span> j = i+l;</span><br><span class="line">        dp[i][j] = l+<span class="number">1</span>;</span><br><span class="line">        rep(m, i, j)&#123;</span><br><span class="line">            dp[i][j] = min(dp[i][j], dp[i][m]+dp[m+<span class="number">1</span>][j]);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> len = m - i + <span class="number">1</span>, st = m + <span class="number">1</span>, cnt = <span class="number">2</span>, add; </span><br><span class="line">                st+len<span class="number">-1</span> &lt;=j &amp;&amp; cmp(st, i, len); </span><br><span class="line">                st += len, cnt++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(cnt &lt; <span class="number">10</span>) add = <span class="number">1</span>; <span class="keyword">else</span> <span class="keyword">if</span>(cnt &lt;<span class="number">100</span>) add = <span class="number">2</span>; <span class="keyword">else</span> add =<span class="number">3</span>;</span><br><span class="line">                dp[i][j] = min(dp[i][j], dp[i][m]+dp[st+len][j]+<span class="number">2</span>+add);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[<span class="number">0</span>][n<span class="number">-1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>标准解法:<br>
思路差不多，但是这个解法是在标准区间dp模板上对每个子串加了特判(判断<strong>整个</strong>字符串是否能折叠)。判断能否折叠的函数很巧妙，类似滑动窗口的思想。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">105</span>;</span><br><span class="line"><span class="keyword">char</span> buf[maxn];</span><br><span class="line"><span class="keyword">int</span> dp[maxn][maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> len, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=l+len; i&lt;=r; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (buf[i]!=buf[i-len]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">length</span><span class="params">(<span class="keyword">int</span> len)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (len&gt;=<span class="number">100</span>) <span class="keyword">return</span> <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">if</span> (len&gt;=<span class="number">10</span>) <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>,buf+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> n=<span class="built_in">strlen</span>(buf+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) dp[i][i]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> len=<span class="number">2</span>; len&lt;=n; ++len) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i+len<span class="number">-1</span>&lt;=n; ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> j=i+len<span class="number">-1</span>;</span><br><span class="line">            dp[i][j]=len;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k=i; k&lt;j; ++k)  dp[i][j]=min(dp[i][j],dp[i][k]+dp[k+<span class="number">1</span>][j]);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> l=<span class="number">1</span>; l&lt;len; ++l) &#123; <span class="comment">//枚举合并的长度</span></span><br><span class="line">                <span class="keyword">if</span> (len%l) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span> (check(l,i,j)) &#123;</span><br><span class="line">                    dp[i][j]=min(dp[i][j],dp[i][i+l<span class="number">-1</span>]+length(len/l));</span><br><span class="line">                    <span class="keyword">break</span>;  <span class="comment">//加不加都无所谓，因为从最长开始合并一定是最优的</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[<span class="number">1</span>][n]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>压缩</strong></p>
<p>链接：<a href="https://ac.nowcoder.com/acm/problem/20252" target="_blank" rel="noopener">https://ac.nowcoder.com/acm/problem/20252</a><br>
来源：牛客网</p>
<p>给一个由小写字母组成的字符串，我们可以用一种简单的方法来压缩其中的重复信息。<br>
压缩后的字符串除了小 写字母外还可以（但不必）包含大写字母R与M，其中M标记重复串的开始，R重复从上一个M（如果当前位置左边没 有M，则从串的开始算起）开始的解压结果（称为缓冲串）。<br>
bcdcdcdcd可以压缩为bMcdRR，下面是解压缩的过程</p>
<p>另一个例子是abcabcdabcabcdxyxyz可以被压缩为abcRdRMxyRz。</p>
<p>题解：<br>
这道题的和上面的那道字符串折叠有点像，但是比那个要更难，因为这里要求的M只能在连续折叠的段里出现一次，而之前那个题的左括号（相当于这里的M）没有这个限制。</p>
<h6 id="法一"><a class="header-anchor" href="#法一">¶</a>法一</h6>
<p><code>dp[i][j]</code>看成是左边有M的情况下，压缩后的最短的长度（没算上M），这个状态设置很巧妙。在计算子区间的时候通过倒序遍历子区间进行折叠（贪心的思想），算出一共通过折叠减少了多少长度。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,n) for (int i=a;i&lt;n;i++)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> per(i,a,n) for (int i=n-1;i&gt;=a;i--)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mp make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(x) ((int)(x).size())</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; VI;</span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;VI&gt; VVI;</span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;VVI&gt; VVVI;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x=<span class="number">0</span>,y=<span class="number">1</span>;<span class="keyword">char</span> c=getchar();</span><br><span class="line">    <span class="keyword">while</span>(c&gt;<span class="string">'9'</span>||c&lt;<span class="string">'0'</span>)&#123;<span class="keyword">if</span>(c==<span class="string">'0'</span>)y=<span class="number">-1</span>;c=getchar();&#125;</span><br><span class="line">    <span class="keyword">while</span>(c&gt;=<span class="string">'0'</span>&amp;&amp;c&lt;=<span class="string">'9'</span>)&#123;x=x*<span class="number">10</span>+c-<span class="string">'0'</span>;c=getchar();&#125;</span><br><span class="line">    <span class="keyword">return</span> x*y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">char</span> s[<span class="number">1000</span>];</span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">1000</span>][<span class="number">1000</span>];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">same</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> l = j - i + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(l&amp;<span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = j; k&gt;=i+l/<span class="number">2</span>; --k) <span class="keyword">if</span>(s[k] != s[k-l/<span class="number">2</span>]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>, s);</span><br><span class="line">    n = <span class="built_in">strlen</span>(s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) dp[i][i] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> l = <span class="number">2</span>; l &lt;= n; ++l)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n - l; ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> j = i + l - <span class="number">1</span>, cnt = l;</span><br><span class="line">            dp[i][j] = l;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = i; k &lt; j; ++k) dp[i][j] = min(dp[i][j], dp[i][k]+<span class="number">1</span>+dp[k+<span class="number">1</span>][j]);<span class="comment">//此处+1是为了在前一段和后一段中间加一个M，防止后一段受前一段影响</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = j; k &gt;= i; --k)</span><br><span class="line">                <span class="keyword">if</span>(same(i, k))&#123;</span><br><span class="line">                    cnt -= ((k-i+<span class="number">1</span>)&gt;&gt;<span class="number">1</span>) - <span class="number">1</span>;</span><br><span class="line">                    k -= ((k-i+<span class="number">1</span>)&gt;&gt;<span class="number">1</span>) - <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            dp[i][j] = min(dp[i][j], cnt);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[<span class="number">0</span>][n<span class="number">-1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="法二"><a class="header-anchor" href="#法二">¶</a>法二</h6>
<p>来自luogu的题解，作者是https://www.luogu.com.cn/user/145441，思路是多加一维代表是否字符串<strong>中间</strong>（注意不是开头，开头默认有M，类似于法一的那种约定）有M这个状态:</p>
<p>区间DP好题,看了很久才理解</p>
<p>本来想<code>f[i][j]</code>表示<code>[i,j]</code>的最短长度,结果发现无法处理M</p>
<p><code>f[i][j][0/1]</code>表示<code>[i,j]</code>中间没有(0)/有(1)M的最短长度</p>
<p>如果前后能压缩:<code>f[i][j][0]=min(f[i][mid][0]+1)</code></p>
<p><code>f[i][j][t]=min(f[i][k][t]+j-(k+1)+1)</code>(直接加上后半段)(t=0/1)</p>
<p><code>f[i][j][1]=min(f[i][k][1]+f[k+1][j][1]+1)</code>(+1是为了让后半段的R不会受前半段的M的影响)</p>
<p>注意:<code>f[i][j]</code>求的是单独考虑<code>[i,j]</code>的解,即假设序列只有<code>[i,j]</code> 的子问题,这时根据题意,如果R之前没有M,那么就以序列开头为起点,因此可以理解为:<code>f[i][j][0/1]</code>表示<code>[i,j]</code>中间没有(0)/有(1)M的最短长度,并且<code>[i-1]</code>为M,这样可能会解决对方程的一些质疑</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">60</span>;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">char</span> s[maxn];</span><br><span class="line"><span class="keyword">int</span> f[maxn][maxn][<span class="number">2</span>];</span><br><span class="line"><span class="keyword">bool</span> vis[maxn][maxn][<span class="number">2</span>];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>((r-l+<span class="number">1</span>)&amp;<span class="number">1</span>)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>,len=r-l+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=l;i&lt;=mid;i++)<span class="keyword">if</span>(s[i]!=s[i+len/<span class="number">2</span>])<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l==r)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(vis[l][r][k])<span class="keyword">return</span> f[l][r][k];</span><br><span class="line">    <span class="keyword">int</span> res=r-l+<span class="number">1</span>;</span><br><span class="line">    vis[l][r][k]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(k)<span class="keyword">for</span>(<span class="keyword">int</span> i=l;i&lt;r;i++)res=min(res,dfs(l,i,<span class="number">1</span>)+dfs(i+<span class="number">1</span>,r,<span class="number">1</span>)+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=l;i&lt;r;i++)res=min(res,dfs(l,i,<span class="number">0</span>)+r-(i+<span class="number">1</span>)+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span>(check(l,r))res=min(res,dfs(l,(l+r)&gt;&gt;<span class="number">1</span>,<span class="number">0</span>)+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> f[l][r][k]=res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>,s+<span class="number">1</span>);n=<span class="built_in">strlen</span>(s+<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>,min(dfs(<span class="number">1</span>,n,<span class="number">1</span>),dfs(<span class="number">1</span>,n,<span class="number">0</span>)));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;`</span><br></pre></td></tr></table></figure>
<h6 id="法三-一维dp"><a class="header-anchor" href="#法三-一维dp">¶</a>法三 一维dp</h6>
<p>这个解法是法一的降维版本</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LL long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> uLL unsigned long long</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">55</span>;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">rd</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x=<span class="number">0</span>,w=<span class="number">1</span>;<span class="keyword">char</span> ch=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(ch&lt;<span class="string">'0'</span>||ch&gt;<span class="string">'9'</span>) &#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>) w=<span class="number">-1</span>;ch=getchar();&#125;</span><br><span class="line">    <span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span>&amp;&amp;ch&lt;=<span class="string">'9'</span>) &#123;x=(x&lt;&lt;<span class="number">3</span>)+(x&lt;&lt;<span class="number">1</span>)+(ch^<span class="number">48</span>);ch=getchar();&#125;</span><br><span class="line">    <span class="keyword">return</span> x*w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">char</span> cc[N];</span><br><span class="line">uLL ha[N],bs[N];</span><br><span class="line"><span class="function">il uLL <span class="title">hh</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;<span class="keyword">return</span> ha[r]-ha[l<span class="number">-1</span>]*bs[r-l+<span class="number">1</span>];&#125;</span><br><span class="line"><span class="keyword">int</span> n,f[N];</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">w</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> an=r-l+<span class="number">1</span>+(l==<span class="number">1</span>),nw=<span class="number">1</span>; <span class="comment">//左端点为1,由于开头加好了W,所以这里不压缩长度先加上1平衡压缩要加上的W</span></span><br><span class="line">    <span class="keyword">while</span>(l&lt;r)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(l&lt;r&amp;&amp;hh(l,mid)!=hh(mid+<span class="number">1</span>,r)) --r,++nw,mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(l&gt;=r) <span class="keyword">break</span>;</span><br><span class="line">        ++nw,r=mid;</span><br><span class="line">        an=min(an,nw+r-l+<span class="number">1</span>); <span class="comment">//代价也可以看做M的个数+R的个数+后面的一些零碎字母+前半截前缀长度</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> an;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>,cc+<span class="number">1</span>),n=<span class="built_in">strlen</span>(cc+<span class="number">1</span>);</span><br><span class="line">    bs[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) bs[i]=bs[i<span class="number">-1</span>]*<span class="number">233</span>,ha[i]=ha[i<span class="number">-1</span>]*<span class="number">233</span>+cc[i],f[i]=i+<span class="number">1</span>;<span class="comment">//f[i]=i+1默认开头有个M所以要+1</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=i;++j)</span><br><span class="line">            f[i]=min(f[i],f[j<span class="number">-1</span>]+w(j,i));<span class="comment">//当j=1时f[j-1]=f[0]=0没有计入开头的M，而当j!=1时计入了开头的M，为了解决这个差异才需要在w函数里加上int an=r-l+1+(l==1)中后面那个(l==1)来平衡M的个数。</span></span><br><span class="line">            <span class="comment">//另外为什么不直接设置f[0]=1?因为如果直接设置的话，在w的循环里如果折叠了[0,i]也会计入一个M，这个M会和开头的0之前的M重叠，而在j&gt;1时则不会出现这种重叠M的情况</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,f[n]<span class="number">-1</span>);  <span class="comment">//把开头没有的W减掉</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>更多题解见https://www.luogu.com.cn/problemnew/solution/P2470。</p>
<p>总之这道题是一道好题！！！看似简单实际暗藏玄机！！！</p>
<hr>
<p><strong>sue的小球</strong></p>
<p>链接：<a href="https://ac.nowcoder.com/acm/problem/20312" target="_blank" rel="noopener">https://ac.nowcoder.com/acm/problem/20312</a><br>
来源：牛客网</p>
<p>Sue和Sandy最近迷上了一个电脑游戏，这个游戏的故事发在美丽神秘并且充满刺激的大海上，Sue有一支轻便小巧的小船。然而，Sue的目标并不是当一个海盗，而是要收集空中漂浮的彩蛋，Sue有一个秘密武器，只要她将小船划到一个彩蛋的正下方，然后使用秘密武器便可以在瞬间收集到这个彩蛋。然而，彩蛋有一个魅力值，这个魅力值会随着彩蛋在空中降落的时间而降低，Sue要想得到更多的分数，必须尽量在魅力值高的时候收集这个彩蛋，而如果一个彩蛋掉入海中，它的魅力值将会变成一个负数，但这并不影响Sue的兴趣，因为每一个彩蛋都是不同的，Sue希望收集到所有的彩蛋。 然而Sandy就没有Sue那么浪漫了，Sandy希望得到尽可能多的分数，为了解决这个问题，他先将这个游戏抽象成了如下模型： 以Sue的初始位置所在水平面作为x轴。 一开始空中有N个彩蛋，对于第i个彩蛋，他的初始位置用整数坐标（xi, yi）表示，游戏开始后，它匀速沿y轴负方向下落,速度为vi单位距离/单位时间。Sue的初始位置为(x0, 0)，Sue可以沿x轴的正方向或负方向移动，Sue的移动速度是1单位距离/单位时间，使用秘密武器得到一个彩蛋是瞬间的，得分为当前彩蛋的y坐标的千分之一。 现在，Sue和Sandy请你来帮忙，为了满足Sue和Sandy各自的目标，你决定在收集到所有彩蛋的基础上，得到的分数最高</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/03/1268-Search-Suggestions-System/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/03/1268-Search-Suggestions-System/" itemprop="url">1268. Search Suggestions System</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-03T22:56:00+08:00">2020-03-03</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-03-03T22:58:21+08:00">2020-03-03</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1268-search-suggestions-system"><a class="header-anchor" href="#1268-search-suggestions-system">¶</a><a href="https://leetcode.com/problems/search-suggestions-system/" target="_blank" rel="noopener">1268. Search Suggestions System</a></h3>
<p>Difficulty: <strong>Medium</strong></p>
<p>Given an array of strings <code>products</code> and a string <code>searchWord</code>. We want to design a system that suggests at most three product names from <code>products</code> after each character of <code>searchWord</code> is typed. Suggested products should have common prefix with the searchWord. If there are more than three products with a common prefix return the three lexicographically minimums products.</p>
<p>Return <em>list of lists</em> of the suggested <code>products</code> after each character of <code>searchWord</code> is typed.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Input: products = [&quot;mobile&quot;,&quot;mouse&quot;,&quot;moneypot&quot;,&quot;monitor&quot;,&quot;mousepad&quot;], searchWord = &quot;mouse&quot;</span><br><span class="line">Output: [</span><br><span class="line">[&quot;mobile&quot;,&quot;moneypot&quot;,&quot;monitor&quot;],</span><br><span class="line">[&quot;mobile&quot;,&quot;moneypot&quot;,&quot;monitor&quot;],</span><br><span class="line">[&quot;mouse&quot;,&quot;mousepad&quot;],</span><br><span class="line">[&quot;mouse&quot;,&quot;mousepad&quot;],</span><br><span class="line">[&quot;mouse&quot;,&quot;mousepad&quot;]</span><br><span class="line">]</span><br><span class="line">Explanation: products sorted lexicographically = [&quot;mobile&quot;,&quot;moneypot&quot;,&quot;monitor&quot;,&quot;mouse&quot;,&quot;mousepad&quot;]</span><br><span class="line">After typing m and mo all products match and we show user [&quot;mobile&quot;,&quot;moneypot&quot;,&quot;monitor&quot;]</span><br><span class="line">After typing mou, mous and mouse the system suggests [&quot;mouse&quot;,&quot;mousepad&quot;]</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: products = [&quot;havana&quot;], searchWord = &quot;havana&quot;</span><br><span class="line">Output: [[&quot;havana&quot;],[&quot;havana&quot;],[&quot;havana&quot;],[&quot;havana&quot;],[&quot;havana&quot;],[&quot;havana&quot;]]</span><br></pre></td></tr></table></figure>
<p><strong>Example 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: products = [&quot;bags&quot;,&quot;baggage&quot;,&quot;banner&quot;,&quot;box&quot;,&quot;cloths&quot;], searchWord = &quot;bags&quot;</span><br><span class="line">Output: [[&quot;baggage&quot;,&quot;bags&quot;,&quot;banner&quot;],[&quot;baggage&quot;,&quot;bags&quot;,&quot;banner&quot;],[&quot;baggage&quot;,&quot;bags&quot;],[&quot;bags&quot;]]</span><br></pre></td></tr></table></figure>
<p><strong>Example 4:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: products = [&quot;havana&quot;], searchWord = &quot;tatiana&quot;</span><br><span class="line">Output: [[],[],[],[],[],[],[]]</span><br></pre></td></tr></table></figure>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= products.length &lt;= 1000</code></li>
<li>There are no repeated elements in <code>products</code>.</li>
<li><code>1 &lt;= Σ products[i].length &lt;= 2 * 10^4</code></li>
<li>All characters of <code>products[i]</code> are lower-case English letters.</li>
<li><code>1 &lt;= searchWord.length &lt;= 1000</code></li>
<li>All characters of <code>searchWord</code> are lower-case English letters.</li>
</ul>
<h4 id="solution"><a class="header-anchor" href="#solution">¶</a>Solution</h4>
<p>暴力法略</p>
<h6 id="法一-二分"><a class="header-anchor" href="#法一-二分">¶</a>法一 二分</h6>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&gt; suggestedProducts(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; p, <span class="built_in">string</span> searchWord) &#123;</span><br><span class="line">        sort(p.begin(), p.end());</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&gt; ans(searchWord.size());</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; searchWord.size(); ++i)&#123;</span><br><span class="line">            <span class="keyword">auto</span> it = lower_bound(p.begin(), p.end(), searchWord.substr(<span class="number">0</span>, i+<span class="number">1</span>));<span class="comment">//下界</span></span><br><span class="line">            searchWord[i]++;</span><br><span class="line">            <span class="keyword">auto</span> it1 = lower_bound(p.begin(), p.end(), searchWord.substr(<span class="number">0</span>, i+<span class="number">1</span>));<span class="comment">//上界</span></span><br><span class="line">            searchWord[i]--;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j &lt; <span class="number">3</span> &amp;&amp; it != it1; ++it, ++j) ans[i].push_back(*it);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h6 id="法二-字典树"><a class="header-anchor" href="#法二-字典树">¶</a>法二 字典树</h6>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&#123;</span></span><br><span class="line">        Node *nxt[<span class="number">26</span>]&#123;&#125;;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line">    &#125;;</span><br><span class="line">    Node *root;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;s, <span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> cur = root;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> c: s)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!cur-&gt;nxt[c-<span class="string">'a'</span>]) cur-&gt;nxt[c-<span class="string">'a'</span>] = <span class="keyword">new</span> Node();</span><br><span class="line">            cur = cur-&gt;nxt[c-<span class="string">'a'</span>];</span><br><span class="line">            cur-&gt;ans.push_back(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&gt; suggestedProducts(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; p, <span class="built_in">string</span> searchWord) &#123;</span><br><span class="line">        sort(p.begin(), p.end());</span><br><span class="line">        root = <span class="keyword">new</span> Node();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; p.size(); ++i) add(p[i], i);</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&gt; ret(searchWord.size());</span><br><span class="line">        <span class="keyword">auto</span> cur = root;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; searchWord.size(); ++i)&#123;</span><br><span class="line">            <span class="keyword">char</span> c = searchWord[i];</span><br><span class="line">            <span class="keyword">if</span>(!cur-&gt;nxt[c-<span class="string">'a'</span>]) <span class="keyword">break</span>;</span><br><span class="line">            cur = cur-&gt;nxt[c-<span class="string">'a'</span>];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">3</span> &amp;&amp; j &lt; cur-&gt;ans.size();++j) ret[i].push_back(p[cur-&gt;ans[j]]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/02/1320-Minimum-Distance-to-Type-a-Word-Using-Two-Fingers/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/02/1320-Minimum-Distance-to-Type-a-Word-Using-Two-Fingers/" itemprop="url">1320. Minimum Distance to Type a Word Using Two Fingers</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-02T16:46:00+08:00">2020-03-02</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-03-02T17:48:38+08:00">2020-03-02</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1320-minimum-distance-to-type-a-word-using-two-fingers"><a class="header-anchor" href="#1320-minimum-distance-to-type-a-word-using-two-fingers">¶</a><a href="https://leetcode.com/problems/minimum-distance-to-type-a-word-using-two-fingers/" target="_blank" rel="noopener">1320. Minimum Distance to Type a Word Using Two Fingers</a></h3>
<p>Difficulty: <strong>Hard</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2020/01/02/leetcode_keyboard.png" alt></p>
<p>You have a keyboard layout as shown above in the XY plane, where each English uppercase letter is located at some coordinate, for example, the letter <strong>A</strong> is located at coordinate <strong>(0,0)</strong>, the letter <strong>B</strong> is located at coordinate <strong>(0,1)</strong>, the letter <strong>P</strong> is located at coordinate <strong>(2,3)</strong> and the letter <strong>Z</strong> is located at coordinate <strong>(4,1)</strong>.</p>
<p>Given the string <code>word</code>, return the minimum total distance to type such string using only two fingers. The distance between coordinates <strong>(x<sub style="display: inline;">1</sub>,y<sub style="display: inline;">1</sub>)</strong> and <strong>(x<sub style="display: inline;">2</sub>,y<sub style="display: inline;">2</sub>)</strong> is <strong>|x<sub style="display: inline;">1</sub> - x<sub style="display: inline;">2</sub>| + |y<sub style="display: inline;">1</sub> - y<sub style="display: inline;">2</sub>|</strong>.</p>
<p>Note that the initial positions of your two fingers are considered free so don’t count towards your total distance, also your two fingers do not have to start at the first letter or the first two letters.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Input: word = &quot;CAKE&quot;</span><br><span class="line">Output: 3</span><br><span class="line">Explanation: </span><br><span class="line">Using two fingers, one optimal way to type &quot;CAKE&quot; is: </span><br><span class="line">Finger 1 on letter &apos;C&apos; -&gt; cost = 0 </span><br><span class="line">Finger 1 on letter &apos;A&apos; -&gt; cost = Distance from letter &apos;C&apos; to letter &apos;A&apos; = 2 </span><br><span class="line">Finger 2 on letter &apos;K&apos; -&gt; cost = 0 </span><br><span class="line">Finger 2 on letter &apos;E&apos; -&gt; cost = Distance from letter &apos;K&apos; to letter &apos;E&apos; = 1 </span><br><span class="line">Total distance = 3</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Input: word = &quot;HAPPY&quot;</span><br><span class="line">Output: 6</span><br><span class="line">Explanation: </span><br><span class="line">Using two fingers, one optimal way to type &quot;HAPPY&quot; is:</span><br><span class="line">Finger 1 on letter &apos;H&apos; -&gt; cost = 0</span><br><span class="line">Finger 1 on letter &apos;A&apos; -&gt; cost = Distance from letter &apos;H&apos; to letter &apos;A&apos; = 2</span><br><span class="line">Finger 2 on letter &apos;P&apos; -&gt; cost = 0</span><br><span class="line">Finger 2 on letter &apos;P&apos; -&gt; cost = Distance from letter &apos;P&apos; to letter &apos;P&apos; = 0</span><br><span class="line">Finger 1 on letter &apos;Y&apos; -&gt; cost = Distance from letter &apos;A&apos; to letter &apos;Y&apos; = 4</span><br><span class="line">Total distance = 6</span><br></pre></td></tr></table></figure>
<p><strong>Example 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: word = &quot;NEW&quot;</span><br><span class="line">Output: 3</span><br></pre></td></tr></table></figure>
<p><strong>Example 4:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: word = &quot;YEAR&quot;</span><br><span class="line">Output: 7</span><br></pre></td></tr></table></figure>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>2 &lt;= word.length &lt;= 300</code></li>
<li>Each <code>word[i]</code> is an English uppercase letter.</li>
</ul>
<h4 id="solution"><a class="header-anchor" href="#solution">¶</a>Solution</h4>
<h6 id="法一-dp-top-down"><a class="header-anchor" href="#法一-dp-top-down">¶</a>法一 dp top-down</h6>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">string</span> word;</span><br><span class="line">    <span class="keyword">int</span> n, dp[<span class="number">301</span>][<span class="number">27</span>][<span class="number">27</span>]&#123;&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// distance between word[from] and word[to]</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">dist</span><span class="params">(<span class="keyword">int</span> from, <span class="keyword">int</span> to)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (from == <span class="number">26</span> || to == <span class="number">26</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">abs</span>(from / <span class="number">6</span> - to / <span class="number">6</span>) + <span class="built_in">abs</span>(from % <span class="number">6</span> - to % <span class="number">6</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// min # of moves to cover word from i onward with left on j+'A' and right on k+'A'</span></span><br><span class="line">    <span class="comment">//当左手在字母j+'A'，右手在字母k+'A'上，想要打出从i开始到结尾的所有字母需要的最少距离</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i == n) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (dp[i][j][k]) <span class="keyword">return</span> dp[i][j][k];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> ci = word[i] -<span class="string">'A'</span>;</span><br><span class="line">        <span class="keyword">int</span> leftMove = solve(i + <span class="number">1</span>, ci, k) + dist(j, ci);</span><br><span class="line">        <span class="keyword">int</span> rightMove = solve(i + <span class="number">1</span>, j, ci) + dist(k, ci);</span><br><span class="line">        <span class="keyword">return</span> dp[i][j][k] = min(leftMove, rightMove);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minimumDistance</span><span class="params">(<span class="built_in">string</span> word)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;word = word, <span class="keyword">this</span>-&gt;n = word.size();</span><br><span class="line">        <span class="keyword">return</span> solve(<span class="number">0</span>, <span class="number">26</span>, <span class="number">26</span>);<span class="comment">//26代表还没开始摸键盘</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h6 id="法二-dp-bottom-up"><a class="header-anchor" href="#法二-dp-bottom-up">¶</a>法二 dp bottom-up</h6>
<p>  这个解法很难懂，不好理解。首先假设只有一只手，那么总共就需要ans距离的移动才能打出整个字符串，有了第二手就能减少一些长距离的移动save，问题就变成了最多能减少多少移动。假设当前已经字符和下一个字符为<code>word[i]</code>和<code>word[i+1]</code>，当在前面的那只手放在字符a上能减去的最多的移动距离为<code>dp[a]</code>，递推式为<code>dp[b] = max(dp[b], dp[a] + d(b,c) - d(a,c));</code>，<code>d(b,c)</code>假设不动在前面的那只手只动后一只手要多增加的移动距离，<code>d(a,c)</code>是动前面的那只手不动后面的手多增加的移动距离（<code>dp[b]</code>是当前面的手放在b上时的距离差，因此c需要从b之前的某个位置a移动过来，这个交叉移动造成的距离差为<code>d(b,c) - d(a,c)</code>，而a位置本身的距离差为<code>dp[a]</code>，加上之后就得到b位置产生交错时的距离差）。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minimumDistance</span><span class="params">(<span class="built_in">string</span> word)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>, save = <span class="number">0</span>, n = word.size();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; dp(<span class="number">26</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> b = word[i] - <span class="string">'A'</span>, c = word[i+<span class="number">1</span>] - <span class="string">'A'</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> a = <span class="number">0</span>; a &lt; <span class="number">26</span>; a++) &#123;</span><br><span class="line">                dp[b] = max(dp[b], dp[a] + d(b,c) - d(a,c));</span><br><span class="line">            &#125;</span><br><span class="line">            save = max(save, dp[b]);</span><br><span class="line">            ans += d(b, c);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans - save;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">d</span> <span class="params">(<span class="keyword">int</span> first, <span class="keyword">int</span> second)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="built_in">abs</span>(first % <span class="number">6</span> - second % <span class="number">6</span>) + <span class="built_in">abs</span>(first / <span class="number">6</span> - second / <span class="number">6</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h6 id="法三"><a class="header-anchor" href="#法三">¶</a>法三</h6>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">dist</span><span class="params">(<span class="keyword">char</span> a, <span class="keyword">char</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = a - <span class="string">'A'</span>, m = b - <span class="string">'A'</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">abs</span>(n%<span class="number">6</span> - m%<span class="number">6</span>) + <span class="built_in">abs</span>(n/<span class="number">6</span> - m/<span class="number">6</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minimumDistance</span><span class="params">(<span class="built_in">string</span> word)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = word.size();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; dp(n, INT_MAX);</span><br><span class="line">        dp[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">        dp[<span class="number">0</span>] = dist(word[<span class="number">0</span>], word[<span class="number">1</span>]);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">3</span>; i &lt;= n; ++i)&#123;</span><br><span class="line">            dp[i<span class="number">-1</span>] = min(dp[i<span class="number">-1</span>], dp[<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i - <span class="number">2</span>;j &gt;= <span class="number">0</span>; --j)&#123;</span><br><span class="line">                <span class="keyword">int</span> tmp = dp[j]; dp[j] = INT_MAX;</span><br><span class="line">                dp[j] = min(dp[j], tmp+dist(word[i<span class="number">-2</span>], word[i<span class="number">-1</span>]));</span><br><span class="line">                <span class="keyword">if</span>(j &gt; <span class="number">0</span>) dp[i<span class="number">-1</span>] = min(dp[i<span class="number">-1</span>], tmp+dist(word[j<span class="number">-1</span>], word[i<span class="number">-1</span>]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> *min_element(begin(dp), end(dp));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/02/1219-Path-with-Maximum-Gold/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/02/1219-Path-with-Maximum-Gold/" itemprop="url">1219. Path with Maximum Gold</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-02T01:00:00+08:00">2020-03-02</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-03-02T02:17:31+08:00">2020-03-02</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1219-path-with-maximum-gold"><a class="header-anchor" href="#1219-path-with-maximum-gold">¶</a><a href="https://leetcode.com/problems/path-with-maximum-gold/" target="_blank" rel="noopener">1219. Path with Maximum Gold</a></h3>
<p>Difficulty: <strong>Medium</strong></p>
<p>In a gold mine <code>grid</code> of size <code>m * n</code>, each cell in this mine has an integer representing the amount of gold in that cell, <code>0</code> if it is empty.</p>
<p>Return the maximum amount of gold you can collect under the conditions:</p>
<ul>
<li>Every time you are located in a cell you will collect all the gold in that cell.</li>
<li>From your position you can walk one step to the left, right, up or down.</li>
<li>You can’t visit the same cell more than once.</li>
<li>Never visit a cell with <code>0</code> gold.</li>
<li>You can start and stop collecting gold from <strong>any</strong> position in the grid that has some gold.</li>
</ul>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Input: grid = [[0,6,0],[5,8,7],[0,9,0]]</span><br><span class="line">Output: 24</span><br><span class="line">Explanation:</span><br><span class="line">[[0,6,0],</span><br><span class="line"> [5,8,7],</span><br><span class="line"> [0,9,0]]</span><br><span class="line">Path to get the maximum gold, 9 -&gt; 8 -&gt; 7.</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Input: grid = [[1,0,7],[2,0,6],[3,4,5],[0,3,0],[9,0,20]]</span><br><span class="line">Output: 28</span><br><span class="line">Explanation:</span><br><span class="line">[[1,0,7],</span><br><span class="line"> [2,0,6],</span><br><span class="line"> [3,4,5],</span><br><span class="line"> [0,3,0],</span><br><span class="line"> [9,0,20]]</span><br><span class="line">Path to get the maximum gold, 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 5 -&gt; 6 -&gt; 7.</span><br></pre></td></tr></table></figure>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= grid.length, grid[i].length &lt;= 15</code></li>
<li><code>0 &lt;= grid[i][j] &lt;= 100</code></li>
<li>There are at most **25 **cells containing gold.</li>
</ul>
<h4 id="solution"><a class="header-anchor" href="#solution">¶</a>Solution</h4>
<p>Language: <strong>C++</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(grid[i][j] == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>, a = grid[i][j];</span><br><span class="line">        grid[i][j] = <span class="number">0</span>;<span class="comment">//此处将grid[i][j]直接设为0，代表矿已经被挖走</span></span><br><span class="line">        <span class="keyword">if</span>(i &gt; <span class="number">0</span>) ans = max(ans, a+dfs(grid, i<span class="number">-1</span>, j));</span><br><span class="line">        <span class="keyword">if</span>(j &gt; <span class="number">0</span>) ans = max(ans, a+dfs(grid, i, j<span class="number">-1</span>));</span><br><span class="line">        <span class="keyword">if</span>(i+<span class="number">1</span> &lt; grid.size()) ans = max(ans, a+dfs(grid, i+<span class="number">1</span>, j));</span><br><span class="line">        <span class="keyword">if</span>(j+<span class="number">1</span> &lt; grid[<span class="number">0</span>].size()) ans = max(ans, a+dfs(grid, i, j+<span class="number">1</span>));</span><br><span class="line">        grid[i][j] = a;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getMaximumGold</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; grid.size(); ++i)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; grid[<span class="number">0</span>].size(); ++j)</span><br><span class="line">                <span class="keyword">if</span>(grid[i][j])  ans = max(ans, dfs(grid, i, j));</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>这道题有一个非常巧妙优化策略，详细的解释见题解:<a href="https://leetcode-cn.com/problems/path-with-maximum-gold/solution/dfsyou-hua-ban-by-erik_chen/%EF%BC%8C%E5%85%B3%E4%BA%8E%E8%BF%99%E4%B8%AA%E4%BC%98%E5%8C%96%E7%9A%84%E6%AD%A3%E7%A1%AE%E6%80%A7%E8%BF%98%E6%9C%89%E5%BE%85%E5%95%86%E6%A6%B7%EF%BC%8C%E6%AF%94%E5%A6%82%E8%BF%99%E4%B8%AA" target="_blank" rel="noopener">https://leetcode-cn.com/problems/path-with-maximum-gold/solution/dfsyou-hua-ban-by-erik_chen/，关于这个优化的正确性还有待商榷，比如这个</a><code>[[6,6,9],[5,0,7],[6,9,8],[5,0,9],[5,5,9],[0,0,0]]</code>比较特殊的样例就通不过，但是绝大多数的都能通过。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pairint;    </span><br><span class="line">    <span class="keyword">int</span> rowc, colc, r, t;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; *pd;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">(pairint p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = p.first, j = p.second;</span><br><span class="line">        <span class="keyword">int</span>&amp; k = (*pd)[i][j]; t += k; k = -k; </span><br><span class="line">        <span class="comment">//cout &lt;&lt; i &lt;&lt; ":" &lt;&lt; j &lt;&lt; "=" &lt;&lt; t &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">if</span> (i &amp;&amp; (*pd)[i<span class="number">-1</span>][j] &gt; <span class="number">0</span>) loop(&#123;i<span class="number">-1</span>, j&#125;);</span><br><span class="line">        <span class="keyword">if</span> (j &amp;&amp; (*pd)[i][j<span class="number">-1</span>] &gt; <span class="number">0</span>) loop(&#123;i, j<span class="number">-1</span>&#125;);</span><br><span class="line">        <span class="keyword">if</span> (i != rowc &amp;&amp; (*pd)[i+<span class="number">1</span>][j] &gt; <span class="number">0</span>) loop(&#123;i+<span class="number">1</span>, j&#125;);</span><br><span class="line">        <span class="keyword">if</span> (j != colc &amp;&amp; (*pd)[i][j+<span class="number">1</span>] &gt; <span class="number">0</span>) loop(&#123;i, j+<span class="number">1</span>&#125;);</span><br><span class="line">        <span class="keyword">if</span> (t &gt; r) r = t; k = -k; t -= k;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getMaximumGold</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;</span><br><span class="line">        rowc = grid.size()<span class="number">-1</span>, colc = grid[<span class="number">0</span>].size()<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">int</span> i, j, k; t = r = <span class="number">0</span>; <span class="built_in">vector</span>&lt;pairint&gt; h;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt;= rowc; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt;= colc; j++) &#123;</span><br><span class="line">                k = <span class="number">0</span>; </span><br><span class="line">                <span class="keyword">if</span> (i &amp;&amp; grid[i<span class="number">-1</span>][j]) k++;</span><br><span class="line">                <span class="keyword">if</span> (j &amp;&amp; grid[i][j<span class="number">-1</span>]) k++;</span><br><span class="line">                <span class="keyword">if</span> (i != rowc &amp;&amp; grid[i+<span class="number">1</span>][j]) k++;</span><br><span class="line">                <span class="keyword">if</span> (j != colc &amp;&amp; grid[i][j+<span class="number">1</span>]) k++;</span><br><span class="line">                <span class="keyword">if</span> (k == <span class="number">1</span>) h.push_back(&#123;i, j&#125;);</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (k == <span class="number">0</span> &amp;&amp; grid[i][j] &gt; r) r = grid[i][j];                    </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        pd = &amp;grid;</span><br><span class="line">        <span class="keyword">if</span> (h.size()) &#123;</span><br><span class="line">            <span class="keyword">for</span>(pairint&amp; p: h) loop(p);  </span><br><span class="line">            <span class="keyword">return</span> r;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt;= rowc; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt;= colc; j++) &#123;</span><br><span class="line">                loop(&#123;i, j&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/01/5-Longest-Palindromic-Substring/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/01/5-Longest-Palindromic-Substring/" itemprop="url">5. Longest Palindromic Substring</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-01T23:30:00+08:00">2020-03-01</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-03-01T23:30:56+08:00">2020-03-01</time>
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="5-longest-palindromic-substring"><a class="header-anchor" href="#5-longest-palindromic-substring">¶</a><a href="https://leetcode.com/problems/longest-palindromic-substring/" target="_blank" rel="noopener">5. Longest Palindromic Substring</a></h3>
<p>Difficulty: <strong>Medium</strong></p>
<p>Given a string <strong>s</strong>, find the longest palindromic substring in <strong>s</strong>. You may assume that the maximum length of <strong>s</strong> is 1000.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;babad&quot;</span><br><span class="line">Output: &quot;bab&quot;</span><br><span class="line">Note: &quot;aba&quot; is also a valid answer.</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;cbbd&quot;</span><br><span class="line">Output: &quot;bb&quot;</span><br></pre></td></tr></table></figure>
<h4 id="solution"><a class="header-anchor" href="#solution">¶</a>Solution</h4>
<p>manacher算法:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">longestPalindrome</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="built_in">string</span> <span class="title">S</span><span class="params">(<span class="number">2</span>*s.size()+<span class="number">1</span>, <span class="string">' '</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; S.size(); ++i) S[i] = i&amp;<span class="number">1</span>?s[i&gt;&gt;<span class="number">1</span>]:<span class="string">'#'</span>;</span><br><span class="line">        <span class="keyword">int</span> r = <span class="number">0</span>, m = <span class="number">0</span>, mx = <span class="number">0</span>, ind = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; len(S.size());</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; S.size(); ++i)&#123;</span><br><span class="line">            <span class="keyword">int</span> j = i &lt;= r ? min(r - i, len[<span class="number">2</span> * m - i]) : <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>(i - j - <span class="number">1</span> &gt;= <span class="number">0</span> &amp;&amp; i + j + <span class="number">1</span> &lt; S.size() &amp;&amp; S[i + j + <span class="number">1</span>] == S[i - j - <span class="number">1</span>]) j++;</span><br><span class="line">            len[i] = j;</span><br><span class="line">            <span class="keyword">if</span>(i + j &gt; r) r = i + j, m = i;</span><br><span class="line">            <span class="keyword">if</span>(j &gt; mx) mx = j, ind = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="built_in">string</span> <span class="title">ans</span><span class="params">((mx&amp;~<span class="number">1</span>)+(ind&amp;<span class="number">1</span>?<span class="number">1</span>:<span class="number">0</span>), <span class="string">' '</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = ind-mx, j = <span class="number">0</span>; i &lt;= ind+mx; ++i) <span class="keyword">if</span>(S[i] != <span class="string">'#'</span>) ans[j++] = S[i];</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/01/1312-Minimum-Insertion-Steps-to-Make-a-String-Palindrome/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/01/1312-Minimum-Insertion-Steps-to-Make-a-String-Palindrome/" itemprop="url">1312. Minimum Insertion Steps to Make a String Palindrome</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-01T22:50:16+08:00">2020-03-01</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-03-01T22:51:28+08:00">2020-03-01</time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1312-minimum-insertion-steps-to-make-a-string-palindrome"><a class="header-anchor" href="#1312-minimum-insertion-steps-to-make-a-string-palindrome">¶</a><a href="https://leetcode.com/problems/minimum-insertion-steps-to-make-a-string-palindrome/" target="_blank" rel="noopener">1312. Minimum Insertion Steps to Make a String Palindrome</a></h3>
<p>Difficulty: <strong>Hard</strong></p>
<p>Given a string <code>s</code>. In one step you can insert any character at any index of the string.</p>
<p>Return <em>the minimum number of steps</em> to make <code>s</code> palindrome.</p>
<p>A <strong>Palindrome String</strong> is one that reads the same backward as well as forward.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: s = &quot;zzazz&quot;</span><br><span class="line">Output: 0</span><br><span class="line">Explanation: The string &quot;zzazz&quot; is already palindrome we don&apos;t need any insertions.</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: s = &quot;mbadm&quot;</span><br><span class="line">Output: 2</span><br><span class="line">Explanation: String can be &quot;mbdadbm&quot; or &quot;mdbabdm&quot;.</span><br></pre></td></tr></table></figure>
<p><strong>Example 3:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: s = &quot;leetcode&quot;</span><br><span class="line">Output: 5</span><br><span class="line">Explanation: Inserting 5 characters the string becomes &quot;leetcodocteel&quot;.</span><br></pre></td></tr></table></figure>
<p><strong>Example 4:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: s = &quot;g&quot;</span><br><span class="line">Output: 0</span><br></pre></td></tr></table></figure>
<p><strong>Example 5:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: s = &quot;no&quot;</span><br><span class="line">Output: 1</span><br></pre></td></tr></table></figure>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= s.length &lt;= 500</code></li>
<li>All characters of <code>s</code> are lower case English letters.</li>
</ul>
<h4 id="solution"><a class="header-anchor" href="#solution">¶</a>Solution</h4>
<h6 id="法一-dp"><a class="header-anchor" href="#法一-dp">¶</a>法一 dp</h6>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> rep(i,s,e) for (int i=s;i&lt;e;i++)</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> per(i,s,e) for (int i=e-1;i&gt;=s;i--)</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> mp make_pair</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> all(x) (x).begin(),(x).end()</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> SZ(x) ((int)(x).size())</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> UP(a, n) upper_bound((a).begin(), (a).end(), (n))</span></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">define</span> LOW(a, n) lower_bound((a).begin(), (a).end(), (n))</span></span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; VI;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;VI&gt; VVI;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;VVI&gt; VVVI;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line">    <span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="keyword">double</span> db;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minInsertions</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = SZ(s);</span><br><span class="line">        <span class="function">VVI <span class="title">dp</span><span class="params">(n, VI(n))</span></span>;</span><br><span class="line">        rep(j, <span class="number">0</span>, n) per(i, <span class="number">0</span>, j) &#123;</span><br><span class="line">            <span class="keyword">if</span>(s[i] == s[j]) dp[i][j] = dp[i+<span class="number">1</span>][j<span class="number">-1</span>];</span><br><span class="line">            <span class="keyword">else</span> dp[i][j] = min(dp[i+<span class="number">1</span>][j], dp[i][j<span class="number">-1</span>])+<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">0</span>][n<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h6 id="法二-dp-空间压缩"><a class="header-anchor" href="#法二-dp-空间压缩">¶</a>法二 dp 空间压缩</h6>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class"> &#123;</span></span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">minInsertions</span> <span class="params">(<span class="built_in">string</span> <span class="keyword">const</span>&amp; s)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">   <span class="keyword">auto</span> <span class="keyword">const</span> N = s.size();</span><br><span class="line">   <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; dp(N);</span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">int</span> i = N<span class="number">-2</span>; i &gt;= <span class="number">0</span>; --i)</span><br><span class="line">   &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> prev = dp[i], j = i+<span class="number">1</span>; j &lt; N; ++j)</span><br><span class="line">    &#123;</span><br><span class="line">     <span class="keyword">auto</span> <span class="keyword">const</span> before = dp[j];</span><br><span class="line">     <span class="keyword">if</span> (s[i] == s[j])</span><br><span class="line">     &#123;</span><br><span class="line">      dp[j] = prev;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">     &#123;</span><br><span class="line">      dp[j] = min(dp[j],dp[j<span class="number">-1</span>]) + <span class="number">1</span>;</span><br><span class="line">     &#125;</span><br><span class="line">     prev = before;</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> dp[N<span class="number">-1</span>];</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/01/1293-Shortest-Path-in-a-Grid-with-Obstacles-Elimination/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lidanyang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just a blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/01/1293-Shortest-Path-in-a-Grid-with-Obstacles-Elimination/" itemprop="url">1293. Shortest Path in a Grid with Obstacles Elimination</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-01T19:08:03+08:00">2020-03-01</time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2020-03-01T19:23:40+08:00">2020-03-01</time>
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1293-shortest-path-in-a-grid-with-obstacles-elimination"><a class="header-anchor" href="#1293-shortest-path-in-a-grid-with-obstacles-elimination">¶</a><a href="https://leetcode.com/problems/shortest-path-in-a-grid-with-obstacles-elimination/" target="_blank" rel="noopener">1293. Shortest Path in a Grid with Obstacles Elimination</a></h3>
<p>Difficulty: <strong>Hard</strong></p>
<p>Given a <code>m * n</code> grid, where each cell is either <code>0</code> (empty) or <code>1</code> (obstacle). In one step, you can move up, down, left or right from and to an empty cell.</p>
<p>Return the minimum number of steps to walk from the upper left corner <code>(0, 0)</code> to the lower right corner <code>(m-1, n-1)</code> given that you can eliminate <strong>at most</strong> <code>k</code> obstacles. If it is not possible to find such walk return -1.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Input: </span><br><span class="line">grid = </span><br><span class="line">[[0,0,0],</span><br><span class="line"> [1,1,0],</span><br><span class="line"> [0,0,0],</span><br><span class="line"> [0,1,1],</span><br><span class="line"> [0,0,0]], </span><br><span class="line">k = 1</span><br><span class="line">Output: 6</span><br><span class="line">Explanation: </span><br><span class="line">The shortest path without eliminating any obstacle is 10. </span><br><span class="line">The shortest path with one obstacle elimination at position (3,2) is 6\. Such path is (0,0) -&gt; (0,1) -&gt; (0,2) -&gt; (1,2) -&gt; (2,2) -&gt; (3,2) -&gt; (4,2).</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Input: </span><br><span class="line">grid = </span><br><span class="line">[[0,1,1],</span><br><span class="line"> [1,1,1],</span><br><span class="line"> [1,0,0]], </span><br><span class="line">k = 1</span><br><span class="line">Output: -1</span><br><span class="line">Explanation: </span><br><span class="line">We need to eliminate at least two obstacles to find such a walk.</span><br></pre></td></tr></table></figure>
<p><strong>Constraints:</strong></p>
<ul>
<li><code>grid.length == m</code></li>
<li><code>grid[0].length == n</code></li>
<li><code>1 &lt;= m, n &lt;= 40</code></li>
<li><code>1 &lt;= k &lt;= m*n</code></li>
<li><code>grid[i][j] == 0 **or** 1</code></li>
<li><code>grid[0][0] == grid[m-1][n-1] == 0</code></li>
</ul>
<h4 id="solution"><a class="header-anchor" href="#solution">¶</a>Solution</h4>
<h6 id="法一-bfs"><a class="header-anchor" href="#法一-bfs">¶</a>法一 bfs</h6>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> d[<span class="number">5</span>] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">shortestPath</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">queue</span>&lt;tuple&lt;<span class="keyword">int</span>,<span class="keyword">int</span>,<span class="keyword">int</span>&gt;&gt; q;</span><br><span class="line">        <span class="keyword">int</span> m = grid.size(), n = grid[<span class="number">0</span>].size(), ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> vis[m][n][m*n+<span class="number">1</span>]&#123;&#125;;</span><br><span class="line">        vis[<span class="number">0</span>][<span class="number">0</span>][k] = <span class="number">1</span>;</span><br><span class="line">        q.push(&#123;<span class="number">0</span>,<span class="number">0</span>,k&#125;);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> sz = q.size();!q.empty(); ++ans, sz = q.size())&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; sz; ++j)&#123;</span><br><span class="line">                <span class="keyword">auto</span> [x , y, rem] = q.front(); q.pop();</span><br><span class="line">                <span class="keyword">if</span>(x == m<span class="number">-1</span> &amp;&amp; y == n<span class="number">-1</span>) <span class="keyword">return</span> ans;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; ++k)&#123;</span><br><span class="line">                    <span class="keyword">int</span> nx = x + d[k], ny = y + d[k+<span class="number">1</span>];</span><br><span class="line">                    <span class="keyword">if</span>(nx &lt; <span class="number">0</span> || nx &gt;= m|| ny &lt; <span class="number">0</span> || ny &gt;= n) <span class="keyword">continue</span>;</span><br><span class="line">                    <span class="keyword">if</span>(grid[nx][ny] == <span class="number">1</span> &amp;&amp; rem &gt; <span class="number">0</span> &amp;&amp; !vis[nx][ny][rem<span class="number">-1</span>]) q.push(&#123;nx, ny, rem<span class="number">-1</span>&#125;), vis[nx][ny][rem<span class="number">-1</span>] = <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">if</span>(grid[nx][ny] == <span class="number">0</span> &amp;&amp; !vis[nx][ny][rem]) q.push(&#123;nx, ny, rem&#125;), vis[nx][ny][rem]=<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h6 id="法二-优化-bfs"><a class="header-anchor" href="#法二-优化-bfs">¶</a>法二 优化+bfs</h6>
<p>两个优化的点:</p>
<ol>
<li>在某个位置如果还剩n次消除机会的话，那么经过更多步数再回到该位置所剩的消除机会必须多于n，防止消耗了更多的机会的结果仅仅是原地踏步。</li>
<li>从某个点到终点的曼哈顿距离如果小于当前机会数的话，可以直接沿着无障碍的最短路径走，因为这条路径上最多也只有曼哈顿距离多个障碍。</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">shortestPath</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> row=grid.size(),col=grid[<span class="number">0</span>].size();</span><br><span class="line">        <span class="keyword">int</span> minsteps=max(<span class="number">0</span>,row+col<span class="number">-2</span>);</span><br><span class="line">        <span class="keyword">if</span>(k&gt;=minsteps<span class="number">-1</span>)</span><br><span class="line">            <span class="keyword">return</span> minsteps;</span><br><span class="line">        <span class="keyword">int</span> x[]=&#123;<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span> y[]=&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">-1</span>&#125;;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;vis(row*col,<span class="number">-1</span>);</span><br><span class="line">        vis[<span class="number">0</span>]=k;</span><br><span class="line">        <span class="keyword">int</span> steps=<span class="number">0</span>;</span><br><span class="line">        <span class="built_in">queue</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt;q;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;a;</span><br><span class="line">        a.push_back(<span class="number">0</span>);a.push_back(<span class="number">0</span>);a.push_back(k);</span><br><span class="line">        q.push(a);</span><br><span class="line">        <span class="built_in">queue</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt;q1;</span><br><span class="line">        <span class="keyword">while</span>(!q.empty())</span><br><span class="line">        &#123;</span><br><span class="line">            steps++;</span><br><span class="line">             <span class="keyword">while</span>(!q.empty())</span><br><span class="line">             &#123;</span><br><span class="line">            <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;p=q.front();</span><br><span class="line">            q.pop();</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> g=p[<span class="number">0</span>]+x[i];</span><br><span class="line">                <span class="keyword">int</span> h=p[<span class="number">1</span>]+y[i];</span><br><span class="line">                <span class="keyword">if</span>(g&gt;=<span class="number">0</span> &amp;&amp; h&gt;=<span class="number">0</span> &amp;&amp; g&lt;row &amp;&amp; h&lt;col )</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">int</span> kk=p[<span class="number">2</span>]-grid[g][h];</span><br><span class="line">                   <span class="keyword">if</span>(vis[g*col+h]&gt;=kk)</span><br><span class="line">                       <span class="keyword">continue</span>;</span><br><span class="line">                    <span class="keyword">int</span> minsteps=row-g<span class="number">-1</span>+col-h<span class="number">-1</span>;</span><br><span class="line">                    <span class="keyword">if</span>(minsteps<span class="number">-1</span>&lt;=kk)</span><br><span class="line">                        <span class="keyword">return</span> steps+minsteps;</span><br><span class="line">                    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;b;</span><br><span class="line">                    b.push_back(g);b.push_back(h);b.push_back(kk);</span><br><span class="line">                    vis[g*col+h]=kk;</span><br><span class="line">                    q1.push(b);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">             &#125;</span><br><span class="line">            q=q1;</span><br><span class="line">           <span class="built_in">queue</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt;empty;</span><br><span class="line">           swap( q1, empty );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/45/">45</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">lidanyang</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">441</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">115</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/lidanyang" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:1261727840@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lidanyang</span>

  

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Gemini</a> v6.0.0</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.0"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=6.0.0"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=6.0.0"></script>


  

</body>
</html>
